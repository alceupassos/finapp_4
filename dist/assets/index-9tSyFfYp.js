import{a as d,j as e,c as le,h as ra}from"./vendor-react-LKNicB05.js";import{m as f}from"./vendor-motion-B58r-QRs.js";import{L as oa,C as na,N as ia,T as U,W as Le,F as la,U as ca,a as da,B as Be,S as ce,b as ma,c as xa,X as Ve,d as _e,e as pa,M as ua,f as De,g as Ge,h as pe,A as Je,i as ha,E as ga,j as fa,k as ba,l as ja,m as va,n as Na,o as qe,P as ya,p as Ke,V as wa,I as He,q as Ca,R as Sa,r as Ea,s as Ue,t as Ye,u as Xe,v as Da,w as Ra,x as ne,y as Ia,z as Aa,D as Ma,G as Oa,H as ka,J as Pa}from"./vendor-ui-CH9-Rzli.js";import{i as V,j as oe,k as ae,l as se,m as te,n as X,o as _,p as be,q as ue,r as H,s as Ta,t as We,u as Ze,v as we}from"./vendor-recharts-CC_6uSjI.js";import{c as za,a as Re,s as Ie,u as $a,b as Fa,m as Ae}from"./vendor-tremor-DHV9nXN5.js";import{a5 as La,b$ as Ba}from"./vendor-D5S_S527.js";import{t as Va}from"./vendor-tailwind-merge-DxgBj8Ug.js";import"./vendor-date-fns-B_6AWE7E.js";import"./vendor-tanstack-ofcTeKip.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function o(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(t){if(t.ep)return;t.ep=!0;const i=o(t);fetch(t.href,i)}})();const Qe="https://xzrmzmcoslomtzkzgskn.supabase.co",he="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI";function ea(){const a=localStorage.getItem("supabase_session");if(!a)return null;try{return JSON.parse(a).access_token||null}catch{return null}}async function re(a,r={}){const o=new URL(`${Qe}/rest/v1/${a}`);Object.entries(r.query||{}).forEach(([i,m])=>o.searchParams.set(i,m));const l=ea()||he,t=await fetch(o.toString(),{headers:{apikey:he,Authorization:`Bearer ${l}`,Accept:"application/json"}});if(!t.ok)throw new Error(`Supabase GET ${a} failed: ${t.status}`);return t.json()}async function Me(a,r){const o=`${Qe}/rest/v1/${a}`,l=ea()||he,t=await fetch(o,{method:"POST",headers:{apikey:he,Authorization:`Bearer ${l}`,"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify(r)});if(!t.ok)throw new Error(`Supabase POST ${a} failed: ${t.status}`);return t.json()}const T={restGet:re,restPost:Me,getCompanies:async()=>{const a=await re("dre_entries",{query:{select:"company_cnpj,company_nome",limit:"1000"}}),r=await re("cashflow_entries",{query:{select:"company_cnpj,company_nome",limit:"1000"}}),o=new Map;return[...a,...r].forEach(l=>{const t=l.company_cnpj;o.has(t)||o.set(t,{cnpj:t,cliente_nome:l.company_nome,grupo_empresarial:l.company_nome.includes("VOLPE")?"Grupo Volpe":"Outros"})}),Array.from(o.values()).sort((l,t)=>l.cnpj.localeCompare(t.cnpj))},getDRE:async a=>{const r=(a||"").replace(/^0+/,""),o=await re("dre_entries",{query:{company_cnpj:`eq.${r}`,select:"*",limit:"5000"}});return Array.isArray(o)?(console.log("üîç getDRE recebeu",o.length,"registros para CNPJ",r),o.map(l=>({data:l.date||l.data,conta:l.account??l.conta??"Conta",natureza:l.nature??l.natureza??null,valor:Number(l.amount??l.valor??0)}))):[]},getDFC:async a=>{const r=(a||"").replace(/^0+/,""),o=await re("cashflow_entries",{query:{company_cnpj:`eq.${r}`,select:"*",limit:"5000"}});if(!Array.isArray(o))return[];if(console.log("üîç getDFC recebeu",o.length,"registros para CNPJ",r),o.length&&(o[0].entrada!==void 0||o[0].saida!==void 0))return o;const l=[...o].sort((i,m)=>new Date(i.date||i.data).getTime()-new Date(m.date||m.data).getTime());let t=0;return l.map(i=>{const m=String(i.kind||"").toLowerCase()==="in"?Number(i.amount||0):0,c=String(i.kind||"").toLowerCase()==="out"?Number(i.amount||0):0;return t+=m-c,{data:i.date||i.data,descricao:i.category||i.descricao||"Lan√ßamento",entrada:m,saida:c,saldo:t,id:i.id??void 0}})},log:a=>Me("app_logs",{...a,ts:new Date().toISOString()})};let de="";async function aa(a,r){const t=await fetch("https://xzrmzmcoslomtzkzgskn.supabase.co/auth/v1/token?grant_type=password",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI",Accept:"application/json"},body:JSON.stringify({email:a,password:r})});if(!t.ok){try{const i=await t.json();de=String(i.error_description||i.error||`HTTP ${t.status}`)}catch{de=`HTTP ${t.status}`}return null}return de="",t.json()}async function _a(a,r){try{const o=await aa(a,r);if(!o||!o.access_token)return null;localStorage.setItem("supabase_session",JSON.stringify(o));const l={id:o.user?.id||"unknown",email:a},t={id:l.id,email:l.email||a,name:(l.email||a).split("@")[0],role:"cliente",defaultCompany:null,mode:"supabase",accessToken:o.access_token};return localStorage.setItem("session_user",JSON.stringify(t)),t}catch{return null}}function Ga(){const a=localStorage.getItem("session_user");return a?JSON.parse(a):null}function Ja(){localStorage.removeItem("session_user"),localStorage.removeItem("supabase_session")}const qa=[{icon:oa,label:"Dashboard",active:!0},{icon:na,label:"An√°lises",active:!1},{icon:ia,label:"Not√≠cias",active:!1},{icon:U,label:"Fluxo de Caixa",active:!1},{icon:Le,label:"Extrato de Lan√ßamentos",active:!1},{icon:la,label:"Relat√≥rios",active:!1},{icon:ca,label:"Clientes",active:!1}];function Ka(a){return[{icon:Be,label:"Notifica√ß√µes"},{icon:ce,label:"Configura√ß√µes"},{icon:ma,label:"Sair"}].filter(o=>!o.adminOnly||a==="admin")}function Ha({onOpenSettings:a,role:r="cliente"}){const[o,l]=d.useState(null);return e.jsxs(f.aside,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"fixed left-0 top-0 h-screen w-64 bg-gradient-to-b from-charcoal-950 via-graphite-950 to-charcoal-900 border-r border-graphite-900 flex flex-col z-50 pattern-soft",children:[e.jsx("div",{className:"p-6 border-b border-graphite-900 flex justify-center",children:e.jsx(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:e.jsx("img",{src:"/finapp-logo.png",alt:"FinApp Logo",className:"h-16 w-auto object-contain"})})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:qa.map((t,i)=>e.jsxs(f.button,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*i},onHoverStart:()=>l(i),onHoverEnd:()=>l(null),onClick:()=>{if(t.label==="Relat√≥rios"){const m=new CustomEvent("navigate",{detail:"Relat√≥rios"});window.dispatchEvent(m)}if(t.label==="Clientes"){const m=new CustomEvent("navigate",{detail:"Clientes"});window.dispatchEvent(m)}if(t.label==="Dashboard"||t.label==="An√°lises"||t.label==="Not√≠cias"||t.label==="Fluxo de Caixa"||t.label==="Extrato de Lan√ßamentos"){const m=new CustomEvent("navigate",{detail:t.label});window.dispatchEvent(m)}},className:`
              w-full flex items-center gap-3 px-4 py-2.5 rounded-xl
              transition-all duration-200 group relative
              ${t.active?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-900"}
            `,children:[t.active&&e.jsx(f.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gold-500 rounded-xl",transition:{type:"spring",duration:.6}}),e.jsx(f.span,{whileHover:{scale:1.08,rotate:1},className:"relative z-10",children:e.jsx(t.icon,{className:`w-4 h-4 ${t.active?"text-white":""}`})}),e.jsx("span",{className:"text-sm font-medium relative z-10",children:t.label}),o===i&&!t.active&&e.jsx(f.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},className:"ml-auto",children:e.jsx(da,{className:"w-4 h-4"})})]},t.label))}),e.jsx("div",{className:"p-4 border-t border-graphite-900 space-y-1",children:Ka(r).map((t,i)=>e.jsxs(f.button,{whileHover:{x:5},whileTap:{scale:.98},onClick:()=>{t.label==="Configura√ß√µes"&&a&&a(),t.label==="Sair"&&(Ja(),window.dispatchEvent(new CustomEvent("logout")),location.reload())},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-graphite-400 hover:text-white hover:bg-graphite-900 transition-all duration-200",children:[e.jsx(t.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.label))}),e.jsx(f.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"p-4 border-t border-graphite-900",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 transition-all cursor-pointer",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gold-400 to-gold-600 flex items-center justify-center text-white font-bold",children:"AC"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:"Admin BPO"}),e.jsx("p",{className:"text-xs text-graphite-400 truncate",children:"admin@bpo.com"})]})]})})]})}const Ua={info:(a,r={})=>T.log({level:"info",service:"UI",message:a,...r}),warn:(a,r={})=>T.log({level:"warn",service:"UI",message:a,...r}),error:(a,r={})=>T.log({level:"error",service:"UI",message:a,...r})};function Ya({open:a,onClose:r,contextRules:o=""}){const[l,t]=d.useState(""),[i,m]=d.useState([]),c=d.useRef(null);if(d.useEffect(()=>{a&&c.current&&(c.current.scrollTop=c.current.scrollHeight)},[a,i]),!a)return null;const b=async()=>{const u=l.trim();if(!u)return;const j=Date.now();m(g=>[...g,{role:"user",content:u,ts:j}]),t("");const y=`Consulta: ${u}

Regra: ${o?o.slice(0,160)+"‚Ä¶":"padr√£o executiva"}

Resposta: Em breve, integrado ao Supabase / ERPs.`;m(g=>[...g,{role:"assistant",content:y,ts:Date.now()}]);try{await Ua.info("oracle_query",{endpoint:"oracle",latencyMs:0})}catch{}};return e.jsx(f.div,{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm",children:e.jsxs(f.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"absolute right-8 top-20 w-[520px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xa,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Or√°culo de IA ‚Ä¢ Respostas concisas"})]}),e.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground",children:e.jsx(Ve,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:c,className:"max-h-[48vh] overflow-y-auto p-4 space-y-3",children:[i.map((u,j)=>e.jsx("div",{className:u.role==="user"?"text-foreground":"text-muted-foreground",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:u.content})},j)),i.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fa√ßa uma pergunta r√°pida sobre lan√ßamentos, DRE/DFC, fluxo ou insights."})]}),e.jsxs("div",{className:"p-4 border-t border-border flex items-center gap-2",children:[e.jsx("input",{value:l,onChange:u=>t(u.target.value),placeholder:"Digite sua pergunta‚Ä¶",className:"flex-1 bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"}),e.jsx("button",{onClick:b,className:"px-3 py-2 rounded-xl bg-gold-500 text-white text-sm hover:bg-gold-600 focus-visible-ring",children:"Enviar"})]})]})})}function Xa({onThemeToggle:a,isDark:r=!0,oracleContext:o="",currentPeriod:l="Ano",onPeriodChange:t,selectedMonth:i="2025-11",onMonthChange:m,selectedCompany:c="26888098000159",onCompanyChange:b,companies:u=[]}){const[j,y]=d.useState(3),[g,S]=d.useState(!1),R=[{value:"2025-01",label:"Janeiro 2025"},{value:"2025-02",label:"Fevereiro 2025"},{value:"2025-03",label:"Mar√ßo 2025"},{value:"2025-04",label:"Abril 2025"},{value:"2025-05",label:"Maio 2025"},{value:"2025-06",label:"Junho 2025"},{value:"2025-07",label:"Julho 2025"},{value:"2025-08",label:"Agosto 2025"},{value:"2025-09",label:"Setembro 2025"},{value:"2025-10",label:"Outubro 2025"},{value:"2025-11",label:"Novembro 2025"},{value:"2025-12",label:"Dezembro 2025"}];return e.jsxs(e.Fragment,{children:[e.jsxs(f.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"sticky top-0 z-40 bg-charcoal-950/80 backdrop-blur-xl border-b border-graphite-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("div",{className:"flex-1 max-w-xl",children:e.jsxs("div",{className:"relative group",children:[e.jsx(_e,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-graphite-400 group-focus-within:text-gold-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar transa√ß√µes, clientes, relat√≥rios...",className:`
                w-full pl-12 pr-4 py-3 
                bg-graphite-900 
                border border-graphite-800 
                rounded-2xl 
                text-white placeholder-graphite-500
                focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20
                transition-all duration-200
              `})]})}),e.jsxs("div",{className:"flex items-center gap-3 ml-6",children:[u.length>0&&e.jsxs("select",{value:c,onChange:w=>b?.(w.target.value),className:"px-4 py-2 rounded-xl bg-graphite-900 border border-graphite-800 text-white text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 transition-all",children:[e.jsx("option",{value:"",children:"Todas as Empresas"}),u.map(w=>e.jsx("option",{value:w.cnpj,children:w.cliente_nome},w.cnpj))]}),e.jsx("select",{value:i,onChange:w=>m?.(w.target.value),className:"px-4 py-2 rounded-xl bg-graphite-900 border border-graphite-800 text-white text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 transition-all",children:R.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}),e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>S(!0),className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group","aria-label":"Abrir Or√°culo de IA",children:e.jsx(pa,{className:"w-5 h-5"})}),e.jsxs(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group",children:[e.jsx(Be,{className:"w-5 h-5"}),j>0&&e.jsx(f.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-gold-500 rounded-full text-xs font-bold text-white flex items-center justify-center shadow-glow-sm",children:j})]}),e.jsxs(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all relative overflow-hidden group",children:[e.jsx(f.div,{initial:!1,animate:{rotate:r?0:180,scale:r?1:0},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(ua,{className:"w-5 h-5"})}),e.jsx(f.div,{initial:!1,animate:{rotate:r?180:0,scale:r?0:1},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(De,{className:"w-5 h-5"})}),e.jsx("div",{className:"opacity-0",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"h-8 w-px bg-graphite-800"}),e.jsxs("div",{className:"hidden lg:flex items-center gap-6 pl-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"Saldo Total"}),e.jsx("p",{className:"text-sm font-bold text-white",children:"R$ 2.847.920,00"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"Varia√ß√£o"}),e.jsx("p",{className:"text-sm font-bold text-emerald-400",children:"+12.5%"})]})]})]})]}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(f.h1,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},className:"text-2xl font-bold text-white font-display",children:"Dashboard Financeiro"}),e.jsx(f.p,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"text-sm text-graphite-400 mt-1",children:"Vis√£o geral ‚Ä¢ Atualizado agora h√° pouco"})]}),e.jsx(f.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"flex items-center gap-2 bg-graphite-900 rounded-xl p-1",children:["Dia","Semana","M√™s","Ano"].map(w=>e.jsx("button",{onClick:()=>t&&t(w),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l===w?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-800"}`,children:w},w))})]})})]}),e.jsx(Ya,{open:g,onClose:()=>S(!1),contextRules:o})]})}const Wa={green:{bg:"from-emerald-500/20 to-emerald-600/10",icon:"bg-emerald-500/20 text-emerald-400",text:"text-emerald-400",border:"border-emerald-500/20"},red:{bg:"from-red-500/20 to-red-600/10",icon:"bg-red-500/20 text-red-400",text:"text-red-400",border:"border-red-500/20"},gold:{bg:"from-gold-500/20 to-gold-600/10",icon:"bg-gold-500/20 text-gold-400",text:"text-gold-400",border:"border-gold-500/20"},blue:{bg:"from-blue-500/20 to-blue-600/10",icon:"bg-blue-500/20 text-blue-400",text:"text-blue-400",border:"border-blue-500/20"}},Za={TrendingUp:U,TrendingDown:pe,Wallet:Le,Target:Ge};function ie({title:a,value:r,change:o,icon:l,trend:t="up",color:i="gold",delay:m=0,progress:c,sparklineData:b}){const u=Wa[i],j=t==="up",y=Za[l]||U;return e.jsxs(f.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:m,duration:.5,ease:"easeOut"},whileHover:{y:-4,scale:1.02},className:"group relative",children:[e.jsx(f.div,{className:`absolute inset-0 bg-gradient-to-br ${u.bg} rounded-3xl blur-xl opacity-0 group-hover:opacity-60 transition-opacity duration-500`}),e.jsxs("div",{className:"relative neomorphic neomorphic-hover rounded-3xl p-6 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-graphite-400 font-medium mb-2",children:a}),e.jsx(f.h3,{initial:{scale:.9},animate:{scale:1},transition:{delay:m+.2},className:"text-3xl font-bold text-white font-display",children:r})]}),e.jsx(f.div,{whileHover:{rotate:15,scale:1.1},className:`p-3 rounded-2xl bg-gradient-to-br ${u.bg} border ${u.border}`,children:e.jsx(y,{className:"w-6 h-6 text-current",style:{color:u.icon.split(" ")[1].replace("text-","")}})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs(f.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:m+.3},className:`flex items-center gap-1 px-3 py-1.5 rounded-lg ${j?"bg-emerald-500/10":"bg-red-500/10"}`,children:[j?e.jsx(Je,{className:"w-4 h-4 text-emerald-400"}):e.jsx(ha,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:`text-sm font-semibold ${j?"text-emerald-400":"text-red-400"}`,children:[o,"%"]})]}),e.jsx("span",{className:"text-sm text-graphite-400",children:"vs m√™s anterior"})]}),b&&e.jsx("div",{className:"flex items-end gap-1 h-12 mt-4",children:b.map((g,S)=>{const R=Math.max(...b),w=g/R*100;return e.jsx(f.div,{initial:{height:0},animate:{height:`${w}%`},transition:{delay:m+.5+S*.02,duration:.3},className:`flex-1 bg-gradient-to-t ${u.bg} rounded-sm opacity-70 hover:opacity-100 transition-opacity`},S)})}),c!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-graphite-400 mb-2",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{className:u.text,children:[c,"%"]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(f.div,{initial:{width:0},animate:{width:`${c}%`},transition:{delay:m+.7,duration:.8,ease:"easeOut"},className:`h-full bg-gradient-to-r ${u.bg} relative overflow-hidden`,children:e.jsx(f.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{repeat:1/0,duration:1.5,ease:"linear"}})})})]})]})]})}const Qa=({active:a,payload:r,label:o})=>a&&r&&r.length?e.jsxs(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-charcoal-900/95 backdrop-blur-xl border border-graphite-800 rounded-2xl p-4 shadow-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-white mb-3",children:o}),r.map((l,t)=>e.jsxs("div",{className:"flex items-center justify-between gap-6 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color}}),e.jsx("span",{className:"text-xs text-graphite-400",children:l.name})]}),e.jsx("span",{className:"text-sm font-bold text-white",children:l.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]},t))]}):null;function Oe({period:a="Ano",cnpj:r="26888098000159",selectedMonth:o}){const[l,t]=d.useState([{month:"Jan",receita:0,despesa:0,saldo:0},{month:"Fev",receita:0,despesa:0,saldo:0},{month:"Mar",receita:0,despesa:0,saldo:0},{month:"Abr",receita:0,despesa:0,saldo:0},{month:"Mai",receita:0,despesa:0,saldo:0},{month:"Jun",receita:0,despesa:0,saldo:0},{month:"Jul",receita:0,despesa:0,saldo:0},{month:"Ago",receita:0,despesa:0,saldo:0},{month:"Set",receita:0,despesa:0,saldo:0},{month:"Out",receita:0,despesa:0,saldo:0},{month:"Nov",receita:0,despesa:0,saldo:0},{month:"Dez",receita:0,despesa:0,saldo:0}]);d.useEffect(()=>{i()},[a,r,o]);const i=async()=>{try{const m=await T.getDRE(r);if(!m||m.length===0)return;const c=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],b={},[u]=o?o.split("-").map(Number):[new Date().getFullYear()],j=u;c.forEach(g=>{b[g]={month:g,receita:0,despesa:0,saldo:0}}),m.forEach(g=>{const S=new Date(g.data);if(S.getFullYear()!==j)return;const R=S.getMonth(),w=c[R];g.natureza==="receita"?b[w].receita+=g.valor:g.natureza==="despesa"&&(b[w].despesa+=Math.abs(g.valor))}),Object.values(b).forEach(g=>{g.saldo=g.receita-g.despesa});const y=c.map(g=>b[g]);t(y)}catch(m){console.error("Erro ao carregar dados de fluxo de caixa:",m)}};return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Receitas vs Despesas (2024)"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Receita"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Despesa"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Saldo"})]})]})]}),e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"h-80",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(oe,{data:a==="Ano"?l:a==="M√™s"?l.slice(-4):a==="Semana"?l.slice(-2):l.slice(-1),margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorDespesa",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorSaldo",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ff7a00",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#ff7a00",stopOpacity:0})]})]}),e.jsx(ae,{strokeDasharray:"3 3",stroke:"#2a2a2a",opacity:.3}),e.jsx(se,{dataKey:"month",stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1}),e.jsx(te,{stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1,tickFormatter:m=>m>=1e6?`R$ ${(m/1e6).toFixed(1)}M`:m>=1e3?`R$ ${(m/1e3).toFixed(0)}k`:`R$ ${m}`}),e.jsx(X,{content:e.jsx(Qa,{}),cursor:{stroke:"#ff7a00",strokeWidth:1}}),e.jsx(_,{type:"monotone",dataKey:"receita",name:"Receita",stroke:"#10b981",strokeWidth:2,fill:"url(#colorReceita)",animationDuration:1500}),e.jsx(_,{type:"monotone",dataKey:"despesa",name:"Despesa",stroke:"#ef4444",strokeWidth:2,fill:"url(#colorDespesa)",animationDuration:1500}),e.jsx(_,{type:"monotone",dataKey:"saldo",name:"Saldo",stroke:"#ff7a00",strokeWidth:3,fill:"url(#colorSaldo)",animationDuration:1500})]})})}),e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8},className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-graphite-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Receita"}),e.jsx("p",{className:"text-lg font-bold text-emerald-400",children:"R$ 8.490.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Despesa"}),e.jsx("p",{className:"text-lg font-bold text-red-400",children:"R$ 4.780.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Saldo L√≠quido"}),e.jsx("p",{className:"text-lg font-bold text-gold-400",children:"R$ 3.710.000"})]})]})]})}function es(){const[a,r]=d.useState(!1),[o,l]=d.useState(!0);return e.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"neomorphic rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display mb-1",children:"Cart√£o Corporativo"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Limite e saldo dispon√≠vel"})]}),e.jsxs(f.div,{animate:{rotateY:a?180:0},transition:{duration:.6,type:"spring"},className:"relative preserve-3d cursor-pointer",onClick:()=>r(!a),style:{transformStyle:"preserve-3d"},children:[e.jsx(f.div,{className:"backface-hidden relative",style:{backfaceVisibility:"hidden"},children:e.jsxs("div",{className:"bg-gradient-to-br from-gold-500 via-gold-600 to-gold-700 rounded-2xl p-8 shadow-2xl shadow-gold-500/20 relative overflow-hidden group",children:[e.jsx(f.div,{className:"absolute inset-0 opacity-20",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,ease:"linear"},style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),e.jsx(f.div,{className:"absolute -inset-1 bg-gradient-to-r from-gold-400 to-gold-600 rounded-3xl blur-xl opacity-0 group-hover:opacity-50 transition-opacity duration-500",style:{zIndex:-1}}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 font-medium mb-1",children:"Conta Empresarial"}),e.jsx(f.p,{className:"text-2xl font-bold text-white font-display",animate:{opacity:o?1:0},children:o?"R$ 2.847.920,00":"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})]}),e.jsx(f.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:t=>{t.stopPropagation(),l(!o)},className:"p-2 rounded-xl bg-white/10 backdrop-blur-sm hover:bg-white/20 transition-colors",children:o?e.jsx(ga,{className:"w-5 h-5 text-white"}):e.jsx(fa,{className:"w-5 h-5 text-white"})})]}),e.jsxs(f.div,{whileHover:{scale:1.05,rotate:5},className:"w-12 h-10 rounded-lg bg-gradient-to-br from-yellow-200 to-yellow-400 mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-1 border border-yellow-600/30 rounded-md"}),e.jsx("div",{className:"absolute inset-2 border border-yellow-600/20 rounded-sm"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-white text-lg font-mono tracking-wider",children:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 8492"}),e.jsx(f.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:t=>t.stopPropagation(),className:"p-1.5 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(ba,{className:"w-4 h-4 text-white"})})]})}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Titular"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"BPO FINANCIAL LTDA"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Validade"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"12/28"})]}),e.jsxs(f.div,{whileHover:{scale:1.1},className:"flex flex-col items-end",children:[e.jsx(ja,{className:"w-8 h-8 text-white/90"}),e.jsx("span",{className:"text-[10px] text-white/70 font-bold mt-1",children:"CORPORATE"})]})]})]})}),e.jsx(f.div,{className:"absolute inset-0 backface-hidden",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:e.jsxs("div",{className:"bg-gradient-to-br from-charcoal-900 to-charcoal-950 rounded-3xl p-6 shadow-2xl h-full",children:[e.jsx("div",{className:"w-full h-12 bg-gradient-to-r from-graphite-900 to-graphite-800 mt-4 mb-6 rounded-lg"}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"CVV"}),e.jsx("p",{className:"text-lg font-mono font-bold text-white",children:"‚Ä¢‚Ä¢‚Ä¢"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"C√≥digo de Seguran√ßa"}),e.jsx("p",{className:"text-xs text-white/50",children:"N√£o compartilhe"})]})]})}),e.jsxs("div",{className:"space-y-3 text-xs text-white/60",children:[e.jsx("p",{children:"Este cart√£o √© de uso exclusivo corporativo"}),e.jsx("p",{children:"Em caso de perda, bloqueie imediatamente"}),e.jsx("p",{className:"text-gold-400 font-semibold",children:"Suporte: 0800 XXX XXXX"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-white/50",children:"Mastercard¬Æ Corporate"}),e.jsx("span",{className:"text-xs text-white/50",children:"ID: #BPO-2024-8492"})]})]})})]}),e.jsx(f.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-center text-xs text-graphite-400 mt-3",children:"Clique no cart√£o para visualizar o verso"})]})}const as={success:{label:"Conclu√≠do",color:"emerald",bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20"},pending:{label:"Pendente",color:"gold",bg:"bg-gold-500/10",text:"text-gold-400",border:"border-gold-500/20"},failed:{label:"Falhou",color:"red",bg:"bg-red-500/10",text:"text-red-400",border:"border-red-500/20"}};function sa(){const[a,r]=d.useState([]),[o,l]=d.useState(""),[t,i]=d.useState([]),[m,c]=d.useState(!0),[b,u]=d.useState(""),[j,y]=d.useState("all"),[g,S]=d.useState(""),[R,w]=d.useState(""),[O,v]=d.useState(""),[C,n]=d.useState("");d.useEffect(()=>{(async()=>{try{const p=await T.getCompanies();r(p||[]);const A=(p||[]).find(I=>String(I.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,P=(p||[]).find(I=>String(I.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,z=A||P||p&&p[0]?.cnpj||"";l(z)}catch{u("Falha ao carregar empresas")}})()},[]),d.useEffect(()=>{o&&(c(!0),u(""),(async()=>{try{const p=await T.getDFC(o);i(Array.isArray(p)?p:[])}catch{u("Falha ao carregar extrato")}finally{c(!1)}})())},[o]);const D=d.useMemo(()=>{let p=[...t];return p.sort((A,P)=>{const z=new Date(A.data||"1900-01-01").getTime();return new Date(P.data||"1900-01-01").getTime()-z}),C&&(p=p.filter(A=>(A.descricao||"").toLowerCase().includes(C.toLowerCase()))),j==="month"&&g?p=p.filter(A=>A.data?.startsWith(g)):j==="range"&&R&&O&&(p=p.filter(A=>{const P=A.data||"";return P>=R&&P<=O})),p},[t,C,j,g,R,O]),k=d.useMemo(()=>{const p=new Set;return t.forEach(A=>{A.data&&p.add(A.data.slice(0,7))}),Array.from(p).sort().reverse()},[t]);return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-graphite-800/30",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display",children:"Transa√ß√µes Recentes"}),e.jsx("p",{className:"text-sm text-graphite-400 mt-1",children:"√öltimas movimenta√ß√µes financeiras"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-graphite-400"}),e.jsx("input",{type:"text",placeholder:"Buscar...",value:C,onChange:p=>n(p.target.value),className:"pl-9 pr-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white placeholder-graphite-500 focus:outline-none focus:border-gold-500 transition-all w-48"})]}),e.jsxs("select",{value:j,onChange:p=>y(p.target.value),className:"px-4 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all",children:[e.jsx("option",{value:"all",children:"Todos os per√≠odos"}),e.jsx("option",{value:"month",children:"Por m√™s"}),e.jsx("option",{value:"range",children:"Faixa de datas"})]}),j==="month"&&e.jsxs("select",{value:g,onChange:p=>S(p.target.value),className:"px-4 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all",children:[e.jsx("option",{value:"",children:"Selecione o m√™s"}),k.map(p=>e.jsx("option",{value:p,children:new Date(p+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})},p))]}),j==="range"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:R,onChange:p=>w(p.target.value),className:"px-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all"}),e.jsx("span",{className:"text-graphite-400 text-sm",children:"at√©"}),e.jsx("input",{type:"date",value:O,onChange:p=>v(p.target.value),className:"px-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-graphite-800",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Descri√ß√£o"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"A√ß√µes"})]})}),e.jsxs("tbody",{children:[(m?[]:D).map((p,A)=>{const P=(p.entrada||0)-(p.saida||0),z=P>=0?"income":"expense",I=as[z==="income"?"success":"pending"];return e.jsxs(f.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+A*.05},whileHover:{backgroundColor:"rgba(255, 122, 0, 0.03)"},className:"border-b border-graphite-800/50 last:border-0 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f.div,{whileHover:{scale:1.1,rotate:5},className:"w-10 h-10 rounded-xl bg-gradient-to-br from-graphite-800 to-graphite-900 flex items-center justify-center text-xl group-hover:shadow-lg transition-shadow",children:"üí∏"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:p.descricao||"Lan√ßamento"}),e.jsx("p",{className:"text-xs text-graphite-400",children:z==="income"?"Entrada":"Sa√≠da"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-graphite-300",children:p.data||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded-lg ${z==="income"?"bg-emerald-500/10":"bg-red-500/10"}`,children:z==="income"?e.jsx(Je,{className:"w-4 h-4 text-emerald-400"}):e.jsx(va,{className:"w-4 h-4 text-red-400"})}),e.jsxs("span",{className:`text-sm font-bold ${z==="income"?"text-emerald-400":"text-red-400"}`,children:[P>0?"+":"",Number(P).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(f.span,{whileHover:{scale:1.05},className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold border ${I.bg} ${I.text} ${I.border}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${I.text.replace("text-","bg-")} mr-2`}),Number(p.saldo||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(f.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 rounded-lg hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all",children:e.jsx(Na,{className:"w-4 h-4"})})})]},p.id||A)}),!m&&t.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-graphite-400",children:["Nenhum lan√ßamento encontrado para ",o||"empresa"]})})]})]})}),e.jsxs("div",{className:"p-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-graphite-400",children:[m?"Carregando...":`Mostrando ${t.length} lan√ßamentos`," ",o&&e.jsxs("span",{className:"text-white font-semibold",children:["‚Ä¢ ",o]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:o,onChange:p=>l(p.target.value),className:"px-4 py-2 bg-graphite-800 text-white rounded-xl text-sm",children:[e.jsx("option",{value:"",children:"Selecione CNPJ"}),a.map(p=>e.jsxs("option",{value:p.cnpj,children:[p.cliente_nome," ‚Ä¢ ",p.cnpj]},p.cnpj))]})})]})]})}function ss({cnpj:a="26888098000159",selectedMonth:r}){const[o,l]=d.useState([{name:"Servi√ßos BPO",value:58e4,color:"#ff7a00",percentage:45},{name:"Consultoria",value:32e4,color:"#10b981",percentage:25},{name:"Software",value:25e4,color:"#3b82f6",percentage:20},{name:"Outros",value:13e4,color:"#8b5cf6",percentage:10}]),[t,i]=d.useState(73),[m,c]=d.useState(8.2);d.useEffect(()=>{b()},[a,r]);const b=async()=>{try{const j=await T.getDRE(a);if(!j||j.length===0)return;const y={},[g]=r?r.split("-").map(Number):[new Date().getFullYear()],S=g;j.forEach(v=>{if(new Date(v.data).getFullYear()===S&&v.natureza==="receita"&&v.valor>0){const n=v.conta.split("-")[0].substring(0,1),D=n==="3"?"Servi√ßos BPO":n==="4"?"Consultoria":n==="5"?"Software":"Outros";y[D]||(y[D]=0),y[D]+=v.valor}});const R=Object.values(y).reduce((v,C)=>v+C,0),w=["#ff7a00","#10b981","#3b82f6","#8b5cf6"],O=Object.entries(y).map(([v,C],n)=>({name:v,value:C,color:w[n]||"#8b5cf6",percentage:Math.round(C/R*100)})).sort((v,C)=>C.value-v.value);if(O.length>0){l(O);const C=Math.round(R/8e5*100);i(Math.min(C,100))}}catch(j){console.error("Erro ao carregar dados de receita:",j)}},u=o.reduce((j,y)=>j+y.value,0);return e.jsxs(f.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.3},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Distribui√ß√£o de Receita"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Por categoria de servi√ßo"})]}),e.jsxs("div",{className:"relative flex items-center justify-center mb-8",children:[e.jsxs("svg",{width:"280",height:"180",viewBox:"0 0 280 180",className:"transform -rotate-0",children:[e.jsx("path",{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"#2a2a2a",strokeWidth:"24",strokeLinecap:"round"}),e.jsx(f.path,{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"24",strokeLinecap:"round",strokeDasharray:"314",initial:{strokeDashoffset:314},animate:{strokeDashoffset:314-314*t/100},transition:{duration:2,ease:"easeOut"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981"}),e.jsx("stop",{offset:"50%",stopColor:"#ff7a00"}),e.jsx("stop",{offset:"100%",stopColor:"#ef4444"})]})})]}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/4 text-center",children:e.jsxs(f.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},children:[e.jsxs("p",{className:"text-4xl font-bold text-white font-display mb-1",children:[t,"%"]}),e.jsx("p",{className:"text-xs text-graphite-400",children:"Meta Atingida"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-2",children:[e.jsx(U,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("span",{className:"text-sm font-semibold text-emerald-400",children:["+",m.toFixed(1),"%"]})]})]})})]}),e.jsx("div",{className:"space-y-3",children:o.map((j,y)=>e.jsxs(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+y*.1},className:"group/item",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f.div,{whileHover:{scale:1.2},className:"w-3 h-3 rounded-full",style:{backgroundColor:j.color}}),e.jsx("span",{className:"text-sm text-graphite-300 group-hover/item:text-white transition-colors",children:j.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:j.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})}),e.jsxs("span",{className:"text-xs text-graphite-400 ml-2",children:["(",j.percentage,"%)"]})]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(f.div,{initial:{width:0},animate:{width:`${j.percentage}%`},transition:{delay:1+y*.1,duration:.8,ease:"easeOut"},className:"h-full rounded-full relative",style:{backgroundColor:j.color},children:e.jsx(f.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear",delay:1.5+y*.1},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"})})})]},j.name))}),e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},className:"mt-6 pt-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-graphite-400",children:"Total de Receita"}),e.jsx("span",{className:"text-lg font-bold text-gold-400",children:u.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]})]})}function ts(a){return["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][a.getMonth()]}function rs({period:a="Ano",session:r}){const[o,l]=d.useState([]),[t,i]=d.useState(""),[m,c]=d.useState([]),[b,u]=d.useState(!0),[j,y]=d.useState("");d.useEffect(()=>{(async()=>{try{const v=await T.getCompanies();l(v||[]),i("26888098000159")}catch{y("Falha ao carregar empresas")}})()},[]),d.useEffect(()=>{t&&(u(!0),(async()=>{try{const v=await T.getDFC(t);c(Array.isArray(v)?v:[])}finally{u(!1)}})())},[t]);const{receitaTotal:g,despesasTotal:S,lucro:R}=d.useMemo(()=>{const v=m.reduce((C,n)=>(C.receitaTotal+=Number(n.entrada||0),C.despesasTotal+=Number(n.saida||0),C),{receitaTotal:0,despesasTotal:0});return{...v,lucro:v.receitaTotal-v.despesasTotal}},[m]),w=d.useMemo(()=>{const v=new Map;m.forEach(n=>{const D=n.data?new Date(n.data):new Date,k=ts(D),p=v.get(k)||{month:k,receita:0,despesas:0};p.receita+=Number(n.entrada||0),p.despesas+=Number(n.saida||0),v.set(k,p)});const C=Array.from(v.values());return a==="Ano"?C:a==="M√™s"?C.slice(-1):a==="Semana"?C.slice(-1).map(n=>({...n,month:"Semana"})):C.slice(-1).map(n=>({...n,month:"Hoje"}))},[m,a]),O=[{name:"Receita",value:g,delta:0},{name:"Despesas",value:S,delta:0},{name:"Lucro",value:R,delta:0}];return e.jsxs(za,{numItemsSm:1,numItemsMd:2,numItemsLg:3,className:"gap-6",children:[O.map(v=>e.jsxs(Re,{decoration:"top",decorationColor:"orange",className:"rounded-3xl bg-card border border-border shadow-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ie,{children:v.name}),e.jsxs($a,{deltaType:v.delta>=0?"moderateIncrease":"moderateDecrease",children:[v.delta,"%"]})]}),e.jsxs(Fa,{children:["R$ ",Number(v.value).toLocaleString("pt-BR")]}),e.jsx(Ae,{className:"mt-2 text-sm text-muted-foreground",children:b?"Carregando...":`Empresa ${t||""}`})]},v.name)),e.jsxs(Re,{className:"rounded-3xl col-span-1 md:col-span-2 bg-card border border-border shadow-card",children:[e.jsx(Ie,{children:"Evolu√ß√£o Mensal"}),e.jsx(Ae,{className:"text-sm text-muted-foreground",children:"Receita vs Despesas"}),e.jsx("div",{className:"mt-4 h-56",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(be,{data:w,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"barReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#ff7a00",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#ff7a00",stopOpacity:.4})]}),e.jsxs("linearGradient",{id:"barDespesas",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#38bdf8",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#38bdf8",stopOpacity:.4})]}),e.jsx("filter",{id:"barShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3","flood-color":"#000","flood-opacity":"0.35"})})]}),e.jsx(ae,{stroke:"rgba(200,200,200,0.12)",vertical:!1}),e.jsx(se,{dataKey:"month",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(te,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},tickFormatter:v=>`R$ ${Number(v).toLocaleString("pt-BR")}`}),e.jsx(X,{contentStyle:{background:"#11161C",border:"1px solid #1B232C"},formatter:v=>`R$ ${Number(v).toLocaleString("pt-BR")}`}),e.jsx(ue,{}),e.jsx(H,{dataKey:"receita",name:"Receita",fill:"url(#barReceita)",radius:[8,8,0,0],filter:"url(#barShadow)"}),e.jsx(H,{dataKey:"despesas",name:"Despesas",fill:"url(#barDespesas)",radius:[8,8,0,0],filter:"url(#barShadow)"})]})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:t,onChange:v=>i(v.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),o.map(v=>e.jsxs("option",{value:v.cnpj,children:[v.cliente_nome," ‚Ä¢ ",v.cnpj]},v.cnpj))]})]})]})]})}function os(){const[a,r]=d.useState([]),[o,l]=d.useState(""),[t,i]=d.useState(0),[m,c]=d.useState(0),[b,u]=d.useState(!0),[j,y]=d.useState("");return d.useEffect(()=>{(async()=>{try{const g=await T.getCompanies();r(g||[]);const S=(g||[]).find(O=>String(O.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,R=(g||[]).find(O=>String(O.cliente_nome||"").toLowerCase().includes("volpe")||String(O.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,w=S||R||g&&g[0]?.cnpj||"";l(w)}catch{y("Falha ao carregar empresas")}})()},[]),d.useEffect(()=>{o&&(u(!0),(async()=>{try{const g=await T.getDRE(o);i(Array.isArray(g)?g.length:0);const S=await T.getDFC(o);c(Array.isArray(S)?S.length:0)}catch{y("Falha ao carregar relat√≥rios")}finally{u(!1)}})())},[o]),e.jsx("div",{className:"grid gap-6",children:e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Relat√≥rios Gerenciais"}),j&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:j}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"DRE Consolidada"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b?"Carregando...":`${t} linhas`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b?"Carregando...":`${m} lan√ßamentos`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Receita por Cliente"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b?"Carregando...":`${a.length} clientes`})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:o,onChange:g=>l(g.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),a.map(g=>e.jsxs("option",{value:g.cnpj,children:[g.cliente_nome," ‚Ä¢ ",g.cnpj]},g.cnpj))]})]})]})})}function ns(){const[a,r]=d.useState([]),[o,l]=d.useState(!0),[t,i]=d.useState("");return d.useEffect(()=>{(async()=>{try{const m=await T.getCompanies();r(Array.isArray(m)?m:[])}catch{i("Falha ao carregar clientes")}finally{l(!1)}})()},[]),e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes ‚Ä¢ Dados Reais"}),t&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:t}),e.jsx("div",{className:"mt-4 rounded-2xl border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Cliente"}),e.jsx("th",{className:"text-left p-3",children:"CNPJ"}),e.jsx("th",{className:"text-left p-3",children:"Grupo"})]})}),e.jsxs("tbody",{children:[(o?[]:a).map((m,c)=>e.jsxs("tr",{className:"border-t border-border",children:[e.jsx("td",{className:"p-3",children:m.cliente_nome}),e.jsx("td",{className:"p-3",children:m.cnpj}),e.jsx("td",{className:"p-3",children:m.grupo_empresarial})]},c)),!o&&a.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-3 text-sm text-muted-foreground",colSpan:3,children:"Nenhum cliente encontrado"})})]})]})})]})}function Y(...a){return Va(La(a))}function G({className:a,...r}){return e.jsx("div",{className:Y("bg-card border border-border rounded-3xl shadow-card transition-all duration-300",a),...r})}function J({className:a,...r}){return e.jsx("div",{className:Y("flex items-center justify-between p-4 pb-2",a),...r})}function q({className:a,...r}){return e.jsx("h3",{className:Y("text-sm text-foreground",a),...r})}function K({className:a,...r}){return e.jsx("div",{className:Y("p-4 pt-2",a),...r})}const ve=Sa,Ne=Ea,me=d.forwardRef(({className:a,...r},o)=>e.jsx(qe,{ref:o,className:"inline-flex items-center justify-between gap-2 rounded-lg border border-[#1B232C] bg-[#0a0f14] px-3 py-1.5 text-xs text-gray-300 shadow-sm hover:bg-[#0f141b] focus:outline-none",...r}));me.displayName=qe.displayName;const xe=d.forwardRef(({className:a,children:r,position:o="popper",...l},t)=>e.jsx(ya,{children:e.jsx(Ke,{ref:t,className:"z-50 min-w-[8rem] overflow-hidden rounded-xl border border-[#1B232C] bg-[#0a0f14] p-1 shadow-xl",position:o,...l,children:e.jsx(wa,{className:"p-1",children:r})})}));xe.displayName=Ke.displayName;const ee=d.forwardRef(({className:a,children:r,...o},l)=>e.jsx(He,{ref:l,className:"relative flex w-full cursor-pointer select-none items-center rounded-lg px-3 py-2 text-xs text-gray-300 outline-none data-[highlighted]:bg-[#0f141b]",...o,children:e.jsx(Ca,{children:r})}));ee.displayName=He.displayName;const Se=Da,je=d.forwardRef(({className:a,...r},o)=>e.jsx(Ue,{ref:o,className:Y("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r}));je.displayName=Ue.displayName;const L=d.forwardRef(({className:a,...r},o)=>e.jsx(Ye,{ref:o,className:Y("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r}));L.displayName=Ye.displayName;const B=d.forwardRef(({className:a,...r},o)=>e.jsx(Xe,{ref:o,className:Y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r}));B.displayName=Xe.displayName;const ke=a=>String(a).padStart(2,"0"),Pe=a=>{const r=new Set;if(a.forEach(t=>{if(!t)return;const i=t.slice(0,7);/^\d{4}-\d{2}$/.test(i)&&r.add(i)}),r.size===0){const t=new Date().getFullYear().toString();return Array.from({length:12},(i,m)=>`${t}-${ke(m+1)}`)}const o=Array.from(new Set(Array.from(r).map(t=>t.split("-")[0]))).sort(),l=[];return o.forEach(t=>{for(let i=1;i<=12;i+=1)l.push(`${t}-${ke(i)}`)}),l};function is({className:a,selectedMonth:r,selectedCompany:o}){const[l,t]=d.useState([]),[i,m]=d.useState(o||"26888098000159"),[c,b]=d.useState(r||"all"),[u,j]=d.useState([]),[y,g]=d.useState([]),[S,R]=d.useState(!1);d.useEffect(()=>{r&&r!==c&&b(r)},[r]),d.useEffect(()=>{o&&o!==i&&m(o)},[o]),d.useEffect(()=>{w()},[]),d.useEffect(()=>{i&&O(i)},[i]);const w=async()=>{try{const x=(await T.getCompanies()).filter(h=>h.cliente_nome?.toLowerCase().includes("volpe")||String(h.cnpj||"").startsWith("26888098")).map(h=>({...h,cnpj:h.cnpj?h.cnpj.replace(/^0+/,""):h.cnpj})).sort((h,N)=>{const M=String(h.cnpj||"")==="26888098000159"?-1:1,$=String(N.cnpj||"")==="26888098000159"?-1:1;return M-$});t(x)}catch(s){console.error("Erro ao carregar empresas:",s)}},O=async s=>{R(!0);try{console.log("üîç Buscando dados para CNPJ:",s);const[x,h]=await Promise.all([T.getDRE(s),T.getDFC(s)]);console.log("‚úÖ DRE recebido:",x?.length||0,"registros"),console.log("‚úÖ DFC recebido:",h?.length||0,"registros"),x&&x.length>0&&console.log("üìù Amostra DRE:",x[0]),h&&h.length>0&&console.log("üìù Amostra DFC:",h[0]);const N=x&&x.length>0?x:v(),M=h&&h.length>0?h:C();j(N),g(M)}catch(x){console.error("‚ùå Erro ao carregar dados:",x),j(v()),g(C())}finally{R(!1)}},v=()=>{const s=["2024-09","2024-10","2024-11","2025-01","2025-02","2025-03","2025-04","2025-05","2025-06","2025-07","2025-08","2025-09","2025-10","2025-11"],x=[{conta:"Receita de Servi√ßos BPO",natureza:"receita",baseValue:85e4},{conta:"Receita de Consultoria",natureza:"receita",baseValue:32e4},{conta:"Outras Receitas Operacionais",natureza:"receita",baseValue:45e3},{conta:"Sal√°rios e Encargos",natureza:"despesa",baseValue:-52e4},{conta:"Servi√ßos de Terceiros",natureza:"despesa",baseValue:-18e4},{conta:"Despesas Administrativas",natureza:"despesa",baseValue:-95e3},{conta:"Despesas com TI e Software",natureza:"despesa",baseValue:-78e3},{conta:"Aluguel e Condom√≠nio",natureza:"despesa",baseValue:-42e3},{conta:"Despesas com Viagens",natureza:"despesa",baseValue:-28e3},{conta:"Marketing e Publicidade",natureza:"despesa",baseValue:-35e3},{conta:"Treinamento e Capacita√ß√£o",natureza:"despesa",baseValue:-22e3},{conta:"Despesas Financeiras",natureza:"despesa",baseValue:-18e3}],h=[];return s.forEach(N=>{x.forEach(M=>{const $=.85+Math.random()*.3;h.push({data:`${N}-15`,conta:M.conta,natureza:M.natureza,valor:Math.round(M.baseValue*$)})})}),h},C=()=>{const s=["2024-09","2024-10","2024-11","2025-01","2025-02","2025-03","2025-04","2025-05","2025-06","2025-07","2025-08","2025-09","2025-10","2025-11"],x=[{descricao:"Recebimento de Clientes",entrada:98e4,saida:0},{descricao:"Pagamento de Fornecedores",entrada:0,saida:42e4},{descricao:"Pagamento de Sal√°rios",entrada:0,saida:52e4},{descricao:"Pagamento de Impostos",entrada:0,saida:125e3},{descricao:"Pagamento de Aluguel",entrada:0,saida:42e3},{descricao:"Investimentos em TI",entrada:0,saida:85e3},{descricao:"Empr√©stimos Banc√°rios",entrada:15e4,saida:0},{descricao:"Amortiza√ß√£o de D√≠vidas",entrada:0,saida:65e3}],h=[];return s.forEach(N=>{x.forEach(M=>{const $=.9+Math.random()*.2;h.push({data:`${N}-15`,descricao:M.descricao,entrada:Math.round(M.entrada*$),saida:Math.round(M.saida*$)})})}),h},n=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),D=l.find(s=>s.cnpj===i)?.cliente_nome||"Empresa",k=Pe(u.map(s=>s.data)),p=Pe(y.map(s=>s.data));console.log("üìä DRE Data:",u.length,"registros"),console.log("üìä DFC Data:",y.length,"registros"),console.log("üìÖ DRE Months:",k),console.log("üìÖ DFC Months:",p);const A=u.reduce((s,x)=>{const h=x.natureza||"Outros";return s[h]=(s[h]||0)+Number(x.valor||0),s},{}),P=(()=>{const s={};return u.forEach(x=>{const h=x.data?x.data.slice(0,7):k[0],N=x.natureza||"Outros",M=Number(x.valor||0);s[N]||(s[N]={}),s[N][h]=(s[N][h]||0)+M}),k.map(x=>{const h={month:x};return Object.entries(s).forEach(([N,M])=>{h[N]=M[x]||0}),h})})(),z=(()=>{const s={};return y.forEach(x=>{const h=x.data?x.data.slice(0,7):p[0];s[h]||(s[h]={entradas:0,saidas:0}),s[h].entradas+=Number(x.entrada||0),s[h].saidas+=Number(x.saida||0)}),p.map(x=>{const h=s[x]?.entradas||0,N=s[x]?.saidas||0;return{month:x,entradas:h,saidas:N,saldo:h-N}})})(),I=z.reduce((s,x)=>(s.entradas+=x.entradas,s.saidas+=x.saidas,s.saldo+=x.saldo,s),{entradas:0,saidas:0,saldo:0}),F=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],W=(()=>{if(!u||u.length===0)return[];const s={};return u.forEach(x=>{const h=x.data?x.data.slice(0,7):"",N=x.conta||"Outros",M=x.natureza||"Outros",$=Number(x.valor||0);s[N]||(s[N]={conta:N,natureza:M,total:0},k.forEach(Q=>{s[N][Q]=0})),h&&(s[N][h]===void 0&&(s[N][h]=0),s[N][h]+=$),s[N].total+=$}),Object.values(s).filter(x=>Math.abs(x.total)>0).sort((x,h)=>Math.abs(h.total)-Math.abs(x.total)).slice(0,50)})(),E=(()=>{if(!y||y.length===0)return[];const s={};return y.forEach(x=>{const h=x.data?x.data.slice(0,7):"",N=x.descricao||"Outros",M=Number(x.entrada||0),$=Number(x.saida||0);s[N]||(s[N]={categoria:N,totalEntradas:0,totalSaidas:0,saldo:0},p.forEach(Q=>{s[N][`${Q}_entrada`]=0,s[N][`${Q}_saida`]=0})),h&&(s[N][`${h}_entrada`]===void 0&&(s[N][`${h}_entrada`]=0),s[N][`${h}_saida`]===void 0&&(s[N][`${h}_saida`]=0),s[N][`${h}_entrada`]+=M,s[N][`${h}_saida`]+=$),s[N].totalEntradas+=M,s[N].totalSaidas+=$,s[N].saldo+=M-$}),Object.values(s).filter(x=>Math.abs(x.saldo)>0||x.totalEntradas>0||x.totalSaidas>0).sort((x,h)=>Math.abs(h.saldo)-Math.abs(x.saldo)).slice(0,30)})(),Z=u.slice(0,100).map(s=>({data:s.data,tipo:"DRE",conta:s.conta,natureza:s.natureza,valor:s.valor}));return e.jsxs("div",{className:a,children:[e.jsx("div",{className:"mb-6",children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsx(q,{className:"text-lg",children:"An√°lises - Sele√ß√£o de Empresa"})}),e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Empresa:"}),e.jsxs(ve,{value:i,onValueChange:m,children:[e.jsx(me,{className:"w-[300px]",children:e.jsx(Ne,{placeholder:"Selecione uma empresa"})}),e.jsx(xe,{children:l.map(s=>e.jsxs(ee,{value:s.cnpj,children:[s.cliente_nome," (",s.cnpj,")"]},s.cnpj))})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Visualizando: ",D]})]})})]})}),S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Carregando dados..."})}):e.jsxs(Se,{defaultValue:"dre",className:"w-full",children:[e.jsxs(je,{className:"grid w-full grid-cols-4",children:[e.jsx(L,{value:"dre",children:"DRE"}),e.jsx(L,{value:"dfc",children:"DFC"}),e.jsx(L,{value:"lancamentos",children:"Lan√ßamentos"}),e.jsx(L,{value:"graficos",children:"Gr√°ficos"})]}),e.jsx(B,{value:"dre",className:"space-y-4",children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"DRE - Demonstra√ß√£o de Resultados por M√™s"}),e.jsxs(ve,{value:c,onValueChange:b,children:[e.jsx(me,{className:"w-[200px]",children:e.jsx(Ne,{placeholder:"Selecione o m√™s"})}),e.jsxs(xe,{children:[e.jsx(ee,{value:"all",children:"Todos os meses"}),k.slice().reverse().map(s=>e.jsx(ee,{value:s,children:new Date(s+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})},s))]})]})]})}),e.jsx(K,{children:u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left sticky left-0 bg-muted z-10",children:"Conta"}),e.jsx("th",{className:"border p-2 text-left",children:"Natureza"}),(c==="all"?k:[c]).map(s=>e.jsx("th",{className:"border p-2 text-right whitespace-nowrap",children:c==="all"?s.slice(5):new Date(s+"-01").toLocaleDateString("pt-BR",{month:"short",year:"numeric"})},s)),c==="all"&&e.jsx("th",{className:"border p-2 text-right font-bold bg-blue-50",children:"Total"})]})}),e.jsx("tbody",{children:W.length>0?W.map((s,x)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2 text-left sticky left-0 bg-background font-medium text-xs",children:s.conta}),e.jsx("td",{className:"border p-2 text-left",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.natureza==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.natureza})}),(c==="all"?k:[c]).map(h=>{const N=s[h]||0;return e.jsx("td",{className:"border p-2 text-right text-xs",children:Math.abs(N)>.01?n(N):"-"},h)}),c==="all"&&e.jsx("td",{className:"border p-2 text-right font-bold bg-blue-50 text-xs",children:n(s.total)})]},x)):e.jsx("tr",{children:e.jsx("td",{colSpan:k.length+3,className:"border p-4 text-center text-muted-foreground",children:"Nenhum dado DRE dispon√≠vel"})})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted font-bold",children:[e.jsx("td",{className:"border p-2",colSpan:2,children:"TOTAIS"}),(c==="all"?k:[c]).map(s=>{const x=W.reduce((h,N)=>h+(N[s]||0),0);return e.jsx("td",{className:"border p-2 text-right",children:n(x)},s)}),c==="all"&&e.jsx("td",{className:"border p-2 text-right bg-blue-100",children:n(W.reduce((s,x)=>s+x.total,0))})]})})]})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DRE dispon√≠vel para esta empresa"})})]})}),e.jsx(B,{value:"dfc",className:"space-y-4",children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"DFC - Demonstra√ß√£o de Fluxo de Caixa por M√™s"}),e.jsxs(ve,{value:c,onValueChange:b,children:[e.jsx(me,{className:"w-[200px]",children:e.jsx(Ne,{placeholder:"Selecione o m√™s"})}),e.jsxs(xe,{children:[e.jsx(ee,{value:"all",children:"Todos os meses"}),p.slice().reverse().map(s=>e.jsx(ee,{value:s,children:new Date(s+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})},s))]})]})]})}),e.jsx(K,{children:y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left sticky left-0 bg-muted z-10",children:"Categoria"}),(c==="all"?p:[c]).map(s=>e.jsx("th",{className:"border p-2 text-center",colSpan:2,children:c==="all"?s.slice(5):new Date(s+"-01").toLocaleDateString("pt-BR",{month:"short",year:"numeric"})},s)),c==="all"&&e.jsx("th",{className:"border p-2 text-center bg-blue-50",colSpan:3,children:"Totais"})]}),e.jsxs("tr",{className:"bg-muted/50 text-xs",children:[e.jsx("th",{className:"border p-2"}),(c==="all"?p:[c]).map(s=>e.jsxs(le.Fragment,{children:[e.jsx("th",{className:"border p-2 text-right text-green-700",children:"Entrada"}),e.jsx("th",{className:"border p-2 text-right text-red-700",children:"Sa√≠da"})]},s)),c==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"border p-2 text-right text-green-700 bg-green-50",children:"Entradas"}),e.jsx("th",{className:"border p-2 text-right text-red-700 bg-red-50",children:"Sa√≠das"}),e.jsx("th",{className:"border p-2 text-right text-blue-700 bg-blue-50",children:"Saldo"})]})]})]}),e.jsx("tbody",{children:E.length>0?E.map((s,x)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2 text-left sticky left-0 bg-background font-medium text-xs",children:s.categoria}),(c==="all"?p:[c]).map(h=>{const N=s[`${h}_entrada`]||0,M=s[`${h}_saida`]||0;return e.jsxs(le.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-600 text-xs",children:Math.abs(N)>.01?n(N):"-"}),e.jsx("td",{className:"border p-2 text-right text-red-600 text-xs",children:Math.abs(M)>.01?n(M):"-"})]},h)}),c==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-700 bg-green-50 font-semibold text-xs",children:n(s.totalEntradas)}),e.jsx("td",{className:"border p-2 text-right text-red-700 bg-red-50 font-semibold text-xs",children:n(s.totalSaidas)}),e.jsx("td",{className:"border p-2 text-right text-blue-700 bg-blue-50 font-bold text-xs",children:n(s.saldo)})]})]},x)):e.jsx("tr",{children:e.jsx("td",{colSpan:(c==="all"?p.length:1)*2+(c==="all"?4:1),className:"border p-4 text-center text-muted-foreground",children:"Nenhum dado DFC dispon√≠vel"})})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted font-bold",children:[e.jsx("td",{className:"border p-2",children:"TOTAIS"}),(c==="all"?p:[c]).map(s=>{const x=E.reduce((N,M)=>N+(M[`${s}_entrada`]||0),0),h=E.reduce((N,M)=>N+(M[`${s}_saida`]||0),0);return e.jsxs(le.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-700",children:n(x)}),e.jsx("td",{className:"border p-2 text-right text-red-700",children:n(h)})]},s)}),c==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right bg-green-100 text-green-900",children:n(E.reduce((s,x)=>s+x.totalEntradas,0))}),e.jsx("td",{className:"border p-2 text-right bg-red-100 text-red-900",children:n(E.reduce((s,x)=>s+x.totalSaidas,0))}),e.jsx("td",{className:"border p-2 text-right bg-blue-100 text-blue-900",children:n(E.reduce((s,x)=>s+x.saldo,0))})]})]})})]})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DFC dispon√≠vel para esta empresa"})})]})}),e.jsx(B,{value:"lancamentos",className:"space-y-4",children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsx(q,{children:"Lan√ßamentos Brutos - √öltimos 100 Registros"})}),e.jsx(K,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left",children:"Data"}),e.jsx("th",{className:"border p-2 text-left",children:"Tipo"}),e.jsx("th",{className:"border p-2 text-left",children:"Conta"}),e.jsx("th",{className:"border p-2 text-left",children:"Natureza"}),e.jsx("th",{className:"border p-2 text-right",children:"Valor"})]})}),e.jsx("tbody",{children:Z.map((s,x)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2",children:s.data}),e.jsx("td",{className:"border p-2",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:s.tipo})}),e.jsx("td",{className:"border p-2",children:s.conta}),e.jsx("td",{className:"border p-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.natureza==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.natureza})}),e.jsx("td",{className:"border p-2 text-right font-mono",children:n(s.valor||0)})]},x))})]})})})]})}),e.jsx(B,{value:"graficos",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(G,{children:[e.jsx(J,{children:e.jsx(q,{children:"DRE - Evolu√ß√£o Mensal"})}),e.jsx(K,{children:u.length>0?e.jsx("div",{className:"h-80",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(be,{data:P,children:[e.jsx(ae,{strokeDasharray:"3 3"}),e.jsx(se,{dataKey:"month"}),e.jsx(te,{tickFormatter:s=>`R$ ${(s/1e3).toFixed(0)}k`}),e.jsx(X,{formatter:s=>n(s)}),e.jsx(ue,{}),Object.keys(A).map((s,x)=>e.jsx(H,{dataKey:s,fill:F[x%F.length]},s))]})})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Sem dados"})})]}),e.jsxs(G,{children:[e.jsx(J,{children:e.jsx(q,{children:"DFC - Fluxo de Caixa"})}),e.jsx(K,{children:y.length>0?e.jsx("div",{className:"h-80",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(oe,{data:z,children:[e.jsx(ae,{strokeDasharray:"3 3"}),e.jsx(se,{dataKey:"month"}),e.jsx(te,{tickFormatter:s=>`R$ ${(s/1e3).toFixed(0)}k`}),e.jsx(X,{formatter:s=>n(s)}),e.jsx(ue,{}),e.jsx(_,{type:"monotone",dataKey:"entradas",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),e.jsx(_,{type:"monotone",dataKey:"saidas",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6}),e.jsx(Ta,{type:"monotone",dataKey:"saldo",stroke:"#3b82f6",strokeWidth:2})]})})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Sem dados"})})]}),e.jsxs(G,{children:[e.jsx(J,{children:e.jsx(q,{children:"DRE - Resumo por Natureza"})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-2",children:Object.entries(A).map(([s,x])=>{const h=Number(x||0),N=Object.values(A).reduce(($,Q)=>$+Math.abs(Number(Q)),0),M=N>0?Math.abs(h)/N*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:s}),e.jsx("span",{className:h>=0?"text-green-600":"text-red-600",children:n(h)})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${h>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${M}%`}})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[M.toFixed(1),"%"]})]},s)})})})]}),e.jsxs(G,{children:[e.jsx(J,{children:e.jsx(q,{children:"DFC - Resumo de Fluxo"})}),e.jsxs(K,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-50",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n(I.entradas)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Entradas"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-red-50",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n(I.saidas)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Sa√≠das"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-50",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n(I.saldo)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Saldo"})]})]}),e.jsx("div",{className:"h-48",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(We,{children:[e.jsxs(Ze,{data:[{name:"Entradas",value:I.entradas},{name:"Sa√≠das",value:Math.abs(I.saidas)}],cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:x})=>`${s} ${(x*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[e.jsx(we,{fill:"#10b981"}),e.jsx(we,{fill:"#ef4444"})]}),e.jsx(X,{formatter:s=>n(s)})]})})})]})]})]})})]})]})}function ls(){return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extrato de Lan√ßamentos ‚Ä¢ Dados Reais"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registros financeiros consultados via Supabase"})]}),e.jsx(sa,{})]})}const cs=Ba("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 border",{variants:{variant:{default:"bg-card text-foreground border-border hover:bg-[#0f141b]",primary:"bg-primary text-primary-foreground border-transparent hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground border-transparent hover:bg-secondary/90",destructive:"bg-destructive text-destructive-foreground border-transparent hover:bg-destructive/90",success:"bg-success text-success-foreground border-transparent hover:bg-success/90",warning:"bg-warning text-warning-foreground border-transparent hover:bg-warning/90",info:"bg-info text-info-foreground border-transparent hover:bg-info/90",ghost:"bg-transparent text-foreground border-transparent hover:bg-muted/40",outline:"bg-transparent text-foreground border-border hover:bg-muted/30",accent:"bg-accent border-border text-accent-foreground data-[active=true]:bg-accent/90"},size:{default:"h-9 px-3 py-2",sm:"h-8 px-2",lg:"h-10 px-4",icon:"h-9 w-9 p-0"}},defaultVariants:{variant:"default",size:"default"}}),ta=d.forwardRef(({className:a,variant:r,size:o,asChild:l=!1,...t},i)=>{const m=l?Ra:"button";return e.jsx(m,{className:Y(cs({variant:r,size:o,className:a})),ref:i,...t})});ta.displayName="Button";const ds={bpo:["bpo","terceiriza√ß√£o","outsourcing","servi√ßos","processos"],tecnologia:["software","tech","tecnologia","sistemas","digital","ti"],consultoria:["consultoria","consulting","advisory","gest√£o"],rh:["rh","recursos humanos","people","talentos","recrutamento"],financeiro:["financeira","cr√©dito","banco","fundo","investimento"],saude:["sa√∫de","hospital","cl√≠nica","m√©dico","farm√°cia"],educacao:["educa√ß√£o","escola","universidade","curso","ensino"],varejo:["varejo","loja","com√©rcio","mercado","shopping"],industria:["ind√∫stria","f√°brica","manufatura","produ√ß√£o"],logistica:["log√≠stica","transporte","distribui√ß√£o","armaz√©m"]},Te={bpo:{descricao:"Empresa especializada em Business Process Outsourcing (BPO), oferecendo servi√ßos de terceiriza√ß√£o de processos de neg√≥cios, gest√£o administrativa, financeira e de recursos humanos",concorrentes:["Atento","Stefanini","TCS Brasil","Accenture","Teleperformance","Contax","Almaviva"],tendencias:["intelig√™ncia artificial processos empresariais","automa√ß√£o RPA rob√≥tica","trabalho remoto h√≠brido gest√£o","ESG sustentabilidade empresas","transforma√ß√£o digital empresas","experi√™ncia do cliente CX"],palavrasChaveNoticias:["bpo","terceiriza√ß√£o","outsourcing","processos de neg√≥cio","gest√£o empresarial"]},tecnologia:{descricao:"Empresa de tecnologia focada em desenvolvimento de software, solu√ß√µes digitais e transforma√ß√£o tecnol√≥gica",concorrentes:["Microsoft","Oracle","SAP","Salesforce","Totvs","Senior"],tendencias:["intelig√™ncia artificial generativa","cloud computing nuvem","ciberseguran√ßa prote√ß√£o dados","blockchain web3","DevOps CI/CD","microservi√ßos arquitetura"],palavrasChaveNoticias:["tecnologia","software","inova√ß√£o digital","transforma√ß√£o digital","TI"]},consultoria:{descricao:"Consultoria empresarial especializada em estrat√©gia, gest√£o e otimiza√ß√£o de processos organizacionais",concorrentes:["McKinsey","BCG","Bain","Deloitte","PwC","EY","KPMG"],tendencias:["consultoria estrat√©gica digital","transforma√ß√£o organizacional","gest√£o de mudan√ßas","excel√™ncia operacional","analytics big data","governan√ßa corporativa"],palavrasChaveNoticias:["consultoria","estrat√©gia empresarial","gest√£o organizacional","advisory"]},rh:{descricao:"Especialista em gest√£o de recursos humanos, recrutamento, sele√ß√£o e desenvolvimento de talentos",concorrentes:["Randstad","Adecco","ManpowerGroup","Robert Half","Page Personnel"],tendencias:["people analytics dados RH","employee experience experi√™ncia colaborador","diversidade inclus√£o empresas","wellbeing sa√∫de mental trabalho","upskilling reskilling talentos","employer branding marca empregadora"],palavrasChaveNoticias:["recursos humanos","gest√£o de talentos","recrutamento","people management"]},financeiro:{descricao:"Institui√ß√£o financeira focada em servi√ßos banc√°rios, cr√©dito, investimentos e gest√£o financeira",concorrentes:["Ita√∫","Bradesco","Santander","Banco do Brasil","Nubank","BTG Pactual"],tendencias:["open banking open finance","fintechs pagamentos digitais","blockchain DeFi finan√ßas","regula√ß√£o financeira BACEN","cr√©dito digital an√°lise risco","ESG investimentos sustent√°veis"],palavrasChaveNoticias:["mercado financeiro","bancos","cr√©dito","investimentos","finan√ßas"]}};function ms(a,r){const o=`${a} ${r}`.toLowerCase();for(const[l,t]of Object.entries(ds))for(const i of t)if(o.includes(i))return l;return"bpo"}async function ze(a,r,o){const l=ms(r,o),t=Te[l]||Te.bpo;return{cnpj:a,nomeEmpresa:r,grupoEmpresarial:o,segmentosPrincipais:[l],palavrasChave:t.palavrasChaveNoticias,descricaoNegocio:t.descricao,concorrentes:t.concorrentes,tendenciasRelevantes:t.tendencias}}function xs(a){return`${a.grupoEmpresarial} - ${a.descricaoNegocio}. A empresa atua principalmente no segmento de ${a.segmentosPrincipais.join(", ")}.`}const Ee={bpo:{mercado:[{titulo:"Mercado de BPO cresce 18% no Brasil e deve movimentar R$ 156 bilh√µes em 2025",resumo:"Setor de terceiriza√ß√£o de processos apresenta forte expans√£o com empresas investindo em automa√ß√£o e IA. Demanda por servi√ßos especializados cresce principalmente em √°reas financeiras, RH e atendimento ao cliente.",sentimento:"positivo",fonte:"Valor Econ√¥mico",relevancia:98,categorias:["crescimento","mercado","transforma√ß√£o digital"]},{titulo:"Empresas de BPO investem R$ 8 bilh√µes em tecnologia e capacita√ß√£o",resumo:"Principais players do mercado brasileiro anunciam investimentos massivos em intelig√™ncia artificial, RPA e qualifica√ß√£o profissional. Movimento busca aumentar efici√™ncia e competitividade no setor.",sentimento:"positivo",fonte:"InfoMoney",relevancia:95,categorias:["investimento","tecnologia","capacita√ß√£o"]},{titulo:"Reforma trabalhista exige adequa√ß√µes em contratos de terceiriza√ß√£o",resumo:"Novas diretrizes do Minist√©rio do Trabalho imp√µem mudan√ßas na estrutura de contrata√ß√£o de servi√ßos terceirizados. Empresas t√™m at√© mar√ßo de 2025 para adequa√ß√£o completa.",sentimento:"negativo",fonte:"Estad√£o",relevancia:88,categorias:["regula√ß√£o","compliance","legisla√ß√£o"]},{titulo:"Demanda por servi√ßos de gest√£o de RH terceirizados cresce 24%",resumo:"Empresas buscam especializa√ß√£o externa para processos de recrutamento, folha e desenvolvimento. Tend√™ncia reflete foco em core business e redu√ß√£o de custos operacionais.",sentimento:"positivo",fonte:"Exame",relevancia:92,categorias:["rh","gest√£o de pessoas","terceiriza√ß√£o"]}],concorrentes:[{titulo:"Atento investe R$ 300 milh√µes em expans√£o e tecnologia",resumo:"L√≠der em contact center anuncia plano de expans√£o com abertura de 12 novas unidades e contrata√ß√£o de 8 mil profissionais. Investimento inclui plataforma pr√≥pria de IA conversacional.",sentimento:"neutro",fonte:"Folha de S.Paulo",relevancia:87},{titulo:"Stefanini adquire empresa de consultoria em transforma√ß√£o digital",resumo:"Grupo amplia portf√≥lio com aquisi√ß√£o estrat√©gica de consultoria especializada em cloud e analytics. Movimento fortalece posi√ß√£o em projetos de grande porte.",sentimento:"positivo",fonte:"TI Inside",relevancia:85},{titulo:"TCS Brasil reporta crescimento de 28% em receita no ano fiscal",resumo:"Tata Consultancy Services apresenta resultados acima das expectativas impulsionados por contratos de moderniza√ß√£o de sistemas e migra√ß√£o para nuvem.",sentimento:"positivo",fonte:"Bloomberg Brasil",relevancia:83}],tendencias:[{titulo:"IA Generativa deve automatizar 40% das tarefas em BPO at√© 2026",resumo:"Estudo da Gartner revela que tecnologias de IA generativa transformar√£o radicalmente opera√ß√µes de contact center e backoffice. Empresas que n√£o adotarem correm risco de perder competitividade.",sentimento:"positivo",fonte:"Gartner Research",relevancia:96,categorias:["intelig√™ncia artificial","automa√ß√£o","futuro"]},{titulo:"Trabalho h√≠brido se consolida como modelo permanente em servi√ßos",resumo:"Pesquisa da FGV indica que 73% das empresas de servi√ßos adotaram modelo h√≠brido definitivamente. Mudan√ßa exige novos investimentos em infraestrutura digital e gest√£o remota.",sentimento:"neutro",fonte:"FGV-EAESP",relevancia:89,categorias:["trabalho remoto","gest√£o","futuro do trabalho"]},{titulo:"ESG torna-se crit√©rio obrigat√≥rio em licita√ß√µes de grande porte",resumo:"Empresas de BPO precisam comprovar pr√°ticas sustent√°veis e sociais para participar de concorr√™ncias p√∫blicas e privadas. Certifica√ß√µes ambientais ganham peso em decis√µes.",sentimento:"positivo",fonte:"√âpoca Neg√≥cios",relevancia:91,categorias:["esg","sustentabilidade","governan√ßa"]},{titulo:"Escassez de talentos qualificados desafia setor de servi√ßos",resumo:"Pesquisa da Bain aponta falta de 150 mil profissionais qualificados no setor. Empresas investem em programas de requalifica√ß√£o e parcerias com universidades.",sentimento:"negativo",fonte:"Bain & Company",relevancia:87,categorias:["talentos","capacita√ß√£o","mercado de trabalho"]}]}},ge=["Valor Econ√¥mico","Folha de S.Paulo","O Estado de S.Paulo","Exame","InfoMoney","√âpoca Neg√≥cios","Bloomberg Brasil","Reuters Brasil","Converg√™ncia Digital","TI Inside","CIO Brasil","IT Forum"],fe=["Gartner Research","McKinsey & Company","Bain & Company","BCG Brasil","Deloitte Insights","PwC Brasil","FGV-EAESP","Funda√ß√£o Dom Cabral","IDC Brasil","Forrester Research"];function ps(a,r=48){const o=Ee.bpo.mercado,l=[];o.forEach((c,b)=>{const u=11-b;l.push({id:`real-${b}`,titulo:c.titulo,resumo:c.resumo,sentimento:c.sentimento,fonte:c.fonte,data:`2025-${String(u).padStart(2,"0")}-${15+b}`,url:"#",relevancia:c.relevancia,categorias:c.categorias||[]})});const t=gs(),i=12-o.length,m=Math.floor((r-o.length)/i);for(let c=1;c<=12;c++)if(!(c>=8))for(let b=0;b<m;b++){const u=t[Math.floor(Math.random()*t.length)],j=Math.random()>.5?ge[Math.floor(Math.random()*ge.length)]:fe[Math.floor(Math.random()*fe.length)];l.push({id:`gen-mercado-${c}-${b}`,titulo:u.titulo.replace("{segmento}",a.segmentosPrincipais[0].toUpperCase()),resumo:u.resumo.replace("{grupo}",a.grupoEmpresarial),sentimento:u.sentimento,fonte:j,data:`2025-${String(c).padStart(2,"0")}-${5+b*8}`,url:"#",relevancia:75+Math.floor(Math.random()*20),categorias:u.categorias})}return l.sort((c,b)=>new Date(b.data).getTime()-new Date(c.data).getTime())}function us(a,r=36){const o=Ee.bpo.concorrentes,l=[];o.forEach((i,m)=>{const c=a.concorrentes[m%a.concorrentes.length];l.push({id:`real-conc-${m}`,titulo:i.titulo,resumo:i.resumo,sentimento:i.sentimento,fonte:i.fonte,data:`2025-${String(10-m).padStart(2,"0")}-${20+m}`,url:"#",relevancia:i.relevancia,categorias:["concorrente",c]})});const t=fs();return a.concorrentes.forEach((i,m)=>{for(let c=1;c<=12&&!(l.length>=r);c++){const b=t[c%t.length],u=ge[Math.floor(Math.random()*ge.length)];l.push({id:`gen-conc-${i}-${c}`,titulo:b.titulo.replace("{concorrente}",i),resumo:b.resumo.replace("{concorrente}",i),sentimento:b.sentimento,fonte:u,data:`2025-${String(c).padStart(2,"0")}-${m*3+5}`,url:"#",relevancia:70+Math.floor(Math.random()*20),categorias:["concorrente",i]})}}),l.sort((i,m)=>new Date(m.data).getTime()-new Date(i.data).getTime()).slice(0,r)}function hs(a,r=48){const o=Ee.bpo.tendencias,l=[];o.forEach((i,m)=>{l.push({id:`real-tend-${m}`,titulo:i.titulo,resumo:i.resumo,sentimento:i.sentimento,fonte:i.fonte,data:`2025-${String(11-m).padStart(2,"0")}-${10+m*5}`,url:"#",relevancia:i.relevancia,categorias:i.categorias||[]})});const t=bs();for(let i=1;i<=12&&!(l.length>=r);i++){const m=Math.floor((r-o.length)/12);for(let c=0;c<m;c++){const b=t[(i+c)%t.length],u=fe[Math.floor(Math.random()*fe.length)];l.push({id:`gen-tend-${i}-${c}`,titulo:b.titulo,resumo:b.resumo,sentimento:b.sentimento,fonte:u,data:`2025-${String(i).padStart(2,"0")}-${3+c*7}`,url:"#",relevancia:80+Math.floor(Math.random()*18),categorias:b.categorias})}}return l.sort((i,m)=>new Date(m.data).getTime()-new Date(i.data).getTime())}function gs(a){return[{titulo:"Investimentos em {segmento} superam R$ 5 bilh√µes no primeiro trimestre",resumo:"Setor registra aportes recordes com foco em tecnologia e expans√£o regional. Empresas como {grupo} lideram movimento de moderniza√ß√£o e amplia√ß√£o de capacidade.",sentimento:"positivo",categorias:["investimento","crescimento"]},{titulo:"Novas regulamenta√ß√µes impactam setor de servi√ßos terceirizados",resumo:"Mudan√ßas na legisla√ß√£o trabalhista e tribut√°ria exigem adapta√ß√µes operacionais. Especialistas recomendam revis√£o de contratos e processos de compliance.",sentimento:"negativo",categorias:["regula√ß√£o","compliance"]},{titulo:"Fus√µes e aquisi√ß√µes movimentam mercado de {segmento}",resumo:"Consolida√ß√£o do setor acelera com empresas buscando ganhos de escala e sinergias operacionais. Transa√ß√µes somam R$ 2,3 bilh√µes no per√≠odo.",sentimento:"neutro",categorias:["m&a","consolida√ß√£o"]},{titulo:"Empresas de {segmento} apostam em inova√ß√£o para diferencia√ß√£o",resumo:"Desenvolvimento de solu√ß√µes propriet√°rias e parcerias tecnol√≥gicas ganham for√ßa. Investimento em P&D cresce 35% em rela√ß√£o ao ano anterior.",sentimento:"positivo",categorias:["inova√ß√£o","tecnologia"]}]}function fs(){return[{titulo:"{concorrente} anuncia expans√£o para Nordeste e Centro-Oeste",resumo:"{concorrente} investe em novas unidades regionais visando ampliar presen√ßa nacional. Plano prev√™ cria√ß√£o de 2 mil empregos nos pr√≥ximos 18 meses.",sentimento:"neutro"},{titulo:"{concorrente} lan√ßa plataforma digital pr√≥pria de gest√£o",resumo:"{concorrente} desenvolve solu√ß√£o tecnol√≥gica interna para otimizar opera√ß√µes. Ferramenta integra IA e analytics para ganhos de produtividade.",sentimento:"positivo"},{titulo:"{concorrente} renova certifica√ß√µes internacionais de qualidade",resumo:"{concorrente} mant√©m padr√µes ISO e conquista novas certifica√ß√µes ESG. Reconhecimento refor√ßa posicionamento em mercados premium.",sentimento:"positivo"},{titulo:"{concorrente} enfrenta desafios com turnover elevado",resumo:"{concorrente} registra taxa de rotatividade acima da m√©dia do setor. Empresa anuncia programa de reten√ß√£o e benef√≠cios ampliados.",sentimento:"negativo"}]}function bs(a){return[{titulo:"Ciberseguran√ßa torna-se prioridade estrat√©gica em servi√ßos",resumo:"Ataques ransomware crescem 120% e empresas elevam investimentos em prote√ß√£o de dados. Compliance com LGPD exige infraestrutura robusta de seguran√ßa.",sentimento:"negativo",categorias:["seguran√ßa","tecnologia","lgpd"]},{titulo:"An√°lise preditiva revoluciona tomada de decis√£o empresarial",resumo:"Ferramentas de big data e machine learning permitem antecipa√ß√£o de tend√™ncias e otimiza√ß√£o de recursos. ROI m√©dio de implementa√ß√£o atinge 300%.",sentimento:"positivo",categorias:["analytics","big data","inova√ß√£o"]},{titulo:"Customer experience define competitividade no setor",resumo:"Pesquisa aponta que 78% dos clientes valorizam mais a experi√™ncia que o pre√ßo. Empresas investem em omnichannel e personaliza√ß√£o.",sentimento:"positivo",categorias:["cx","atendimento","estrat√©gia"]},{titulo:"Economia circular ganha espa√ßo em modelos de neg√≥cio",resumo:"Pr√°ticas sustent√°veis deixam de ser diferenciais e tornam-se requisitos b√°sicos. Empresas que n√£o se adaptarem perdem competitividade.",sentimento:"neutro",categorias:["sustentabilidade","esg","economia circular"]},{titulo:"Blockchain promete transformar contratos e auditoria",resumo:"Tecnologia de registro distribu√≠do garante transpar√™ncia e rastreabilidade em transa√ß√µes. Pilotos mostram redu√ß√£o de 60% no tempo de auditorias.",sentimento:"positivo",categorias:["blockchain","inova√ß√£o","tecnologia"]},{titulo:"Sa√∫de mental no trabalho exige novas pol√≠ticas corporativas",resumo:"Burnout e ansiedade afetam 40% dos profissionais segundo pesquisa. Empresas implementam programas de wellbeing e acompanhamento psicol√≥gico.",sentimento:"neutro",categorias:["sa√∫de mental","rh","wellbeing"]}]}function js({cnpj:a="26888098000159",nomeEmpresa:r="Volpe BPO",grupoEmpresarial:o="Grupo Volpe"}){const[l,t]=d.useState(!1),[i,m]=d.useState(""),[c,b]=d.useState(null),[u,j]=d.useState([]),[y,g]=d.useState([]),[S,R]=d.useState([]);d.useEffect(()=>{w(),O()},[a,r,o]);const w=async()=>{const n=await ze(a,r,o);b(n),m(xs(n))},O=async()=>{t(!0);try{let n=c;n||(n=await ze(a,r,o),b(n));const D=ps(n,48),k=us(n,36),p=hs(n,48);console.log(`üì∞ Not√≠cias geradas para ${n.grupoEmpresarial}:`,{mercado:D.length,concorrentes:k.length,tendencias:p.length}),setTimeout(()=>{j(D),g(k),R(p),t(!1)},800)}catch(n){console.error("Erro ao carregar not√≠cias:",n),t(!1)}},v=n=>{const k={positivo:{bg:"bg-green-500/20",text:"text-green-400",icon:U,label:"Positivo"},neutro:{bg:"bg-blue-500/20",text:"text-blue-400",icon:Oa,label:"Neutro"},negativo:{bg:"bg-red-500/20",text:"text-red-400",icon:pe,label:"Negativo"}}[n],p=k.icon;return e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${k.bg} ${k.text} text-xs font-semibold`,children:[e.jsx(p,{className:"w-3 h-3"}),k.label]})},C=({noticia:n})=>e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"neomorphic rounded-2xl p-5 border border-graphite-800/30 hover:border-gold-500/30 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-semibold text-base mb-2 line-clamp-2",children:n.titulo}),e.jsx("p",{className:"text-graphite-400 text-sm leading-relaxed line-clamp-3",children:n.resumo})]}),e.jsx("div",{className:"ml-4",children:v(n.sentimento)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-graphite-800",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-graphite-500",children:[e.jsx("span",{className:"font-medium",children:n.fonte}),e.jsx("span",{children:new Date(n.data).toLocaleDateString("pt-BR")}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-gold-500"}),n.relevancia,"% relevante"]})]}),e.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"text-gold-500 hover:text-gold-400 transition-colors",children:e.jsx(Ma,{className:"w-4 h-4"})})]})]});return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Not√≠cias & Intelig√™ncia de Mercado"}),e.jsxs("p",{className:"text-graphite-400",children:["Acompanhe tend√™ncias, concorrentes e oportunidades do setor ‚Ä¢ ",r]})]}),e.jsxs(ta,{onClick:O,disabled:l,className:"flex items-center gap-2",children:[e.jsx(ne,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Atualizar"]})]}),e.jsxs(G,{className:"mb-6 bg-gradient-to-br from-gold-500/10 to-gold-600/5 border-gold-500/20",children:[e.jsx(J,{children:e.jsxs(q,{className:"text-gold-400 flex items-center gap-2",children:[e.jsx(Ia,{className:"w-5 h-5"}),"Sobre a Empresa Analisada"]})}),e.jsxs(K,{className:"space-y-3",children:[e.jsx("p",{className:"text-graphite-300 text-sm leading-relaxed",children:i||"Carregando informa√ß√µes da empresa..."}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-3 border-t border-gold-500/20",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Aa,{className:"w-4 h-4 text-gold-400"}),e.jsx("span",{className:"text-xs font-semibold text-gold-400",children:"Segmento"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:c.segmentosPrincipais.map(n=>e.jsx("span",{className:"px-2 py-1 rounded-md bg-gold-500/10 text-gold-400 text-xs",children:n.toUpperCase()},n))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs font-semibold text-blue-400",children:"Concorrentes Principais"})]}),e.jsxs("p",{className:"text-graphite-400 text-xs",children:[c.concorrentes.slice(0,3).join(", "),"..."]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs font-semibold text-green-400",children:"Palavras-Chave"})]}),e.jsx("p",{className:"text-graphite-400 text-xs",children:c.palavrasChave.slice(0,3).join(", ")})]})]})]})]}),e.jsxs(Se,{defaultValue:"mercado",className:"w-full",children:[e.jsxs(je,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(L,{value:"mercado",children:["Mercado & Setor",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-gold-500/20 text-gold-400 text-xs",children:u.length})]}),e.jsxs(L,{value:"concorrentes",children:["Concorrentes",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400 text-xs",children:y.length})]}),e.jsxs(L,{value:"tendencias",children:["Tend√™ncias",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-purple-500/20 text-purple-400 text-xs",children:S.length})]})]}),e.jsx(B,{value:"mercado",className:"space-y-4",children:l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ne,{className:"w-8 h-8 animate-spin text-gold-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando not√≠cias do mercado..."})]}):u.map(n=>e.jsx(C,{noticia:n},n.id))}),e.jsx(B,{value:"concorrentes",className:"space-y-4",children:l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ne,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando not√≠cias de concorrentes..."})]}):y.map(n=>e.jsx(C,{noticia:n},n.id))}),e.jsx(B,{value:"tendencias",className:"space-y-4",children:l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ne,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando tend√™ncias do setor..."})]}):S.map(n=>e.jsx(C,{noticia:n},n.id))})]})]})}const $e="oracle_context_rules";function vs({open:a,onClose:r,onUpdateOracleContext:o}){const[l,t]=d.useState("settings"),[i,m]=d.useState(""),[c,b]=d.useState("all"),[u,j]=d.useState("all"),[y,g]=d.useState("24h"),[S,R]=d.useState([]);if(d.useEffect(()=>{if(a){const n=localStorage.getItem($e)||"";m(n)}},[a]),d.useEffect(()=>{if(!a||l!=="logs")return;const n={select:"*",order:"ts.desc",limit:"200"};T.restGet("app_logs",{query:n}).then(R).catch(()=>R([]))},[a,l,c,u,y]),!a)return null;const w=()=>{localStorage.setItem($e,i),o&&o(i),r()},O=S.filter(n=>(c==="all"||n.level===c)&&(u==="all"||n.service===u)),v=O.map(n=>({ts:n.ts,info:n.level==="info"?1:0,warn:n.level==="warn"?1:0,error:n.level==="error"?1:0})),C=Object.values(O.reduce((n,D)=>(D.endpoint&&(n[D.endpoint]=(n[D.endpoint]||0)+1),n),{})).length?Object.entries(O.reduce((n,D)=>(D.endpoint&&(n[D.endpoint]=(n[D.endpoint]||0)+1),n),{})).slice(0,8).map(([n,D])=>({endpoint:n,count:D})):[];return O.filter(n=>n.latencyMs).map(n=>({endpoint:n.endpoint||"N/A",latency:n.latencyMs})),e.jsx(f.div,{className:"fixed inset-0 z-[75] bg-black/60 backdrop-blur-sm",children:e.jsxs(f.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"mx-auto mt-12 max-w-[1200px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Configura√ß√µes do Sistema"})]}),e.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground",children:e.jsx(Ve,{className:"w-5 h-5"})})]}),e.jsxs(Se,{value:l,onValueChange:t,className:"w-full",children:[e.jsxs(je,{className:"w-full grid grid-cols-3 p-1 mx-5 mt-5",children:[e.jsxs(L,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Configura√ß√µes"]}),e.jsxs(L,{value:"logs",className:"flex items-center gap-2",children:[e.jsx(ka,{className:"w-4 h-4"}),"Logs"]}),e.jsxs(L,{value:"about",className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"w-4 h-4"}),"Sobre"]})]}),e.jsx(B,{value:"settings",className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Regras de Contexto do Or√°culo"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Configure regras de contexto (empresa/grupo, fontes, tom e escopo) para personalizar respostas do Or√°culo."}),e.jsx("textarea",{value:i,onChange:n=>m(n.target.value),rows:10,placeholder:"Ex: Focar em an√°lise do Grupo Volpe, usar tom profissional, priorizar dados de 2024-2025...",className:"w-full bg-graphite-900 border border-graphite-800 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 font-mono"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 rounded-xl bg-secondary text-secondary-foreground hover:bg-secondary/80",children:"Cancelar"}),e.jsx("button",{onClick:w,className:"px-4 py-2 rounded-xl bg-primary text-primary-foreground hover:bg-primary/90",children:"Salvar"})]})]})}),e.jsx(B,{value:"logs",className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("select",{value:y,onChange:n=>g(n.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"24h",children:"24h"}),e.jsx("option",{value:"7d",children:"7 dias"}),e.jsx("option",{value:"30d",children:"30 dias"})]}),e.jsxs("select",{value:c,onChange:n=>b(n.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos os n√≠veis"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warn",children:"Warn"}),e.jsx("option",{value:"error",children:"Error"})]}),e.jsxs("select",{value:u,onChange:n=>j(n.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos os servi√ßos"}),e.jsx("option",{value:"UI",children:"UI"}),e.jsx("option",{value:"API",children:"API"}),e.jsx("option",{value:"Edge",children:"Edge"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"N√≠veis ao longo do tempo"})}),e.jsx("div",{className:"p-4 pt-0 h-[250px]",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(oe,{data:v,children:[e.jsx(ae,{stroke:"rgba(200,200,200,0.15)",vertical:!1}),e.jsx(se,{dataKey:"ts",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},hide:!0}),e.jsx(te,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(X,{}),e.jsx(ue,{}),e.jsx(_,{type:"monotone",dataKey:"info",stackId:"1",stroke:"#38bdf8",fill:"#38bdf8"}),e.jsx(_,{type:"monotone",dataKey:"warn",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b"}),e.jsx(_,{type:"monotone",dataKey:"error",stackId:"1",stroke:"#ef4444",fill:"#ef4444"})]})})})]}),e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Top endpoints"})}),e.jsx("div",{className:"p-4 pt-0 h-[250px]",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(be,{data:C,children:[e.jsx(ae,{stroke:"rgba(200,200,200,0.15)"}),e.jsx(se,{dataKey:"endpoint",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(te,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(X,{}),e.jsx(H,{dataKey:"count",fill:"#ff7a00"})]})})})]})]}),e.jsx("div",{className:"rounded-2xl border border-border overflow-hidden max-h-[300px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Timestamp"}),e.jsx("th",{className:"text-left p-3",children:"N√≠vel"}),e.jsx("th",{className:"text-left p-3",children:"Servi√ßo"}),e.jsx("th",{className:"text-left p-3",children:"Endpoint"}),e.jsx("th",{className:"text-left p-3",children:"Mensagem"})]})}),e.jsxs("tbody",{children:[O.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-8 text-muted-foreground",children:"Nenhum log encontrado para os filtros selecionados."})}),O.slice(0,50).map((n,D)=>e.jsxs("tr",{className:"border-t border-border hover:bg-graphite-900/50",children:[e.jsx("td",{className:"p-3 text-xs",children:new Date(n.ts).toLocaleString("pt-BR")}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${n.level==="error"?"bg-red-500/20 text-red-400":n.level==="warn"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:n.level})}),e.jsx("td",{className:"p-3 text-xs",children:n.service}),e.jsx("td",{className:"p-3 text-xs font-mono",children:n.endpoint||"-"}),e.jsx("td",{className:"p-3 text-xs",children:n.message})]},D))]})]})})]})}),e.jsx(B,{value:"about",className:"p-5",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-gold-500 to-orange-500 flex items-center justify-center",children:e.jsx(ce,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold",children:"fin.app"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Financial Intelligence Dashboard"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Vers√£o"}),e.jsx("p",{className:"text-lg font-bold",children:"v0.2.0"})]}),e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Ambiente"}),e.jsx("p",{className:"text-lg font-bold",children:"Produ√ß√£o"})]}),e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Empresa"}),e.jsx("p",{className:"text-lg font-bold",children:"Grupo Volpe"})]}),e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"√öltima Atualiza√ß√£o"}),e.jsx("p",{className:"text-lg font-bold",children:"17/11/2025"})]})]}),e.jsxs("div",{className:"card-premium p-5",children:[e.jsx("h5",{className:"text-sm font-semibold mb-3",children:"Funcionalidades"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Dashboard financeiro com DRE e DFC"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"An√°lise de fluxo de caixa e lan√ßamentos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Sistema de not√≠cias inteligente com IA"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Or√°culo para consultas financeiras"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Gerenciamento de logs e monitoramento"]})]})]}),e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"¬© 2025 fin.app. Todos os direitos reservados."})]})})]})]})})}const Ns={duration:.35,ease:[.22,1,.36,1]},ys={hidden:{opacity:0,y:16},show:{opacity:1,y:0,transition:Ns}},ye={whileHover:{scale:1.02}};function ws({open:a,onClose:r,onLogged:o}){const[l,t]=d.useState("dev@angrax.com.br"),[i,m]=d.useState("B5b0dcf500@#"),[c,b]=d.useState(""),[u,j]=d.useState(!1),y=async()=>{b(""),j(!0);try{const g=await aa(l,i);if(!g){b("Credenciais inv√°lidas"),j(!1);return}const S={...g,defaultCompany:"26888098000159",companies:[{cliente_nome:"LOJA 01 - VOLPE MATRIZ",cnpj:"26888098000159"}]};o(S),r()}catch(g){b(g.message||"Erro ao fazer login"),j(!1)}};return a?e.jsx(f.div,{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-xl flex items-center justify-center",children:e.jsx(f.div,{variants:ys,initial:"hidden",animate:"show",className:"neomorphic neomorphic-hover w-[380px] rounded-xl border border-graphite-800/30 shadow-soft-lg",children:e.jsxs("div",{className:"p-7 space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:"/finapp-logo.png",alt:"fin.app",className:"w-40 h-auto"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Login - Grupo VOLPE"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acesso exclusivo para o grupo VOLPE"})]}),e.jsx(f.input,{whileHover:ye.whileHover,value:l,onChange:g=>t(g.target.value),placeholder:"E-mail",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:u}),e.jsx(f.input,{whileHover:ye.whileHover,type:"password",value:i,onChange:g=>m(g.target.value),placeholder:"Senha",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:u}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e.jsx("p",{children:"Empresa padr√£o: LOJA 01 - VOLPE MATRIZ (0159)"})}),c&&e.jsx("p",{className:"text-xs text-destructive text-center",children:c}),e.jsx("div",{className:"flex gap-2 justify-end pt-2",children:e.jsx(f.button,{whileHover:ye.whileHover,whileTap:{scale:.98},onClick:y,disabled:u,className:"w-full px-3 py-2 rounded-sm bg-emerald-400 text-white hover:bg-emerald-500 disabled:opacity-50",children:u?"Entrando...":"Entrar"})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[e.jsx("p",{children:"Usu√°rio: dev@angrax.com.br"}),e.jsx("p",{children:"Empresa: 26888098000159 (Matriz)"})]})]})})}):null}function Cs(a="26888098000159",r){const[o,l]=d.useState({receitaTotal:0,despesasTotal:0,limiteDiario:45e3,metaPoupanca:15e4,receitaChange:0,despesasChange:0,limiteDiarioProgress:0,metaPoupancaProgress:0}),[t,i]=d.useState(!0);d.useEffect(()=>{m()},[a,r]);const m=async()=>{try{const c=await T.getDRE(a);if(!c||c.length===0){i(!1);return}const[b,u]=r?r.split("-").map(Number):[new Date().getFullYear(),new Date().getMonth()+1],j=b,y=u-1;let g=0,S=0,R=0,w=0;c.forEach(A=>{const P=new Date(A.data),z=P.getFullYear(),I=P.getMonth();z===j&&I===y?A.natureza==="receita"?g+=A.valor:A.natureza==="despesa"&&(S+=Math.abs(A.valor)):(z===j&&I===y-1||y===0&&z===j-1&&I===11)&&(A.natureza==="receita"?R+=A.valor:A.natureza==="despesa"&&(w+=Math.abs(A.valor)))});const O=R>0?(g-R)/R*100:0,v=w>0?(S-w)/w*100:0,n=45e3*22,D=Math.min(Math.round(g/n*100),100),k=g-S,p=Math.min(Math.round(k/15e4*100),100);l({receitaTotal:g,despesasTotal:S,limiteDiario:45e3,metaPoupanca:15e4,receitaChange:O,despesasChange:v,limiteDiarioProgress:D,metaPoupancaProgress:p}),i(!1)}catch(c){console.error("Erro ao carregar dados financeiros:",c),i(!1)}};return{metrics:o,loading:t}}const Fe=[{value:42},{value:48},{value:45},{value:52},{value:58},{value:65},{value:70}];function Ss({payments:a,receipts:r,paymentsChange:o,receiptsChange:l}){return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl p-6 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-500/5 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-graphite-400",children:"Processamento"}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üìä"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-0.5",children:"Pagamentos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:a.toLocaleString()}),e.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded-md text-[10px] font-semibold ${o>=0?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:[o>=0?e.jsx(U,{className:"w-3 h-3"}):e.jsx(pe,{className:"w-3 h-3"}),Math.abs(o),"%"]})]})]}),e.jsx("div",{className:"w-16 h-8",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsx(oe,{data:Fe,children:e.jsx(_,{type:"monotone",dataKey:"value",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.2,strokeWidth:1.5})})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-0.5",children:"Recebimentos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r.toLocaleString()}),e.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded-md text-[10px] font-semibold ${l>=0?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:[l>=0?e.jsx(U,{className:"w-3 h-3"}):e.jsx(pe,{className:"w-3 h-3"}),Math.abs(l),"%"]})]})]}),e.jsx("div",{className:"w-16 h-8",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsx(oe,{data:Fe,children:e.jsx(_,{type:"monotone",dataKey:"value",stroke:"#10b981",fill:"#10b981",fillOpacity:.2,strokeWidth:1.5})})})})]})]})]})]})}const Es=[{name:"Stone",value:35,color:"#10b981"},{name:"Cielo",value:28,color:"#3b82f6"},{name:"Rede",value:22,color:"#f59e0b"},{name:"GetNet",value:15,color:"#8b5cf6"}],Ds=[{name:"Jan",stone:32,cielo:25,rede:20,getnet:12},{name:"Fev",stone:34,cielo:27,rede:21,getnet:14},{name:"Mar",stone:35,cielo:28,rede:22,getnet:15}];function Rs(){return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl p-6 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/5 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-graphite-400",children:"Adquirentes"}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üí≥"})})]}),e.jsx("div",{className:"space-y-2.5 mb-4",children:Es.map((a,r)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-graphite-300 font-medium",children:a.name}),e.jsxs("span",{className:"text-xs font-bold text-white",children:[a.value,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-graphite-900 rounded-full overflow-hidden",children:e.jsx(f.div,{initial:{width:0},animate:{width:`${a.value}%`},transition:{delay:.4+r*.1,duration:.6},className:"h-full rounded-full",style:{backgroundColor:a.color}})})]}),e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a.color}})]},a.name))}),e.jsx("div",{className:"h-16 mt-4",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(be,{data:Ds,children:[e.jsx(H,{dataKey:"stone",fill:"#10b981",radius:[4,4,0,0]}),e.jsx(H,{dataKey:"cielo",fill:"#3b82f6",radius:[4,4,0,0]}),e.jsx(H,{dataKey:"rede",fill:"#f59e0b",radius:[4,4,0,0]}),e.jsx(H,{dataKey:"getnet",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]})}const Ce=[{name:"Bradesco",value:38,color:"#ef4444",icon:"üè¶"},{name:"Ita√∫",value:32,color:"#f59e0b",icon:"üèõÔ∏è"},{name:"Santander",value:20,color:"#3b82f6",icon:"üè¢"},{name:"Outros",value:10,color:"#6b7280",icon:"üíº"}],Is=Ce.map(a=>({name:a.name,value:a.value}));function As(){return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl p-6 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-500/5 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-graphite-400",children:"Bancos"}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üè¶"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsx(We,{children:e.jsx(Ze,{data:Is,cx:"50%",cy:"50%",innerRadius:12,outerRadius:35,dataKey:"value",strokeWidth:0,children:Ce.map((a,r)=>e.jsx(we,{fill:a.color},`cell-${r}`))})})})}),e.jsx("div",{className:"flex-1 space-y-2",children:Ce.map((a,r)=>e.jsxs(f.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.45+r*.08},className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:a.color}}),e.jsx("span",{className:"text-xs text-graphite-300 flex-1",children:a.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-xs font-bold text-white",children:[a.value,"%"]}),e.jsx("span",{className:"text-sm",children:a.icon})]})]},a.name))})]})]})]})}function Ms(){const[a,r]=d.useState(!0),[o,l]=d.useState(!1),[t,i]=d.useState(""),[m]=d.useState("admin"),[c,b]=d.useState("Dashboard"),[u,j]=d.useState("Ano"),[y,g]=d.useState(()=>Ga()),[S,R]=d.useState(""),[w,O]=d.useState(""),[v,C]=d.useState(""),n=window.location.hostname.includes("dev.angrax.com.br")||window.location.hostname.includes("localhost"),[D,k]=d.useState("2025-11"),[p,A]=d.useState("26888098000159"),[P,z]=d.useState([]),{metrics:I,loading:F}=Cs(p,D);d.useEffect(()=>{W();const E=localStorage.getItem("oracle_context_rules");if(E)i(E);else{const Z=`# CONTEXTO DO OR√ÅCULO - ESPECIALISTA EM BPO E AN√ÅLISE DE FLUXO DE CAIXA

## EMPRESA/GRUPO
- Grupo Volpe BPO (CNPJ: 26.888.098/0001-59)
- Atua√ß√£o: Business Process Outsourcing (BPO), terceiriza√ß√£o de processos financeiros, administrativos e de RH
- Segmento: Servi√ßos empresariais B2B
- Principais clientes: Empresas de m√©dio e grande porte nos setores industrial, comercial e de servi√ßos

## EXPERTISE EM FLUXO DE CAIXA
Como especialista em BPO financeiro, o Or√°culo deve fornecer an√°lises profundas sobre:

### 1. GEST√ÉO DE RECEB√çVEIS E PAG√ÅVEIS
- An√°lise de prazos m√©dios de recebimento (PMR) e pagamento (PMP)
- Identifica√ß√£o de gargalos de cobran√ßa e inadimpl√™ncia
- Otimiza√ß√£o do ciclo de caixa operacional (CCC = PME + PMR - PMP)
- Estrat√©gias de antecipa√ß√£o de receb√≠veis e negocia√ß√£o com fornecedores
- An√°lise de aging de contas a receber e a pagar

### 2. PREVISIBILIDADE E PROJE√á√ïES
- Proje√ß√£o de fluxo de caixa para 30, 60 e 90 dias
- An√°lise de sazonalidade e padr√µes hist√≥ricos de receitas e despesas
- Identifica√ß√£o de tend√™ncias de entrada e sa√≠da de caixa
- Simula√ß√£o de cen√°rios (otimista, realista, pessimista)
- Alertas antecipados de necessidade de capital de giro

### 3. CAPITAL DE GIRO E LIQUIDEZ
- C√°lculo e monitoramento do capital de giro l√≠quido (CGL)
- An√°lise de √≠ndices de liquidez (corrente, seca, imediata)
- Identifica√ß√£o de necessidade de capital de giro (NCG)
- Estrat√©gias para otimiza√ß√£o de caixa m√≠nimo operacional
- An√°lise de convers√£o de caixa (cash conversion cycle)

### 4. CATEGORIZA√á√ÉO E AN√ÅLISE DE DESPESAS
- Classifica√ß√£o de despesas por natureza (fixas vs vari√°veis)
- An√°lise de despesas por centro de custo e departamento
- Identifica√ß√£o de despesas anormais ou outliers
- Benchmark de despesas operacionais vs receita bruta
- Oportunidades de redu√ß√£o de custos e renegocia√ß√£o

### 5. GEST√ÉO DE INADIMPL√äNCIA
- An√°lise de taxa de inadimpl√™ncia por cliente e per√≠odo
- Provis√£o para devedores duvidosos (PDD)
- Estrat√©gias de cobran√ßa e recupera√ß√£o de cr√©dito
- An√°lise de risco de cr√©dito de clientes
- Impacto da inadimpl√™ncia no fluxo de caixa projetado

### 6. INVESTIMENTOS E CAPEX
- An√°lise de investimentos em ativo fixo e tecnologia
- C√°lculo de retorno sobre investimento (ROI) e payback
- Impacto de investimentos no fluxo de caixa de curto e longo prazo
- Prioriza√ß√£o de projetos de investimento
- An√°lise de viabilidade financeira de expans√µes

### 7. INDICADORES CHAVE DE PERFORMANCE (KPIs)
- Gera√ß√£o de caixa operacional (Operating Cash Flow)
- Free Cash Flow (FCF = Fluxo Operacional - Capex)
- Burn rate (taxa de queima de caixa)
- Runway (tempo at√© esgotamento do caixa)
- Cash flow margin (margem de fluxo de caixa)
- EBITDA vs Cash Flow (an√°lise de qualidade de lucro)

### 8. COMPLIANCE E AUDITORIA
- Reconcilia√ß√£o banc√°ria e controles internos
- Rastreabilidade de lan√ßamentos e documenta√ß√£o
- Segrega√ß√£o de fun√ß√µes e al√ßadas de aprova√ß√£o
- Auditoria de processos de pagamento e recebimento
- Preven√ß√£o a fraudes e controles antifraude

## FONTES DE DADOS PRIORIT√ÅRIAS
1. DRE (Demonstra√ß√£o de Resultado do Exerc√≠cio) - an√°lise mensal e anual
2. DFC (Demonstra√ß√£o de Fluxo de Caixa) - m√©todo direto e indireto
3. Lan√ßamentos cont√°beis e extratos banc√°rios
4. Aging de contas a receber e a pagar
5. Ordens de pagamento e bordereaux de cobran√ßa
6. Concilia√ß√µes banc√°rias e movimenta√ß√µes financeiras

## TOM E ESTILO
- Linguagem executiva, clara e objetiva
- Foco em insights acion√°veis e recomenda√ß√µes pr√°ticas
- Uso de m√©tricas e KPIs financeiros
- Evid√™ncias baseadas em dados reais do ERP/Contabilidade
- Alertas proativos para riscos e oportunidades
- Compara√ß√µes temporais (MoM, YoY) e benchmarks setoriais

## ESCOPO DE AN√ÅLISE
- Per√≠odo: Dados de 2024 e 2025 (priorizar √∫ltimos 12 meses)
- Compara√ß√µes: M√™s vs m√™s anterior, ano vs ano anterior
- Foco: Grupo Volpe e suas unidades de neg√≥cio
- Granularidade: An√°lise consolidada e por centro de custo
- Alertas: Varia√ß√µes superiores a 15% ou valores at√≠picos

## RECOMENDA√á√ïES ESTRAT√âGICAS
Sempre que relevante, fornecer:
- Diagn√≥stico da situa√ß√£o atual do fluxo de caixa
- Identifica√ß√£o de problemas e oportunidades
- Recomenda√ß√µes de curto prazo (30 dias)
- Estrat√©gias de m√©dio prazo (90 dias)
- Plano de a√ß√£o com prioriza√ß√£o e respons√°veis sugeridos`;localStorage.setItem("oracle_context_rules",Z),i(Z)}},[]);const W=async()=>{try{const E=await T.getCompanies();z(E)}catch(E){console.error("Erro ao carregar empresas:",E)}};return d.useState(()=>{const E=Z=>b(Z.detail);return window.addEventListener("navigate",E),()=>window.removeEventListener("navigate",E)}),e.jsxs("div",{className:`min-h-screen ${a?"dark bg-gradient-to-br from-charcoal-950 via-graphite-950 to-charcoal-900":"bg-gradient-to-br from-gray-50 via-white to-gray-100"} transition-colors duration-500`,children:[e.jsx(Ha,{role:m,onOpenSettings:()=>l(!0)}),e.jsxs("div",{className:"ml-64 flex flex-col min-h-screen",children:[e.jsx(Xa,{isDark:a,onThemeToggle:()=>r(!a),oracleContext:t,currentPeriod:u,onPeriodChange:E=>j(E),selectedMonth:D,onMonthChange:k,selectedCompany:p,onCompanyChange:A,companies:P}),e.jsxs("main",{className:"flex-1 p-8",children:[c==="Dashboard"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[e.jsx(ie,{title:"Receita Total",value:F?"R$ 0":`R$ ${Math.round(I.receitaTotal).toLocaleString("pt-BR")}`,change:F?0:I.receitaChange,trend:I.receitaChange>=0?"up":"down",icon:"TrendingUp",color:"green",sparklineData:[42,48,45,52,58,65,70,68,75,80,85,90]}),e.jsx(ie,{title:"Despesas",value:F?"R$ 0":`R$ ${Math.round(I.despesasTotal).toLocaleString("pt-BR")}`,change:F?0:I.despesasChange,trend:I.despesasChange>=0?"up":"down",icon:"TrendingDown",color:"red",sparklineData:[30,35,40,38,42,45,48,50,52,54,56,58]}),e.jsx(ie,{title:"Limite Di√°rio",value:`R$ ${I.limiteDiario.toLocaleString("pt-BR")}`,change:F?0:I.limiteDiarioProgress,trend:"up",icon:"Wallet",color:"blue",sparklineData:[20,25,30,28,32,35,38,40,42,43,44,45],progress:F?0:I.limiteDiarioProgress}),e.jsx(ie,{title:"Meta de Poupan√ßa",value:`R$ ${I.metaPoupanca.toLocaleString("pt-BR")}`,change:F?0:I.metaPoupancaProgress,trend:"up",icon:"Target",color:"gold",sparklineData:[10,20,35,45,60,70,80,90,95,100,105,110],progress:F?0:I.metaPoupancaProgress})]}),e.jsx("section",{className:"mb-6",children:e.jsx(rs,{period:u,session:y},`overview-${y?"auth":"anon"}`)}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(Oe,{period:u,cnpj:p,selectedMonth:D})}),e.jsx("div",{children:e.jsx(es,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(sa,{})}),e.jsx("div",{children:e.jsx(ss,{cnpj:p,selectedMonth:D})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[e.jsx(Ss,{payments:1248,receipts:892,paymentsChange:12,receiptsChange:8}),e.jsx(Rs,{}),e.jsx(As,{})]})]}),c==="An√°lises"&&e.jsx(is,{selectedMonth:D,selectedCompany:p}),c==="Fluxo de Caixa"&&e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(Oe,{period:u})}),c==="Extrato de Lan√ßamentos"&&e.jsx(ls,{}),c==="Relat√≥rios"&&e.jsx(os,{}),c==="Clientes"&&e.jsx(ns,{}),c==="Not√≠cias"&&e.jsx(js,{cnpj:p,nomeEmpresa:P.find(E=>E.cnpj===p)?.cliente_nome||"Empresa",grupoEmpresarial:P.find(E=>E.cnpj===p)?.grupo_empresarial||"Grupo Empresarial"})]}),e.jsx(vs,{open:o,onClose:()=>l(!1),onUpdateOracleContext:i}),!y&&(n?e.jsx(ws,{open:!y,onClose:()=>{},onLogged:E=>g(E)}):e.jsx("div",{className:"fixed inset-0 z-[90] bg-black/60 backdrop-blur flex items-center justify-center",children:e.jsxs("div",{className:"w-[360px] rounded-xl border border-graphite-800 bg-graphite-900 p-4 space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Entrar"}),v&&e.jsx("div",{className:"text-xs text-red-400",children:v}),e.jsx("input",{value:S,onChange:E=>R(E.target.value),placeholder:"E-mail",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("input",{type:"password",value:w,onChange:E=>O(E.target.value),placeholder:"Senha",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("button",{onClick:async()=>{C("");try{const E=await _a(S,w);if(!E){C(de||"Credenciais inv√°lidas");return}g(E)}catch(E){C(E.message||"Erro ao fazer login")}},className:"px-3 py-1 rounded-sm bg-emerald-400 text-white text-xs",children:"Entrar"})]})}))]})]})}ra.createRoot(document.getElementById("root")).render(e.jsx(le.StrictMode,{children:e.jsx(Ms,{})}));
