import{a as c,j as e,c as te,h as Xe}from"./vendor-react-LKNicB05.js";import{m as u}from"./vendor-motion-B58r-QRs.js";import{L as Ze,C as Qe,N as et,T as W,W as De,F as ce,U as ke,a as tt,B as Re,S as at,b as st,c as rt,X as de,d as Me,e as ot,M as nt,f as he,g as Ie,h as $e,A as Te,i as it,E as lt,j as ct,k as dt,l as mt,m as xt,n as pt,o as Ae,P as ht,p as Oe,V as ut,I as Pe,q as gt,R as ft,r as bt,s as ze,t as Fe,u as Le,v as jt,w as vt,x as Q,y as Nt,z as yt,D as wt,G as Ct,H as St,J as Et,Z as Dt}from"./vendor-ui-E1jgvpgn.js";import{i as V,j as me,k as K,l as Y,m as U,n as H,o as J,p as se,q as re,r as Z,s as kt,t as Rt,u as Mt,v as ue}from"./vendor-recharts-CC_6uSjI.js";import{c as It,a as ge,s as fe,u as $t,b as Tt,m as be}from"./vendor-tremor-DHV9nXN5.js";import{a5 as At,b$ as Ot}from"./vendor-D5S_S527.js";import{t as Pt}from"./vendor-tailwind-merge-DxgBj8Ug.js";import"./vendor-date-fns-B_6AWE7E.js";import"./vendor-tanstack-ofcTeKip.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(r){if(r.ep)return;r.ep=!0;const t=o(r);fetch(r.href,t)}})();const Be="https://xzrmzmcoslomtzkzgskn.supabase.co",oe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI";function _e(){const a=localStorage.getItem("supabase_session");if(!a)return null;try{return JSON.parse(a).access_token||null}catch{return null}}async function X(a,n={}){const o=new URL(`${Be}/rest/v1/${a}`);Object.entries(n.query||{}).forEach(([t,l])=>o.searchParams.set(t,l));const i=_e()||oe,r=await fetch(o.toString(),{headers:{apikey:oe,Authorization:`Bearer ${i}`,Accept:"application/json"}});if(!r.ok)throw new Error(`Supabase GET ${a} failed: ${r.status}`);return r.json()}async function je(a,n){const o=`${Be}/rest/v1/${a}`,i=_e()||oe,r=await fetch(o,{method:"POST",headers:{apikey:oe,Authorization:`Bearer ${i}`,"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify(n)});if(!r.ok)throw new Error(`Supabase POST ${a} failed: ${r.status}`);return r.json()}const $={restGet:X,restPost:je,getCompanies:async()=>{const a=await X("dre_entries",{query:{select:"company_cnpj,company_nome",limit:"1000"}}),n=await X("cashflow_entries",{query:{select:"company_cnpj,company_nome",limit:"1000"}}),o=new Map;return[...a,...n].forEach(i=>{const r=i.company_cnpj;o.has(r)||o.set(r,{cnpj:r,cliente_nome:i.company_nome,grupo_empresarial:i.company_nome.includes("VOLPE")?"Grupo Volpe":"Outros"})}),Array.from(o.values()).sort((i,r)=>i.cnpj.localeCompare(r.cnpj))},getDRE:async a=>{const n=(a||"").replace(/^0+/,""),o=await X("dre_entries",{query:{company_cnpj:`eq.${n}`,select:"*",limit:"5000"}});return Array.isArray(o)?(console.log("ðŸ” getDRE recebeu",o.length,"registros para CNPJ",n),o.map(i=>({data:i.date||i.data,conta:i.account??i.conta??"Conta",natureza:i.nature??i.natureza??null,valor:Number(i.amount??i.valor??0)}))):[]},getDFC:async a=>{const n=(a||"").replace(/^0+/,""),o=await X("cashflow_entries",{query:{company_cnpj:`eq.${n}`,select:"*",limit:"5000"}});if(!Array.isArray(o))return[];if(console.log("ðŸ” getDFC recebeu",o.length,"registros para CNPJ",n),o.length&&(o[0].entrada!==void 0||o[0].saida!==void 0))return o;const i=[...o].sort((t,l)=>new Date(t.date||t.data).getTime()-new Date(l.date||l.data).getTime());let r=0;return i.map(t=>{const l=String(t.kind||"").toLowerCase()==="in"?Number(t.amount||0):0,d=String(t.kind||"").toLowerCase()==="out"?Number(t.amount||0):0;return r+=l-d,{data:t.date||t.data,descricao:t.category||t.descricao||"LanÃ§amento",entrada:l,saida:d,saldo:r,id:t.id??void 0}})},log:a=>je("app_logs",{...a,ts:new Date().toISOString()})};let ae="";async function Ge(a,n){const r=await fetch("https://xzrmzmcoslomtzkzgskn.supabase.co/auth/v1/token?grant_type=password",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI",Accept:"application/json"},body:JSON.stringify({email:a,password:n})});if(!r.ok){try{const t=await r.json();ae=String(t.error_description||t.error||`HTTP ${r.status}`)}catch{ae=`HTTP ${r.status}`}return null}return ae="",r.json()}async function zt(a,n){try{const o=await Ge(a,n);if(!o||!o.access_token)return null;localStorage.setItem("supabase_session",JSON.stringify(o));const i={id:o.user?.id||"unknown",email:a},r={id:i.id,email:i.email||a,name:(i.email||a).split("@")[0],role:"cliente",defaultCompany:null,mode:"supabase",accessToken:o.access_token};return localStorage.setItem("session_user",JSON.stringify(r)),r}catch{return null}}function Ft(){const a=localStorage.getItem("session_user");return a?JSON.parse(a):null}function Lt(){localStorage.removeItem("session_user"),localStorage.removeItem("supabase_session")}const Bt=[{icon:Ze,label:"Dashboard",active:!0},{icon:Qe,label:"AnÃ¡lises",active:!1},{icon:et,label:"NotÃ­cias",active:!1},{icon:W,label:"Fluxo de Caixa",active:!1},{icon:De,label:"Extrato de LanÃ§amentos",active:!1},{icon:ce,label:"RelatÃ³rios",active:!1},{icon:ke,label:"Clientes",active:!1}];function _t(a){return[{icon:Re,label:"NotificaÃ§Ãµes"},{icon:at,label:"ConfiguraÃ§Ãµes"},{icon:ce,label:"Gerenciamento â€¢ Logs",adminOnly:!0},{icon:st,label:"Sair"}].filter(o=>!o.adminOnly||a==="admin")}function Gt({onOpenSettings:a,onOpenLogs:n,role:o="cliente"}){const[i,r]=c.useState(null);return e.jsxs(u.aside,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"fixed left-0 top-0 h-screen w-64 bg-gradient-to-b from-charcoal-950 via-graphite-950 to-charcoal-900 border-r border-graphite-900 flex flex-col z-50 pattern-soft",children:[e.jsx("div",{className:"p-6 border-b border-graphite-900 flex justify-center",children:e.jsx(u.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:e.jsx("img",{src:"/finapp-logo.png",alt:"FinApp Logo",className:"h-16 w-auto object-contain"})})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:Bt.map((t,l)=>e.jsxs(u.button,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*l},onHoverStart:()=>r(l),onHoverEnd:()=>r(null),onClick:()=>{if(t.label==="RelatÃ³rios"){const d=new CustomEvent("navigate",{detail:"RelatÃ³rios"});window.dispatchEvent(d)}if(t.label==="Clientes"){const d=new CustomEvent("navigate",{detail:"Clientes"});window.dispatchEvent(d)}if(t.label==="Dashboard"||t.label==="AnÃ¡lises"||t.label==="NotÃ­cias"||t.label==="Fluxo de Caixa"||t.label==="Extrato de LanÃ§amentos"){const d=new CustomEvent("navigate",{detail:t.label});window.dispatchEvent(d)}},className:`
              w-full flex items-center gap-3 px-4 py-2.5 rounded-xl
              transition-all duration-200 group relative
              ${t.active?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-900"}
            `,children:[t.active&&e.jsx(u.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gold-500 rounded-xl",transition:{type:"spring",duration:.6}}),e.jsx(u.span,{whileHover:{scale:1.08,rotate:1},className:"relative z-10",children:e.jsx(t.icon,{className:`w-4 h-4 ${t.active?"text-white":""}`})}),e.jsx("span",{className:"text-sm font-medium relative z-10",children:t.label}),i===l&&!t.active&&e.jsx(u.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},className:"ml-auto",children:e.jsx(tt,{className:"w-4 h-4"})})]},t.label))}),e.jsx("div",{className:"p-4 border-t border-graphite-900 space-y-1",children:_t(o).map((t,l)=>e.jsxs(u.button,{whileHover:{x:5},whileTap:{scale:.98},onClick:()=>{t.label==="ConfiguraÃ§Ãµes"&&a&&a(),t.label==="Gerenciamento â€¢ Logs"&&n&&n(),t.label==="Sair"&&(Lt(),window.dispatchEvent(new CustomEvent("logout")),location.reload())},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-graphite-400 hover:text-white hover:bg-graphite-900 transition-all duration-200",children:[e.jsx(t.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.label))}),e.jsx(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"p-4 border-t border-graphite-900",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 transition-all cursor-pointer",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gold-400 to-gold-600 flex items-center justify-center text-white font-bold",children:"AC"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:"Admin BPO"}),e.jsx("p",{className:"text-xs text-graphite-400 truncate",children:"admin@bpo.com"})]})]})})]})}const Vt={info:(a,n={})=>$.log({level:"info",service:"UI",message:a,...n}),warn:(a,n={})=>$.log({level:"warn",service:"UI",message:a,...n}),error:(a,n={})=>$.log({level:"error",service:"UI",message:a,...n})};function Ht({open:a,onClose:n,contextRules:o=""}){const[i,r]=c.useState(""),[t,l]=c.useState([]),d=c.useRef(null);if(c.useEffect(()=>{a&&d.current&&(d.current.scrollTop=d.current.scrollHeight)},[a,t]),!a)return null;const y=async()=>{const g=i.trim();if(!g)return;const x=Date.now();l(h=>[...h,{role:"user",content:g,ts:x}]),r("");const C=`Consulta: ${g}

Regra: ${o?o.slice(0,160)+"â€¦":"padrÃ£o executiva"}

Resposta: Em breve, integrado ao Supabase / ERPs.`;l(h=>[...h,{role:"assistant",content:C,ts:Date.now()}]);try{await Vt.info("oracle_query",{endpoint:"oracle",latencyMs:0})}catch{}};return e.jsx(u.div,{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm",children:e.jsxs(u.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"absolute right-8 top-20 w-[520px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"OrÃ¡culo de IA â€¢ Respostas concisas"})]}),e.jsx("button",{onClick:n,className:"text-muted-foreground hover:text-foreground",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:d,className:"max-h-[48vh] overflow-y-auto p-4 space-y-3",children:[t.map((g,x)=>e.jsx("div",{className:g.role==="user"?"text-foreground":"text-muted-foreground",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:g.content})},x)),t.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"FaÃ§a uma pergunta rÃ¡pida sobre lanÃ§amentos, DRE/DFC, fluxo ou insights."})]}),e.jsxs("div",{className:"p-4 border-t border-border flex items-center gap-2",children:[e.jsx("input",{value:i,onChange:g=>r(g.target.value),placeholder:"Digite sua perguntaâ€¦",className:"flex-1 bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"}),e.jsx("button",{onClick:y,className:"px-3 py-2 rounded-xl bg-gold-500 text-white text-sm hover:bg-gold-600 focus-visible-ring",children:"Enviar"})]})]})})}function Jt({onThemeToggle:a,isDark:n=!0,oracleContext:o="",currentPeriod:i="Ano",onPeriodChange:r,selectedMonth:t="2025-11",onMonthChange:l,selectedCompany:d="26888098000159",onCompanyChange:y,companies:g=[]}){const[x,C]=c.useState(3),[h,b]=c.useState(!1),p=[{value:"2025-01",label:"Janeiro 2025"},{value:"2025-02",label:"Fevereiro 2025"},{value:"2025-03",label:"MarÃ§o 2025"},{value:"2025-04",label:"Abril 2025"},{value:"2025-05",label:"Maio 2025"},{value:"2025-06",label:"Junho 2025"},{value:"2025-07",label:"Julho 2025"},{value:"2025-08",label:"Agosto 2025"},{value:"2025-09",label:"Setembro 2025"},{value:"2025-10",label:"Outubro 2025"},{value:"2025-11",label:"Novembro 2025"},{value:"2025-12",label:"Dezembro 2025"}];return e.jsxs(e.Fragment,{children:[e.jsxs(u.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"sticky top-0 z-40 bg-charcoal-950/80 backdrop-blur-xl border-b border-graphite-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("div",{className:"flex-1 max-w-xl",children:e.jsxs("div",{className:"relative group",children:[e.jsx(Me,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-graphite-400 group-focus-within:text-gold-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar transaÃ§Ãµes, clientes, relatÃ³rios...",className:`
                w-full pl-12 pr-4 py-3 
                bg-graphite-900 
                border border-graphite-800 
                rounded-2xl 
                text-white placeholder-graphite-500
                focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20
                transition-all duration-200
              `})]})}),e.jsxs("div",{className:"flex items-center gap-3 ml-6",children:[g.length>0&&e.jsxs("select",{value:d,onChange:N=>y?.(N.target.value),className:"px-4 py-2 rounded-xl bg-graphite-900 border border-graphite-800 text-white text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 transition-all",children:[e.jsx("option",{value:"",children:"Todas as Empresas"}),g.map(N=>e.jsx("option",{value:N.cnpj,children:N.cliente_nome},N.cnpj))]}),e.jsx("select",{value:t,onChange:N=>l?.(N.target.value),className:"px-4 py-2 rounded-xl bg-graphite-900 border border-graphite-800 text-white text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 transition-all",children:p.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))}),e.jsx(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(!0),className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group","aria-label":"Abrir OrÃ¡culo de IA",children:e.jsx(ot,{className:"w-5 h-5"})}),e.jsxs(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group",children:[e.jsx(Re,{className:"w-5 h-5"}),x>0&&e.jsx(u.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-gold-500 rounded-full text-xs font-bold text-white flex items-center justify-center shadow-glow-sm",children:x})]}),e.jsxs(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all relative overflow-hidden group",children:[e.jsx(u.div,{initial:!1,animate:{rotate:n?0:180,scale:n?1:0},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(nt,{className:"w-5 h-5"})}),e.jsx(u.div,{initial:!1,animate:{rotate:n?180:0,scale:n?0:1},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(he,{className:"w-5 h-5"})}),e.jsx("div",{className:"opacity-0",children:e.jsx(he,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"h-8 w-px bg-graphite-800"}),e.jsxs("div",{className:"hidden lg:flex items-center gap-6 pl-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"Saldo Total"}),e.jsx("p",{className:"text-sm font-bold text-white",children:"R$ 2.847.920,00"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"VariaÃ§Ã£o"}),e.jsx("p",{className:"text-sm font-bold text-emerald-400",children:"+12.5%"})]})]})]})]}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(u.h1,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},className:"text-2xl font-bold text-white font-display",children:"Dashboard Financeiro"}),e.jsx(u.p,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"text-sm text-graphite-400 mt-1",children:"VisÃ£o geral â€¢ Atualizado agora hÃ¡ pouco"})]}),e.jsx(u.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"flex items-center gap-2 bg-graphite-900 rounded-xl p-1",children:["Dia","Semana","MÃªs","Ano"].map(N=>e.jsx("button",{onClick:()=>r&&r(N),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i===N?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-800"}`,children:N},N))})]})})]}),e.jsx(Ht,{open:h,onClose:()=>b(!1),contextRules:o})]})}const qt={green:{bg:"from-emerald-500/20 to-emerald-600/10",icon:"bg-emerald-500/20 text-emerald-400",text:"text-emerald-400",border:"border-emerald-500/20"},red:{bg:"from-red-500/20 to-red-600/10",icon:"bg-red-500/20 text-red-400",text:"text-red-400",border:"border-red-500/20"},gold:{bg:"from-gold-500/20 to-gold-600/10",icon:"bg-gold-500/20 text-gold-400",text:"text-gold-400",border:"border-gold-500/20"},blue:{bg:"from-blue-500/20 to-blue-600/10",icon:"bg-blue-500/20 text-blue-400",text:"text-blue-400",border:"border-blue-500/20"}},Kt={TrendingUp:W,TrendingDown:$e,Wallet:De,Target:Ie};function ee({title:a,value:n,change:o,icon:i,trend:r="up",color:t="gold",delay:l=0,progress:d,sparklineData:y}){const g=qt[t],x=r==="up",C=Kt[i]||W;return e.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:l,duration:.5,ease:"easeOut"},whileHover:{y:-4,scale:1.02},className:"group relative",children:[e.jsx(u.div,{className:`absolute inset-0 bg-gradient-to-br ${g.bg} rounded-3xl blur-xl opacity-0 group-hover:opacity-60 transition-opacity duration-500`}),e.jsxs("div",{className:"relative neomorphic neomorphic-hover rounded-3xl p-6 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-graphite-400 font-medium mb-2",children:a}),e.jsx(u.h3,{initial:{scale:.9},animate:{scale:1},transition:{delay:l+.2},className:"text-3xl font-bold text-white font-display",children:n})]}),e.jsx(u.div,{whileHover:{rotate:15,scale:1.1},className:`p-3 rounded-2xl bg-gradient-to-br ${g.bg} border ${g.border}`,children:e.jsx(C,{className:"w-6 h-6 text-current",style:{color:g.icon.split(" ")[1].replace("text-","")}})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs(u.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:l+.3},className:`flex items-center gap-1 px-3 py-1.5 rounded-lg ${x?"bg-emerald-500/10":"bg-red-500/10"}`,children:[x?e.jsx(Te,{className:"w-4 h-4 text-emerald-400"}):e.jsx(it,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:`text-sm font-semibold ${x?"text-emerald-400":"text-red-400"}`,children:[o,"%"]})]}),e.jsx("span",{className:"text-sm text-graphite-400",children:"vs mÃªs anterior"})]}),y&&e.jsx("div",{className:"flex items-end gap-1 h-12 mt-4",children:y.map((h,b)=>{const p=Math.max(...y),N=h/p*100;return e.jsx(u.div,{initial:{height:0},animate:{height:`${N}%`},transition:{delay:l+.5+b*.02,duration:.3},className:`flex-1 bg-gradient-to-t ${g.bg} rounded-sm opacity-70 hover:opacity-100 transition-opacity`},b)})}),d!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-graphite-400 mb-2",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{className:g.text,children:[d,"%"]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(u.div,{initial:{width:0},animate:{width:`${d}%`},transition:{delay:l+.7,duration:.8,ease:"easeOut"},className:`h-full bg-gradient-to-r ${g.bg} relative overflow-hidden`,children:e.jsx(u.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{repeat:1/0,duration:1.5,ease:"linear"}})})})]})]})]})}const Yt=({active:a,payload:n,label:o})=>a&&n&&n.length?e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-charcoal-900/95 backdrop-blur-xl border border-graphite-800 rounded-2xl p-4 shadow-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-white mb-3",children:o}),n.map((i,r)=>e.jsxs("div",{className:"flex items-center justify-between gap-6 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.color}}),e.jsx("span",{className:"text-xs text-graphite-400",children:i.name})]}),e.jsx("span",{className:"text-sm font-bold text-white",children:i.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]},r))]}):null;function ve({period:a="Ano",cnpj:n="26888098000159",selectedMonth:o}){const[i,r]=c.useState([{month:"Jan",receita:0,despesa:0,saldo:0},{month:"Fev",receita:0,despesa:0,saldo:0},{month:"Mar",receita:0,despesa:0,saldo:0},{month:"Abr",receita:0,despesa:0,saldo:0},{month:"Mai",receita:0,despesa:0,saldo:0},{month:"Jun",receita:0,despesa:0,saldo:0},{month:"Jul",receita:0,despesa:0,saldo:0},{month:"Ago",receita:0,despesa:0,saldo:0},{month:"Set",receita:0,despesa:0,saldo:0},{month:"Out",receita:0,despesa:0,saldo:0},{month:"Nov",receita:0,despesa:0,saldo:0},{month:"Dez",receita:0,despesa:0,saldo:0}]);c.useEffect(()=>{t()},[a,n,o]);const t=async()=>{try{const l=await $.getDRE(n);if(!l||l.length===0)return;const d=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],y={},[g]=o?o.split("-").map(Number):[new Date().getFullYear()],x=g;d.forEach(h=>{y[h]={month:h,receita:0,despesa:0,saldo:0}}),l.forEach(h=>{const b=new Date(h.data);if(b.getFullYear()!==x)return;const p=b.getMonth(),N=d[p];h.natureza==="receita"?y[N].receita+=h.valor:h.natureza==="despesa"&&(y[N].despesa+=Math.abs(h.valor))}),Object.values(y).forEach(h=>{h.saldo=h.receita-h.despesa});const C=d.map(h=>y[h]);r(C)}catch(l){console.error("Erro ao carregar dados de fluxo de caixa:",l)}};return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Receitas vs Despesas (2024)"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Receita"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Despesa"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Saldo"})]})]})]}),e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"h-80",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(me,{data:a==="Ano"?i:a==="MÃªs"?i.slice(-4):a==="Semana"?i.slice(-2):i.slice(-1),margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorDespesa",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorSaldo",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ff7a00",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#ff7a00",stopOpacity:0})]})]}),e.jsx(K,{strokeDasharray:"3 3",stroke:"#2a2a2a",opacity:.3}),e.jsx(Y,{dataKey:"month",stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1}),e.jsx(U,{stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1,tickFormatter:l=>l>=1e6?`R$ ${(l/1e6).toFixed(1)}M`:l>=1e3?`R$ ${(l/1e3).toFixed(0)}k`:`R$ ${l}`}),e.jsx(H,{content:e.jsx(Yt,{}),cursor:{stroke:"#ff7a00",strokeWidth:1}}),e.jsx(J,{type:"monotone",dataKey:"receita",name:"Receita",stroke:"#10b981",strokeWidth:2,fill:"url(#colorReceita)",animationDuration:1500}),e.jsx(J,{type:"monotone",dataKey:"despesa",name:"Despesa",stroke:"#ef4444",strokeWidth:2,fill:"url(#colorDespesa)",animationDuration:1500}),e.jsx(J,{type:"monotone",dataKey:"saldo",name:"Saldo",stroke:"#ff7a00",strokeWidth:3,fill:"url(#colorSaldo)",animationDuration:1500})]})})}),e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8},className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-graphite-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Receita"}),e.jsx("p",{className:"text-lg font-bold text-emerald-400",children:"R$ 8.490.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Despesa"}),e.jsx("p",{className:"text-lg font-bold text-red-400",children:"R$ 4.780.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Saldo LÃ­quido"}),e.jsx("p",{className:"text-lg font-bold text-gold-400",children:"R$ 3.710.000"})]})]})]})}function Ut(){const[a,n]=c.useState(!1),[o,i]=c.useState(!0);return e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"neomorphic rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display mb-1",children:"CartÃ£o Corporativo"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Limite e saldo disponÃ­vel"})]}),e.jsxs(u.div,{animate:{rotateY:a?180:0},transition:{duration:.6,type:"spring"},className:"relative preserve-3d cursor-pointer",onClick:()=>n(!a),style:{transformStyle:"preserve-3d"},children:[e.jsx(u.div,{className:"backface-hidden relative",style:{backfaceVisibility:"hidden"},children:e.jsxs("div",{className:"bg-gradient-to-br from-gold-500 via-gold-600 to-gold-700 rounded-2xl p-8 shadow-2xl shadow-gold-500/20 relative overflow-hidden group",children:[e.jsx(u.div,{className:"absolute inset-0 opacity-20",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,ease:"linear"},style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),e.jsx(u.div,{className:"absolute -inset-1 bg-gradient-to-r from-gold-400 to-gold-600 rounded-3xl blur-xl opacity-0 group-hover:opacity-50 transition-opacity duration-500",style:{zIndex:-1}}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 font-medium mb-1",children:"Conta Empresarial"}),e.jsx(u.p,{className:"text-2xl font-bold text-white font-display",animate:{opacity:o?1:0},children:o?"R$ 2.847.920,00":"â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsx(u.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:r=>{r.stopPropagation(),i(!o)},className:"p-2 rounded-xl bg-white/10 backdrop-blur-sm hover:bg-white/20 transition-colors",children:o?e.jsx(lt,{className:"w-5 h-5 text-white"}):e.jsx(ct,{className:"w-5 h-5 text-white"})})]}),e.jsxs(u.div,{whileHover:{scale:1.05,rotate:5},className:"w-12 h-10 rounded-lg bg-gradient-to-br from-yellow-200 to-yellow-400 mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-1 border border-yellow-600/30 rounded-md"}),e.jsx("div",{className:"absolute inset-2 border border-yellow-600/20 rounded-sm"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-white text-lg font-mono tracking-wider",children:"â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 8492"}),e.jsx(u.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:r=>r.stopPropagation(),className:"p-1.5 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(dt,{className:"w-4 h-4 text-white"})})]})}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Titular"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"BPO FINANCIAL LTDA"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Validade"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"12/28"})]}),e.jsxs(u.div,{whileHover:{scale:1.1},className:"flex flex-col items-end",children:[e.jsx(mt,{className:"w-8 h-8 text-white/90"}),e.jsx("span",{className:"text-[10px] text-white/70 font-bold mt-1",children:"CORPORATE"})]})]})]})}),e.jsx(u.div,{className:"absolute inset-0 backface-hidden",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:e.jsxs("div",{className:"bg-gradient-to-br from-charcoal-900 to-charcoal-950 rounded-3xl p-6 shadow-2xl h-full",children:[e.jsx("div",{className:"w-full h-12 bg-gradient-to-r from-graphite-900 to-graphite-800 mt-4 mb-6 rounded-lg"}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"CVV"}),e.jsx("p",{className:"text-lg font-mono font-bold text-white",children:"â€¢â€¢â€¢"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"CÃ³digo de SeguranÃ§a"}),e.jsx("p",{className:"text-xs text-white/50",children:"NÃ£o compartilhe"})]})]})}),e.jsxs("div",{className:"space-y-3 text-xs text-white/60",children:[e.jsx("p",{children:"Este cartÃ£o Ã© de uso exclusivo corporativo"}),e.jsx("p",{children:"Em caso de perda, bloqueie imediatamente"}),e.jsx("p",{className:"text-gold-400 font-semibold",children:"Suporte: 0800 XXX XXXX"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-white/50",children:"MastercardÂ® Corporate"}),e.jsx("span",{className:"text-xs text-white/50",children:"ID: #BPO-2024-8492"})]})]})})]}),e.jsx(u.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-center text-xs text-graphite-400 mt-3",children:"Clique no cartÃ£o para visualizar o verso"})]})}const Wt={success:{label:"ConcluÃ­do",color:"emerald",bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20"},pending:{label:"Pendente",color:"gold",bg:"bg-gold-500/10",text:"text-gold-400",border:"border-gold-500/20"},failed:{label:"Falhou",color:"red",bg:"bg-red-500/10",text:"text-red-400",border:"border-red-500/20"}};function Ve(){const[a,n]=c.useState([]),[o,i]=c.useState(""),[r,t]=c.useState([]),[l,d]=c.useState(!0),[y,g]=c.useState("");return c.useEffect(()=>{(async()=>{try{const x=await $.getCompanies();n(x||[]);const C=(x||[]).find(p=>String(p.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,h=(x||[]).find(p=>String(p.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,b=C||h||x&&x[0]?.cnpj||"";i(b)}catch{g("Falha ao carregar empresas")}})()},[]),c.useEffect(()=>{o&&(d(!0),g(""),(async()=>{try{const x=await $.getDFC(o);t(Array.isArray(x)?x:[])}catch{g("Falha ao carregar extrato")}finally{d(!1)}})())},[o]),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-graphite-800/30",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display",children:"TransaÃ§Ãµes Recentes"}),e.jsx("p",{className:"text-sm text-graphite-400 mt-1",children:"Ãšltimas movimentaÃ§Ãµes financeiras"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-graphite-400"}),e.jsx("input",{type:"text",placeholder:"Buscar...",className:"pl-9 pr-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white placeholder-graphite-500 focus:outline-none focus:border-gold-500 transition-all w-48"})]}),e.jsxs("select",{className:"px-4 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all",children:[e.jsx("option",{children:"Todos"}),e.jsx("option",{children:"Hoje"}),e.jsx("option",{children:"Esta Semana"}),e.jsx("option",{children:"Este MÃªs"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-graphite-800",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"DescriÃ§Ã£o"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"AÃ§Ãµes"})]})}),e.jsxs("tbody",{children:[(l?[]:r).map((x,C)=>{const h=(x.entrada||0)-(x.saida||0),b=h>=0?"income":"expense",p=Wt[b==="income"?"success":"pending"];return e.jsxs(u.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+C*.05},whileHover:{backgroundColor:"rgba(255, 122, 0, 0.03)"},className:"border-b border-graphite-800/50 last:border-0 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u.div,{whileHover:{scale:1.1,rotate:5},className:"w-10 h-10 rounded-xl bg-gradient-to-br from-graphite-800 to-graphite-900 flex items-center justify-center text-xl group-hover:shadow-lg transition-shadow",children:"ðŸ’¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:x.descricao||"LanÃ§amento"}),e.jsx("p",{className:"text-xs text-graphite-400",children:b==="income"?"Entrada":"SaÃ­da"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-graphite-300",children:x.data||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded-lg ${b==="income"?"bg-emerald-500/10":"bg-red-500/10"}`,children:b==="income"?e.jsx(Te,{className:"w-4 h-4 text-emerald-400"}):e.jsx(xt,{className:"w-4 h-4 text-red-400"})}),e.jsxs("span",{className:`text-sm font-bold ${b==="income"?"text-emerald-400":"text-red-400"}`,children:[h>0?"+":"",Number(h).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(u.span,{whileHover:{scale:1.05},className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold border ${p.bg} ${p.text} ${p.border}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${p.text.replace("text-","bg-")} mr-2`}),Number(x.saldo||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(u.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 rounded-lg hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all",children:e.jsx(pt,{className:"w-4 h-4"})})})]},x.id||C)}),!l&&r.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-graphite-400",children:["Nenhum lanÃ§amento encontrado para ",o||"empresa"]})})]})]})}),e.jsxs("div",{className:"p-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-graphite-400",children:[l?"Carregando...":`Mostrando ${r.length} lanÃ§amentos`," ",o&&e.jsxs("span",{className:"text-white font-semibold",children:["â€¢ ",o]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:o,onChange:x=>i(x.target.value),className:"px-4 py-2 bg-graphite-800 text-white rounded-xl text-sm",children:[e.jsx("option",{value:"",children:"Selecione CNPJ"}),a.map(x=>e.jsxs("option",{value:x.cnpj,children:[x.cliente_nome," â€¢ ",x.cnpj]},x.cnpj))]})})]})]})}function Xt({cnpj:a="26888098000159",selectedMonth:n}){const[o,i]=c.useState([{name:"ServiÃ§os BPO",value:58e4,color:"#ff7a00",percentage:45},{name:"Consultoria",value:32e4,color:"#10b981",percentage:25},{name:"Software",value:25e4,color:"#3b82f6",percentage:20},{name:"Outros",value:13e4,color:"#8b5cf6",percentage:10}]),[r,t]=c.useState(73),[l,d]=c.useState(8.2);c.useEffect(()=>{y()},[a,n]);const y=async()=>{try{const x=await $.getDRE(a);if(!x||x.length===0)return;const C={},[h]=n?n.split("-").map(Number):[new Date().getFullYear()],b=h;x.forEach(w=>{if(new Date(w.data).getFullYear()===b&&w.natureza==="receita"&&w.valor>0){const v=w.conta.split("-")[0].substring(0,1),R=v==="3"?"ServiÃ§os BPO":v==="4"?"Consultoria":v==="5"?"Software":"Outros";C[R]||(C[R]=0),C[R]+=w.valor}});const p=Object.values(C).reduce((w,D)=>w+D,0),N=["#ff7a00","#10b981","#3b82f6","#8b5cf6"],k=Object.entries(C).map(([w,D],v)=>({name:w,value:D,color:N[v]||"#8b5cf6",percentage:Math.round(D/p*100)})).sort((w,D)=>D.value-w.value);if(k.length>0){i(k);const D=Math.round(p/8e5*100);t(Math.min(D,100))}}catch(x){console.error("Erro ao carregar dados de receita:",x)}},g=o.reduce((x,C)=>x+C.value,0);return e.jsxs(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.3},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"DistribuiÃ§Ã£o de Receita"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Por categoria de serviÃ§o"})]}),e.jsxs("div",{className:"relative flex items-center justify-center mb-8",children:[e.jsxs("svg",{width:"280",height:"180",viewBox:"0 0 280 180",className:"transform -rotate-0",children:[e.jsx("path",{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"#2a2a2a",strokeWidth:"24",strokeLinecap:"round"}),e.jsx(u.path,{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"24",strokeLinecap:"round",strokeDasharray:"314",initial:{strokeDashoffset:314},animate:{strokeDashoffset:314-314*r/100},transition:{duration:2,ease:"easeOut"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981"}),e.jsx("stop",{offset:"50%",stopColor:"#ff7a00"}),e.jsx("stop",{offset:"100%",stopColor:"#ef4444"})]})})]}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/4 text-center",children:e.jsxs(u.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},children:[e.jsxs("p",{className:"text-4xl font-bold text-white font-display mb-1",children:[r,"%"]}),e.jsx("p",{className:"text-xs text-graphite-400",children:"Meta Atingida"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-2",children:[e.jsx(W,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("span",{className:"text-sm font-semibold text-emerald-400",children:["+",l.toFixed(1),"%"]})]})]})})]}),e.jsx("div",{className:"space-y-3",children:o.map((x,C)=>e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+C*.1},className:"group/item",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u.div,{whileHover:{scale:1.2},className:"w-3 h-3 rounded-full",style:{backgroundColor:x.color}}),e.jsx("span",{className:"text-sm text-graphite-300 group-hover/item:text-white transition-colors",children:x.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:x.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})}),e.jsxs("span",{className:"text-xs text-graphite-400 ml-2",children:["(",x.percentage,"%)"]})]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(u.div,{initial:{width:0},animate:{width:`${x.percentage}%`},transition:{delay:1+C*.1,duration:.8,ease:"easeOut"},className:"h-full rounded-full relative",style:{backgroundColor:x.color},children:e.jsx(u.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear",delay:1.5+C*.1},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"})})})]},x.name))}),e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},className:"mt-6 pt-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-graphite-400",children:"Total de Receita"}),e.jsx("span",{className:"text-lg font-bold text-gold-400",children:g.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]})]})}function Zt(a){return["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][a.getMonth()]}function Qt({period:a="Ano",session:n}){const[o,i]=c.useState([]),[r,t]=c.useState(""),[l,d]=c.useState([]),[y,g]=c.useState(!0),[x,C]=c.useState("");c.useEffect(()=>{(async()=>{try{const w=await $.getCompanies();i(w||[]),t("26888098000159")}catch{C("Falha ao carregar empresas")}})()},[]),c.useEffect(()=>{r&&(g(!0),(async()=>{try{const w=await $.getDFC(r);d(Array.isArray(w)?w:[])}finally{g(!1)}})())},[r]);const{receitaTotal:h,despesasTotal:b,lucro:p}=c.useMemo(()=>{const w=l.reduce((D,v)=>(D.receitaTotal+=Number(v.entrada||0),D.despesasTotal+=Number(v.saida||0),D),{receitaTotal:0,despesasTotal:0});return{...w,lucro:w.receitaTotal-w.despesasTotal}},[l]),N=c.useMemo(()=>{const w=new Map;l.forEach(v=>{const R=v.data?new Date(v.data):new Date,T=Zt(R),M=w.get(T)||{month:T,receita:0,despesas:0};M.receita+=Number(v.entrada||0),M.despesas+=Number(v.saida||0),w.set(T,M)});const D=Array.from(w.values());return a==="Ano"?D:a==="MÃªs"?D.slice(-1):a==="Semana"?D.slice(-1).map(v=>({...v,month:"Semana"})):D.slice(-1).map(v=>({...v,month:"Hoje"}))},[l,a]),k=[{name:"Receita",value:h,delta:0},{name:"Despesas",value:b,delta:0},{name:"Lucro",value:p,delta:0}];return e.jsxs(It,{numItemsSm:1,numItemsMd:2,numItemsLg:3,className:"gap-6",children:[k.map(w=>e.jsxs(ge,{decoration:"top",decorationColor:"orange",className:"rounded-3xl bg-card border border-border shadow-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(fe,{children:w.name}),e.jsxs($t,{deltaType:w.delta>=0?"moderateIncrease":"moderateDecrease",children:[w.delta,"%"]})]}),e.jsxs(Tt,{children:["R$ ",Number(w.value).toLocaleString("pt-BR")]}),e.jsx(be,{className:"mt-2 text-sm text-muted-foreground",children:y?"Carregando...":`Empresa ${r||""}`})]},w.name)),e.jsxs(ge,{className:"rounded-3xl col-span-1 md:col-span-2 bg-card border border-border shadow-card",children:[e.jsx(fe,{children:"EvoluÃ§Ã£o Mensal"}),e.jsx(be,{className:"text-sm text-muted-foreground",children:"Receita vs Despesas"}),e.jsx("div",{className:"mt-4 h-56",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(se,{data:N,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"barReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#ff7a00",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#ff7a00",stopOpacity:.4})]}),e.jsxs("linearGradient",{id:"barDespesas",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#38bdf8",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#38bdf8",stopOpacity:.4})]}),e.jsx("filter",{id:"barShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3","flood-color":"#000","flood-opacity":"0.35"})})]}),e.jsx(K,{stroke:"rgba(200,200,200,0.12)",vertical:!1}),e.jsx(Y,{dataKey:"month",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(U,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},tickFormatter:w=>`R$ ${Number(w).toLocaleString("pt-BR")}`}),e.jsx(H,{contentStyle:{background:"#11161C",border:"1px solid #1B232C"},formatter:w=>`R$ ${Number(w).toLocaleString("pt-BR")}`}),e.jsx(re,{}),e.jsx(Z,{dataKey:"receita",name:"Receita",fill:"url(#barReceita)",radius:[8,8,0,0],filter:"url(#barShadow)"}),e.jsx(Z,{dataKey:"despesas",name:"Despesas",fill:"url(#barDespesas)",radius:[8,8,0,0],filter:"url(#barShadow)"})]})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:r,onChange:w=>t(w.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),o.map(w=>e.jsxs("option",{value:w.cnpj,children:[w.cliente_nome," â€¢ ",w.cnpj]},w.cnpj))]})]})]})]})}function ea(){const[a,n]=c.useState([]),[o,i]=c.useState(""),[r,t]=c.useState(0),[l,d]=c.useState(0),[y,g]=c.useState(!0),[x,C]=c.useState("");return c.useEffect(()=>{(async()=>{try{const h=await $.getCompanies();n(h||[]);const b=(h||[]).find(k=>String(k.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,p=(h||[]).find(k=>String(k.cliente_nome||"").toLowerCase().includes("volpe")||String(k.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,N=b||p||h&&h[0]?.cnpj||"";i(N)}catch{C("Falha ao carregar empresas")}})()},[]),c.useEffect(()=>{o&&(g(!0),(async()=>{try{const h=await $.getDRE(o);t(Array.isArray(h)?h.length:0);const b=await $.getDFC(o);d(Array.isArray(b)?b.length:0)}catch{C("Falha ao carregar relatÃ³rios")}finally{g(!1)}})())},[o]),e.jsx("div",{className:"grid gap-6",children:e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"RelatÃ³rios Gerenciais"}),x&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:x}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"DRE Consolidada"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:y?"Carregando...":`${r} linhas`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:y?"Carregando...":`${l} lanÃ§amentos`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Receita por Cliente"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:y?"Carregando...":`${a.length} clientes`})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:o,onChange:h=>i(h.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),a.map(h=>e.jsxs("option",{value:h.cnpj,children:[h.cliente_nome," â€¢ ",h.cnpj]},h.cnpj))]})]})]})})}function ta(){const[a,n]=c.useState([]),[o,i]=c.useState(!0),[r,t]=c.useState("");return c.useEffect(()=>{(async()=>{try{const l=await $.getCompanies();n(Array.isArray(l)?l:[])}catch{t("Falha ao carregar clientes")}finally{i(!1)}})()},[]),e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes â€¢ Dados Reais"}),r&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:r}),e.jsx("div",{className:"mt-4 rounded-2xl border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Cliente"}),e.jsx("th",{className:"text-left p-3",children:"CNPJ"}),e.jsx("th",{className:"text-left p-3",children:"Grupo"})]})}),e.jsxs("tbody",{children:[(o?[]:a).map((l,d)=>e.jsxs("tr",{className:"border-t border-border",children:[e.jsx("td",{className:"p-3",children:l.cliente_nome}),e.jsx("td",{className:"p-3",children:l.cnpj}),e.jsx("td",{className:"p-3",children:l.grupo_empresarial})]},d)),!o&&a.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-3 text-sm text-muted-foreground",colSpan:3,children:"Nenhum cliente encontrado"})})]})]})})]})}function q(...a){return Pt(At(a))}function P({className:a,...n}){return e.jsx("div",{className:q("bg-card border border-border rounded-3xl shadow-card transition-all duration-300",a),...n})}function z({className:a,...n}){return e.jsx("div",{className:q("flex items-center justify-between p-4 pb-2",a),...n})}function F({className:a,...n}){return e.jsx("h3",{className:q("text-sm text-foreground",a),...n})}function L({className:a,...n}){return e.jsx("div",{className:q("p-4 pt-2",a),...n})}const aa=ft,sa=bt,He=c.forwardRef(({className:a,...n},o)=>e.jsx(Ae,{ref:o,className:"inline-flex items-center justify-between gap-2 rounded-lg border border-[#1B232C] bg-[#0a0f14] px-3 py-1.5 text-xs text-gray-300 shadow-sm hover:bg-[#0f141b] focus:outline-none",...n}));He.displayName=Ae.displayName;const Je=c.forwardRef(({className:a,children:n,position:o="popper",...i},r)=>e.jsx(ht,{children:e.jsx(Oe,{ref:r,className:"z-50 min-w-[8rem] overflow-hidden rounded-xl border border-[#1B232C] bg-[#0a0f14] p-1 shadow-xl",position:o,...i,children:e.jsx(ut,{className:"p-1",children:n})})}));Je.displayName=Oe.displayName;const qe=c.forwardRef(({className:a,children:n,...o},i)=>e.jsx(Pe,{ref:i,className:"relative flex w-full cursor-pointer select-none items-center rounded-lg px-3 py-2 text-xs text-gray-300 outline-none data-[highlighted]:bg-[#0f141b]",...o,children:e.jsx(gt,{children:n})}));qe.displayName=Pe.displayName;const Ke=jt,xe=c.forwardRef(({className:a,...n},o)=>e.jsx(ze,{ref:o,className:q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...n}));xe.displayName=ze.displayName;const _=c.forwardRef(({className:a,...n},o)=>e.jsx(Fe,{ref:o,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...n}));_.displayName=Fe.displayName;const G=c.forwardRef(({className:a,...n},o)=>e.jsx(Le,{ref:o,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...n}));G.displayName=Le.displayName;const Ne=a=>String(a).padStart(2,"0"),ye=a=>{const n=new Set;if(a.forEach(r=>{if(!r)return;const t=r.slice(0,7);/^\d{4}-\d{2}$/.test(t)&&n.add(t)}),n.size===0){const r=new Date().getFullYear().toString();return Array.from({length:12},(t,l)=>`${r}-${Ne(l+1)}`)}const o=Array.from(new Set(Array.from(n).map(r=>r.split("-")[0]))).sort(),i=[];return o.forEach(r=>{for(let t=1;t<=12;t+=1)i.push(`${r}-${Ne(t)}`)}),i};function we({className:a}){const[n,o]=c.useState([]),[i,r]=c.useState("26888098000159"),[t,l]=c.useState([]),[d,y]=c.useState([]),[g,x]=c.useState(!1);c.useEffect(()=>{C()},[]),c.useEffect(()=>{i&&h(i)},[i]);const C=async()=>{try{const m=(await $.getCompanies()).filter(f=>f.cliente_nome?.toLowerCase().includes("volpe")||String(f.cnpj||"").startsWith("26888098")).map(f=>({...f,cnpj:f.cnpj?f.cnpj.replace(/^0+/,""):f.cnpj})).sort((f,j)=>{const S=String(f.cnpj||"")==="26888098000159"?-1:1,O=String(j.cnpj||"")==="26888098000159"?-1:1;return S-O});o(m)}catch(s){console.error("Erro ao carregar empresas:",s)}},h=async s=>{x(!0);try{console.log("ðŸ” Buscando dados para CNPJ:",s);const[m,f]=await Promise.all([$.getDRE(s),$.getDFC(s)]);console.log("âœ… DRE recebido:",m?.length||0,"registros"),console.log("âœ… DFC recebido:",f?.length||0,"registros"),m&&m.length>0&&console.log("ðŸ“ Amostra DRE:",m[0]),f&&f.length>0&&console.log("ðŸ“ Amostra DFC:",f[0]),l(m||[]),y(f||[])}catch(m){console.error("âŒ Erro ao carregar dados:",m)}finally{x(!1)}},b=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),p=n.find(s=>s.cnpj===i)?.cliente_nome||"Empresa",N=ye(t.map(s=>s.data)),k=ye(d.map(s=>s.data));console.log("ðŸ“Š DRE Data:",t.length,"registros"),console.log("ðŸ“Š DFC Data:",d.length,"registros"),console.log("ðŸ“… DRE Months:",N),console.log("ðŸ“… DFC Months:",k);const w=t.reduce((s,m)=>{const f=m.natureza||"Outros";return s[f]=(s[f]||0)+Number(m.valor||0),s},{}),D=(()=>{const s={};return t.forEach(m=>{const f=m.data?m.data.slice(0,7):N[0],j=m.natureza||"Outros",S=Number(m.valor||0);s[j]||(s[j]={}),s[j][f]=(s[j][f]||0)+S}),N.map(m=>{const f={month:m};return Object.entries(s).forEach(([j,S])=>{f[j]=S[m]||0}),f})})(),v=(()=>{const s={};return d.forEach(m=>{const f=m.data?m.data.slice(0,7):k[0];s[f]||(s[f]={entradas:0,saidas:0}),s[f].entradas+=Number(m.entrada||0),s[f].saidas+=Number(m.saida||0)}),k.map(m=>{const f=s[m]?.entradas||0,j=s[m]?.saidas||0;return{month:m,entradas:f,saidas:j,saldo:f-j}})})(),R=v.reduce((s,m)=>(s.entradas+=m.entradas,s.saidas+=m.saidas,s.saldo+=m.saldo,s),{entradas:0,saidas:0,saldo:0}),T=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],M=(()=>{if(!t||t.length===0)return[];const s={};return t.forEach(m=>{const f=m.data?m.data.slice(0,7):"",j=m.conta||"Outros",S=m.natureza||"Outros",O=Number(m.valor||0);s[j]||(s[j]={conta:j,natureza:S,total:0},N.forEach(E=>{s[j][E]=0})),f&&(s[j][f]===void 0&&(s[j][f]=0),s[j][f]+=O),s[j].total+=O}),Object.values(s).filter(m=>Math.abs(m.total)>0).sort((m,f)=>Math.abs(f.total)-Math.abs(m.total)).slice(0,50)})(),I=(()=>{if(!d||d.length===0)return[];const s={};return d.forEach(m=>{const f=m.data?m.data.slice(0,7):"",j=m.descricao||"Outros",S=Number(m.entrada||0),O=Number(m.saida||0);s[j]||(s[j]={categoria:j,totalEntradas:0,totalSaidas:0,saldo:0},k.forEach(E=>{s[j][`${E}_entrada`]=0,s[j][`${E}_saida`]=0})),f&&(s[j][`${f}_entrada`]===void 0&&(s[j][`${f}_entrada`]=0),s[j][`${f}_saida`]===void 0&&(s[j][`${f}_saida`]=0),s[j][`${f}_entrada`]+=S,s[j][`${f}_saida`]+=O),s[j].totalEntradas+=S,s[j].totalSaidas+=O,s[j].saldo+=S-O}),Object.values(s).filter(m=>Math.abs(m.saldo)>0||m.totalEntradas>0||m.totalSaidas>0).sort((m,f)=>Math.abs(f.saldo)-Math.abs(m.saldo)).slice(0,30)})(),A=t.slice(0,100).map(s=>({data:s.data,tipo:"DRE",conta:s.conta,natureza:s.natureza,valor:s.valor}));return e.jsxs("div",{className:a,children:[e.jsx("div",{className:"mb-6",children:e.jsxs(P,{children:[e.jsx(z,{children:e.jsx(F,{className:"text-lg",children:"AnÃ¡lises - SeleÃ§Ã£o de Empresa"})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Empresa:"}),e.jsxs(aa,{value:i,onValueChange:r,children:[e.jsx(He,{className:"w-[300px]",children:e.jsx(sa,{placeholder:"Selecione uma empresa"})}),e.jsx(Je,{children:n.map(s=>e.jsxs(qe,{value:s.cnpj,children:[s.cliente_nome," (",s.cnpj,")"]},s.cnpj))})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Visualizando: ",p]})]})})]})}),g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Carregando dados..."})}):e.jsxs(Ke,{defaultValue:"dre",className:"w-full",children:[e.jsxs(xe,{className:"grid w-full grid-cols-4",children:[e.jsx(_,{value:"dre",children:"DRE"}),e.jsx(_,{value:"dfc",children:"DFC"}),e.jsx(_,{value:"lancamentos",children:"LanÃ§amentos"}),e.jsx(_,{value:"graficos",children:"GrÃ¡ficos"})]}),e.jsx(G,{value:"dre",className:"space-y-4",children:e.jsxs(P,{children:[e.jsx(z,{children:e.jsx(F,{children:"DRE - DemonstraÃ§Ã£o de Resultados por MÃªs"})}),e.jsx(L,{children:t.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left sticky left-0 bg-muted z-10",children:"Conta"}),e.jsx("th",{className:"border p-2 text-left",children:"Natureza"}),N.map(s=>e.jsx("th",{className:"border p-2 text-right whitespace-nowrap",children:s.slice(5)},s)),e.jsx("th",{className:"border p-2 text-right font-bold bg-blue-50",children:"Total"})]})}),e.jsx("tbody",{children:M.length>0?M.map((s,m)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2 text-left sticky left-0 bg-background font-medium text-xs",children:s.conta}),e.jsx("td",{className:"border p-2 text-left",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.natureza==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.natureza})}),N.map(f=>{const j=s[f]||0;return e.jsx("td",{className:"border p-2 text-right text-xs",children:Math.abs(j)>.01?b(j):"-"},f)}),e.jsx("td",{className:"border p-2 text-right font-bold bg-blue-50 text-xs",children:b(s.total)})]},m)):e.jsx("tr",{children:e.jsx("td",{colSpan:N.length+3,className:"border p-4 text-center text-muted-foreground",children:"Nenhum dado DRE disponÃ­vel"})})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted font-bold",children:[e.jsx("td",{className:"border p-2",colSpan:2,children:"TOTAIS"}),N.map(s=>{const m=M.reduce((f,j)=>f+(j[s]||0),0);return e.jsx("td",{className:"border p-2 text-right",children:b(m)},s)}),e.jsx("td",{className:"border p-2 text-right bg-blue-100",children:b(M.reduce((s,m)=>s+m.total,0))})]})})]})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DRE disponÃ­vel para esta empresa"})})]})}),e.jsx(G,{value:"dfc",className:"space-y-4",children:e.jsxs(P,{children:[e.jsx(z,{children:e.jsx(F,{children:"DFC - DemonstraÃ§Ã£o de Fluxo de Caixa por MÃªs"})}),e.jsx(L,{children:d.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left sticky left-0 bg-muted z-10",children:"Categoria"}),k.map(s=>e.jsx("th",{className:"border p-2 text-center",colSpan:2,children:s.slice(5)},s)),e.jsx("th",{className:"border p-2 text-center bg-blue-50",colSpan:3,children:"Totais"})]}),e.jsxs("tr",{className:"bg-muted/50 text-xs",children:[e.jsx("th",{className:"border p-2"}),k.map(s=>e.jsxs(te.Fragment,{children:[e.jsx("th",{className:"border p-2 text-right text-green-700",children:"Entrada"}),e.jsx("th",{className:"border p-2 text-right text-red-700",children:"SaÃ­da"})]},s)),e.jsx("th",{className:"border p-2 text-right text-green-700 bg-green-50",children:"Entradas"}),e.jsx("th",{className:"border p-2 text-right text-red-700 bg-red-50",children:"SaÃ­das"}),e.jsx("th",{className:"border p-2 text-right text-blue-700 bg-blue-50",children:"Saldo"})]})]}),e.jsx("tbody",{children:I.length>0?I.map((s,m)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2 text-left sticky left-0 bg-background font-medium text-xs",children:s.categoria}),k.map(f=>{const j=s[`${f}_entrada`]||0,S=s[`${f}_saida`]||0;return e.jsxs(te.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-600 text-xs",children:Math.abs(j)>.01?b(j):"-"}),e.jsx("td",{className:"border p-2 text-right text-red-600 text-xs",children:Math.abs(S)>.01?b(S):"-"})]},f)}),e.jsx("td",{className:"border p-2 text-right text-green-700 bg-green-50 font-semibold text-xs",children:b(s.totalEntradas)}),e.jsx("td",{className:"border p-2 text-right text-red-700 bg-red-50 font-semibold text-xs",children:b(s.totalSaidas)}),e.jsx("td",{className:"border p-2 text-right text-blue-700 bg-blue-50 font-bold text-xs",children:b(s.saldo)})]},m)):e.jsx("tr",{children:e.jsx("td",{colSpan:k.length*2+4,className:"border p-4 text-center text-muted-foreground",children:"Nenhum dado DFC disponÃ­vel"})})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted font-bold",children:[e.jsx("td",{className:"border p-2",children:"TOTAIS"}),k.map(s=>{const m=I.reduce((j,S)=>j+(S[`${s}_entrada`]||0),0),f=I.reduce((j,S)=>j+(S[`${s}_saida`]||0),0);return e.jsxs(te.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-700",children:b(m)}),e.jsx("td",{className:"border p-2 text-right text-red-700",children:b(f)})]},s)}),e.jsx("td",{className:"border p-2 text-right bg-green-100 text-green-900",children:b(I.reduce((s,m)=>s+m.totalEntradas,0))}),e.jsx("td",{className:"border p-2 text-right bg-red-100 text-red-900",children:b(I.reduce((s,m)=>s+m.totalSaidas,0))}),e.jsx("td",{className:"border p-2 text-right bg-blue-100 text-blue-900",children:b(I.reduce((s,m)=>s+m.saldo,0))})]})})]})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DFC disponÃ­vel para esta empresa"})})]})}),e.jsx(G,{value:"lancamentos",className:"space-y-4",children:e.jsxs(P,{children:[e.jsx(z,{children:e.jsx(F,{children:"LanÃ§amentos Brutos - Ãšltimos 100 Registros"})}),e.jsx(L,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left",children:"Data"}),e.jsx("th",{className:"border p-2 text-left",children:"Tipo"}),e.jsx("th",{className:"border p-2 text-left",children:"Conta"}),e.jsx("th",{className:"border p-2 text-left",children:"Natureza"}),e.jsx("th",{className:"border p-2 text-right",children:"Valor"})]})}),e.jsx("tbody",{children:A.map((s,m)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2",children:s.data}),e.jsx("td",{className:"border p-2",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:s.tipo})}),e.jsx("td",{className:"border p-2",children:s.conta}),e.jsx("td",{className:"border p-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.natureza==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.natureza})}),e.jsx("td",{className:"border p-2 text-right font-mono",children:b(s.valor||0)})]},m))})]})})})]})}),e.jsx(G,{value:"graficos",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(P,{children:[e.jsx(z,{children:e.jsx(F,{children:"DRE - EvoluÃ§Ã£o Mensal"})}),e.jsx(L,{children:t.length>0?e.jsx("div",{className:"h-80",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(se,{data:D,children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"month"}),e.jsx(U,{tickFormatter:s=>`R$ ${(s/1e3).toFixed(0)}k`}),e.jsx(H,{formatter:s=>b(s)}),e.jsx(re,{}),Object.keys(w).map((s,m)=>e.jsx(Z,{dataKey:s,fill:T[m%T.length]},s))]})})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Sem dados"})})]}),e.jsxs(P,{children:[e.jsx(z,{children:e.jsx(F,{children:"DFC - Fluxo de Caixa"})}),e.jsx(L,{children:d.length>0?e.jsx("div",{className:"h-80",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(me,{data:v,children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"month"}),e.jsx(U,{tickFormatter:s=>`R$ ${(s/1e3).toFixed(0)}k`}),e.jsx(H,{formatter:s=>b(s)}),e.jsx(re,{}),e.jsx(J,{type:"monotone",dataKey:"entradas",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),e.jsx(J,{type:"monotone",dataKey:"saidas",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6}),e.jsx(kt,{type:"monotone",dataKey:"saldo",stroke:"#3b82f6",strokeWidth:2})]})})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Sem dados"})})]}),e.jsxs(P,{children:[e.jsx(z,{children:e.jsx(F,{children:"DRE - Resumo por Natureza"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-2",children:Object.entries(w).map(([s,m])=>{const f=Number(m||0),j=Object.values(w).reduce((O,E)=>O+Math.abs(Number(E)),0),S=j>0?Math.abs(f)/j*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:s}),e.jsx("span",{className:f>=0?"text-green-600":"text-red-600",children:b(f)})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${f>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${S}%`}})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[S.toFixed(1),"%"]})]},s)})})})]}),e.jsxs(P,{children:[e.jsx(z,{children:e.jsx(F,{children:"DFC - Resumo de Fluxo"})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-50",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b(R.entradas)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Entradas"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-red-50",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:b(R.saidas)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"SaÃ­das"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-50",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b(R.saldo)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Saldo"})]})]}),e.jsx("div",{className:"h-48",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(Rt,{children:[e.jsxs(Mt,{data:[{name:"Entradas",value:R.entradas},{name:"SaÃ­das",value:Math.abs(R.saidas)}],cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:m})=>`${s} ${(m*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[e.jsx(ue,{fill:"#10b981"}),e.jsx(ue,{fill:"#ef4444"})]}),e.jsx(H,{formatter:s=>b(s)})]})})})]})]})]})})]})]})}function ra(){return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extrato de LanÃ§amentos â€¢ Dados Reais"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registros financeiros consultados via Supabase"})]}),e.jsx(Ve,{})]})}const oa=Ot("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 border",{variants:{variant:{default:"bg-card text-foreground border-border hover:bg-[#0f141b]",primary:"bg-primary text-primary-foreground border-transparent hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground border-transparent hover:bg-secondary/90",destructive:"bg-destructive text-destructive-foreground border-transparent hover:bg-destructive/90",success:"bg-success text-success-foreground border-transparent hover:bg-success/90",warning:"bg-warning text-warning-foreground border-transparent hover:bg-warning/90",info:"bg-info text-info-foreground border-transparent hover:bg-info/90",ghost:"bg-transparent text-foreground border-transparent hover:bg-muted/40",outline:"bg-transparent text-foreground border-border hover:bg-muted/30",accent:"bg-accent border-border text-accent-foreground data-[active=true]:bg-accent/90"},size:{default:"h-9 px-3 py-2",sm:"h-8 px-2",lg:"h-10 px-4",icon:"h-9 w-9 p-0"}},defaultVariants:{variant:"default",size:"default"}}),Ye=c.forwardRef(({className:a,variant:n,size:o,asChild:i=!1,...r},t)=>{const l=i?vt:"button";return e.jsx(l,{className:q(oa({variant:n,size:o,className:a})),ref:t,...r})});Ye.displayName="Button";const na={bpo:["bpo","terceirizaÃ§Ã£o","outsourcing","serviÃ§os","processos"],tecnologia:["software","tech","tecnologia","sistemas","digital","ti"],consultoria:["consultoria","consulting","advisory","gestÃ£o"],rh:["rh","recursos humanos","people","talentos","recrutamento"],financeiro:["financeira","crÃ©dito","banco","fundo","investimento"],saude:["saÃºde","hospital","clÃ­nica","mÃ©dico","farmÃ¡cia"],educacao:["educaÃ§Ã£o","escola","universidade","curso","ensino"],varejo:["varejo","loja","comÃ©rcio","mercado","shopping"],industria:["indÃºstria","fÃ¡brica","manufatura","produÃ§Ã£o"],logistica:["logÃ­stica","transporte","distribuiÃ§Ã£o","armazÃ©m"]},Ce={bpo:{descricao:"Empresa especializada em Business Process Outsourcing (BPO), oferecendo serviÃ§os de terceirizaÃ§Ã£o de processos de negÃ³cios, gestÃ£o administrativa, financeira e de recursos humanos",concorrentes:["Atento","Stefanini","TCS Brasil","Accenture","Teleperformance","Contax","Almaviva"],tendencias:["inteligÃªncia artificial processos empresariais","automaÃ§Ã£o RPA robÃ³tica","trabalho remoto hÃ­brido gestÃ£o","ESG sustentabilidade empresas","transformaÃ§Ã£o digital empresas","experiÃªncia do cliente CX"],palavrasChaveNoticias:["bpo","terceirizaÃ§Ã£o","outsourcing","processos de negÃ³cio","gestÃ£o empresarial"]},tecnologia:{descricao:"Empresa de tecnologia focada em desenvolvimento de software, soluÃ§Ãµes digitais e transformaÃ§Ã£o tecnolÃ³gica",concorrentes:["Microsoft","Oracle","SAP","Salesforce","Totvs","Senior"],tendencias:["inteligÃªncia artificial generativa","cloud computing nuvem","ciberseguranÃ§a proteÃ§Ã£o dados","blockchain web3","DevOps CI/CD","microserviÃ§os arquitetura"],palavrasChaveNoticias:["tecnologia","software","inovaÃ§Ã£o digital","transformaÃ§Ã£o digital","TI"]},consultoria:{descricao:"Consultoria empresarial especializada em estratÃ©gia, gestÃ£o e otimizaÃ§Ã£o de processos organizacionais",concorrentes:["McKinsey","BCG","Bain","Deloitte","PwC","EY","KPMG"],tendencias:["consultoria estratÃ©gica digital","transformaÃ§Ã£o organizacional","gestÃ£o de mudanÃ§as","excelÃªncia operacional","analytics big data","governanÃ§a corporativa"],palavrasChaveNoticias:["consultoria","estratÃ©gia empresarial","gestÃ£o organizacional","advisory"]},rh:{descricao:"Especialista em gestÃ£o de recursos humanos, recrutamento, seleÃ§Ã£o e desenvolvimento de talentos",concorrentes:["Randstad","Adecco","ManpowerGroup","Robert Half","Page Personnel"],tendencias:["people analytics dados RH","employee experience experiÃªncia colaborador","diversidade inclusÃ£o empresas","wellbeing saÃºde mental trabalho","upskilling reskilling talentos","employer branding marca empregadora"],palavrasChaveNoticias:["recursos humanos","gestÃ£o de talentos","recrutamento","people management"]},financeiro:{descricao:"InstituiÃ§Ã£o financeira focada em serviÃ§os bancÃ¡rios, crÃ©dito, investimentos e gestÃ£o financeira",concorrentes:["ItaÃº","Bradesco","Santander","Banco do Brasil","Nubank","BTG Pactual"],tendencias:["open banking open finance","fintechs pagamentos digitais","blockchain DeFi finanÃ§as","regulaÃ§Ã£o financeira BACEN","crÃ©dito digital anÃ¡lise risco","ESG investimentos sustentÃ¡veis"],palavrasChaveNoticias:["mercado financeiro","bancos","crÃ©dito","investimentos","finanÃ§as"]}};function ia(a,n){const o=`${a} ${n}`.toLowerCase();for(const[i,r]of Object.entries(na))for(const t of r)if(o.includes(t))return i;return"bpo"}async function Se(a,n,o){const i=ia(n,o),r=Ce[i]||Ce.bpo;return{cnpj:a,nomeEmpresa:n,grupoEmpresarial:o,segmentosPrincipais:[i],palavrasChave:r.palavrasChaveNoticias,descricaoNegocio:r.descricao,concorrentes:r.concorrentes,tendenciasRelevantes:r.tendencias}}function la(a){return`${a.grupoEmpresarial} - ${a.descricaoNegocio}. A empresa atua principalmente no segmento de ${a.segmentosPrincipais.join(", ")}.`}const pe={bpo:{mercado:[{titulo:"Mercado de BPO cresce 18% no Brasil e deve movimentar R$ 156 bilhÃµes em 2025",resumo:"Setor de terceirizaÃ§Ã£o de processos apresenta forte expansÃ£o com empresas investindo em automaÃ§Ã£o e IA. Demanda por serviÃ§os especializados cresce principalmente em Ã¡reas financeiras, RH e atendimento ao cliente.",sentimento:"positivo",fonte:"Valor EconÃ´mico",relevancia:98,categorias:["crescimento","mercado","transformaÃ§Ã£o digital"]},{titulo:"Empresas de BPO investem R$ 8 bilhÃµes em tecnologia e capacitaÃ§Ã£o",resumo:"Principais players do mercado brasileiro anunciam investimentos massivos em inteligÃªncia artificial, RPA e qualificaÃ§Ã£o profissional. Movimento busca aumentar eficiÃªncia e competitividade no setor.",sentimento:"positivo",fonte:"InfoMoney",relevancia:95,categorias:["investimento","tecnologia","capacitaÃ§Ã£o"]},{titulo:"Reforma trabalhista exige adequaÃ§Ãµes em contratos de terceirizaÃ§Ã£o",resumo:"Novas diretrizes do MinistÃ©rio do Trabalho impÃµem mudanÃ§as na estrutura de contrataÃ§Ã£o de serviÃ§os terceirizados. Empresas tÃªm atÃ© marÃ§o de 2025 para adequaÃ§Ã£o completa.",sentimento:"negativo",fonte:"EstadÃ£o",relevancia:88,categorias:["regulaÃ§Ã£o","compliance","legislaÃ§Ã£o"]},{titulo:"Demanda por serviÃ§os de gestÃ£o de RH terceirizados cresce 24%",resumo:"Empresas buscam especializaÃ§Ã£o externa para processos de recrutamento, folha e desenvolvimento. TendÃªncia reflete foco em core business e reduÃ§Ã£o de custos operacionais.",sentimento:"positivo",fonte:"Exame",relevancia:92,categorias:["rh","gestÃ£o de pessoas","terceirizaÃ§Ã£o"]}],concorrentes:[{titulo:"Atento investe R$ 300 milhÃµes em expansÃ£o e tecnologia",resumo:"LÃ­der em contact center anuncia plano de expansÃ£o com abertura de 12 novas unidades e contrataÃ§Ã£o de 8 mil profissionais. Investimento inclui plataforma prÃ³pria de IA conversacional.",sentimento:"neutro",fonte:"Folha de S.Paulo",relevancia:87},{titulo:"Stefanini adquire empresa de consultoria em transformaÃ§Ã£o digital",resumo:"Grupo amplia portfÃ³lio com aquisiÃ§Ã£o estratÃ©gica de consultoria especializada em cloud e analytics. Movimento fortalece posiÃ§Ã£o em projetos de grande porte.",sentimento:"positivo",fonte:"TI Inside",relevancia:85},{titulo:"TCS Brasil reporta crescimento de 28% em receita no ano fiscal",resumo:"Tata Consultancy Services apresenta resultados acima das expectativas impulsionados por contratos de modernizaÃ§Ã£o de sistemas e migraÃ§Ã£o para nuvem.",sentimento:"positivo",fonte:"Bloomberg Brasil",relevancia:83}],tendencias:[{titulo:"IA Generativa deve automatizar 40% das tarefas em BPO atÃ© 2026",resumo:"Estudo da Gartner revela que tecnologias de IA generativa transformarÃ£o radicalmente operaÃ§Ãµes de contact center e backoffice. Empresas que nÃ£o adotarem correm risco de perder competitividade.",sentimento:"positivo",fonte:"Gartner Research",relevancia:96,categorias:["inteligÃªncia artificial","automaÃ§Ã£o","futuro"]},{titulo:"Trabalho hÃ­brido se consolida como modelo permanente em serviÃ§os",resumo:"Pesquisa da FGV indica que 73% das empresas de serviÃ§os adotaram modelo hÃ­brido definitivamente. MudanÃ§a exige novos investimentos em infraestrutura digital e gestÃ£o remota.",sentimento:"neutro",fonte:"FGV-EAESP",relevancia:89,categorias:["trabalho remoto","gestÃ£o","futuro do trabalho"]},{titulo:"ESG torna-se critÃ©rio obrigatÃ³rio em licitaÃ§Ãµes de grande porte",resumo:"Empresas de BPO precisam comprovar prÃ¡ticas sustentÃ¡veis e sociais para participar de concorrÃªncias pÃºblicas e privadas. CertificaÃ§Ãµes ambientais ganham peso em decisÃµes.",sentimento:"positivo",fonte:"Ã‰poca NegÃ³cios",relevancia:91,categorias:["esg","sustentabilidade","governanÃ§a"]},{titulo:"Escassez de talentos qualificados desafia setor de serviÃ§os",resumo:"Pesquisa da Bain aponta falta de 150 mil profissionais qualificados no setor. Empresas investem em programas de requalificaÃ§Ã£o e parcerias com universidades.",sentimento:"negativo",fonte:"Bain & Company",relevancia:87,categorias:["talentos","capacitaÃ§Ã£o","mercado de trabalho"]}]}},ne=["Valor EconÃ´mico","Folha de S.Paulo","O Estado de S.Paulo","Exame","InfoMoney","Ã‰poca NegÃ³cios","Bloomberg Brasil","Reuters Brasil","ConvergÃªncia Digital","TI Inside","CIO Brasil","IT Forum"],ie=["Gartner Research","McKinsey & Company","Bain & Company","BCG Brasil","Deloitte Insights","PwC Brasil","FGV-EAESP","FundaÃ§Ã£o Dom Cabral","IDC Brasil","Forrester Research"];function ca(a,n=48){const o=pe.bpo.mercado,i=[];o.forEach((d,y)=>{const g=11-y;i.push({id:`real-${y}`,titulo:d.titulo,resumo:d.resumo,sentimento:d.sentimento,fonte:d.fonte,data:`2025-${String(g).padStart(2,"0")}-${15+y}`,url:"#",relevancia:d.relevancia,categorias:d.categorias||[]})});const r=xa(),t=12-o.length,l=Math.floor((n-o.length)/t);for(let d=1;d<=12;d++)if(!(d>=8))for(let y=0;y<l;y++){const g=r[Math.floor(Math.random()*r.length)],x=Math.random()>.5?ne[Math.floor(Math.random()*ne.length)]:ie[Math.floor(Math.random()*ie.length)];i.push({id:`gen-mercado-${d}-${y}`,titulo:g.titulo.replace("{segmento}",a.segmentosPrincipais[0].toUpperCase()),resumo:g.resumo.replace("{grupo}",a.grupoEmpresarial),sentimento:g.sentimento,fonte:x,data:`2025-${String(d).padStart(2,"0")}-${5+y*8}`,url:"#",relevancia:75+Math.floor(Math.random()*20),categorias:g.categorias})}return i.sort((d,y)=>new Date(y.data).getTime()-new Date(d.data).getTime())}function da(a,n=36){const o=pe.bpo.concorrentes,i=[];o.forEach((t,l)=>{const d=a.concorrentes[l%a.concorrentes.length];i.push({id:`real-conc-${l}`,titulo:t.titulo,resumo:t.resumo,sentimento:t.sentimento,fonte:t.fonte,data:`2025-${String(10-l).padStart(2,"0")}-${20+l}`,url:"#",relevancia:t.relevancia,categorias:["concorrente",d]})});const r=pa();return a.concorrentes.forEach((t,l)=>{for(let d=1;d<=12&&!(i.length>=n);d++){const y=r[d%r.length],g=ne[Math.floor(Math.random()*ne.length)];i.push({id:`gen-conc-${t}-${d}`,titulo:y.titulo.replace("{concorrente}",t),resumo:y.resumo.replace("{concorrente}",t),sentimento:y.sentimento,fonte:g,data:`2025-${String(d).padStart(2,"0")}-${l*3+5}`,url:"#",relevancia:70+Math.floor(Math.random()*20),categorias:["concorrente",t]})}}),i.sort((t,l)=>new Date(l.data).getTime()-new Date(t.data).getTime()).slice(0,n)}function ma(a,n=48){const o=pe.bpo.tendencias,i=[];o.forEach((t,l)=>{i.push({id:`real-tend-${l}`,titulo:t.titulo,resumo:t.resumo,sentimento:t.sentimento,fonte:t.fonte,data:`2025-${String(11-l).padStart(2,"0")}-${10+l*5}`,url:"#",relevancia:t.relevancia,categorias:t.categorias||[]})});const r=ha();for(let t=1;t<=12&&!(i.length>=n);t++){const l=Math.floor((n-o.length)/12);for(let d=0;d<l;d++){const y=r[(t+d)%r.length],g=ie[Math.floor(Math.random()*ie.length)];i.push({id:`gen-tend-${t}-${d}`,titulo:y.titulo,resumo:y.resumo,sentimento:y.sentimento,fonte:g,data:`2025-${String(t).padStart(2,"0")}-${3+d*7}`,url:"#",relevancia:80+Math.floor(Math.random()*18),categorias:y.categorias})}}return i.sort((t,l)=>new Date(l.data).getTime()-new Date(t.data).getTime())}function xa(a){return[{titulo:"Investimentos em {segmento} superam R$ 5 bilhÃµes no primeiro trimestre",resumo:"Setor registra aportes recordes com foco em tecnologia e expansÃ£o regional. Empresas como {grupo} lideram movimento de modernizaÃ§Ã£o e ampliaÃ§Ã£o de capacidade.",sentimento:"positivo",categorias:["investimento","crescimento"]},{titulo:"Novas regulamentaÃ§Ãµes impactam setor de serviÃ§os terceirizados",resumo:"MudanÃ§as na legislaÃ§Ã£o trabalhista e tributÃ¡ria exigem adaptaÃ§Ãµes operacionais. Especialistas recomendam revisÃ£o de contratos e processos de compliance.",sentimento:"negativo",categorias:["regulaÃ§Ã£o","compliance"]},{titulo:"FusÃµes e aquisiÃ§Ãµes movimentam mercado de {segmento}",resumo:"ConsolidaÃ§Ã£o do setor acelera com empresas buscando ganhos de escala e sinergias operacionais. TransaÃ§Ãµes somam R$ 2,3 bilhÃµes no perÃ­odo.",sentimento:"neutro",categorias:["m&a","consolidaÃ§Ã£o"]},{titulo:"Empresas de {segmento} apostam em inovaÃ§Ã£o para diferenciaÃ§Ã£o",resumo:"Desenvolvimento de soluÃ§Ãµes proprietÃ¡rias e parcerias tecnolÃ³gicas ganham forÃ§a. Investimento em P&D cresce 35% em relaÃ§Ã£o ao ano anterior.",sentimento:"positivo",categorias:["inovaÃ§Ã£o","tecnologia"]}]}function pa(){return[{titulo:"{concorrente} anuncia expansÃ£o para Nordeste e Centro-Oeste",resumo:"{concorrente} investe em novas unidades regionais visando ampliar presenÃ§a nacional. Plano prevÃª criaÃ§Ã£o de 2 mil empregos nos prÃ³ximos 18 meses.",sentimento:"neutro"},{titulo:"{concorrente} lanÃ§a plataforma digital prÃ³pria de gestÃ£o",resumo:"{concorrente} desenvolve soluÃ§Ã£o tecnolÃ³gica interna para otimizar operaÃ§Ãµes. Ferramenta integra IA e analytics para ganhos de produtividade.",sentimento:"positivo"},{titulo:"{concorrente} renova certificaÃ§Ãµes internacionais de qualidade",resumo:"{concorrente} mantÃ©m padrÃµes ISO e conquista novas certificaÃ§Ãµes ESG. Reconhecimento reforÃ§a posicionamento em mercados premium.",sentimento:"positivo"},{titulo:"{concorrente} enfrenta desafios com turnover elevado",resumo:"{concorrente} registra taxa de rotatividade acima da mÃ©dia do setor. Empresa anuncia programa de retenÃ§Ã£o e benefÃ­cios ampliados.",sentimento:"negativo"}]}function ha(a){return[{titulo:"CiberseguranÃ§a torna-se prioridade estratÃ©gica em serviÃ§os",resumo:"Ataques ransomware crescem 120% e empresas elevam investimentos em proteÃ§Ã£o de dados. Compliance com LGPD exige infraestrutura robusta de seguranÃ§a.",sentimento:"negativo",categorias:["seguranÃ§a","tecnologia","lgpd"]},{titulo:"AnÃ¡lise preditiva revoluciona tomada de decisÃ£o empresarial",resumo:"Ferramentas de big data e machine learning permitem antecipaÃ§Ã£o de tendÃªncias e otimizaÃ§Ã£o de recursos. ROI mÃ©dio de implementaÃ§Ã£o atinge 300%.",sentimento:"positivo",categorias:["analytics","big data","inovaÃ§Ã£o"]},{titulo:"Customer experience define competitividade no setor",resumo:"Pesquisa aponta que 78% dos clientes valorizam mais a experiÃªncia que o preÃ§o. Empresas investem em omnichannel e personalizaÃ§Ã£o.",sentimento:"positivo",categorias:["cx","atendimento","estratÃ©gia"]},{titulo:"Economia circular ganha espaÃ§o em modelos de negÃ³cio",resumo:"PrÃ¡ticas sustentÃ¡veis deixam de ser diferenciais e tornam-se requisitos bÃ¡sicos. Empresas que nÃ£o se adaptarem perdem competitividade.",sentimento:"neutro",categorias:["sustentabilidade","esg","economia circular"]},{titulo:"Blockchain promete transformar contratos e auditoria",resumo:"Tecnologia de registro distribuÃ­do garante transparÃªncia e rastreabilidade em transaÃ§Ãµes. Pilotos mostram reduÃ§Ã£o de 60% no tempo de auditorias.",sentimento:"positivo",categorias:["blockchain","inovaÃ§Ã£o","tecnologia"]},{titulo:"SaÃºde mental no trabalho exige novas polÃ­ticas corporativas",resumo:"Burnout e ansiedade afetam 40% dos profissionais segundo pesquisa. Empresas implementam programas de wellbeing e acompanhamento psicolÃ³gico.",sentimento:"neutro",categorias:["saÃºde mental","rh","wellbeing"]}]}function ua({cnpj:a="26888098000159",nomeEmpresa:n="Volpe BPO",grupoEmpresarial:o="Grupo Volpe"}){const[i,r]=c.useState(!1),[t,l]=c.useState(""),[d,y]=c.useState(null),[g,x]=c.useState([]),[C,h]=c.useState([]),[b,p]=c.useState([]);c.useEffect(()=>{N(),k()},[a,n,o]);const N=async()=>{const v=await Se(a,n,o);y(v),l(la(v))},k=async()=>{r(!0);try{let v=d;v||(v=await Se(a,n,o),y(v));const R=ca(v,48),T=da(v,36),M=ma(v,48);console.log(`ðŸ“° NotÃ­cias geradas para ${v.grupoEmpresarial}:`,{mercado:R.length,concorrentes:T.length,tendencias:M.length}),setTimeout(()=>{x(R),h(T),p(M),r(!1)},800)}catch(v){console.error("Erro ao carregar notÃ­cias:",v),r(!1)}},w=v=>{const T={positivo:{bg:"bg-green-500/20",text:"text-green-400",icon:W,label:"Positivo"},neutro:{bg:"bg-blue-500/20",text:"text-blue-400",icon:Ct,label:"Neutro"},negativo:{bg:"bg-red-500/20",text:"text-red-400",icon:$e,label:"Negativo"}}[v],M=T.icon;return e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${T.bg} ${T.text} text-xs font-semibold`,children:[e.jsx(M,{className:"w-3 h-3"}),T.label]})},D=({noticia:v})=>e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"neomorphic rounded-2xl p-5 border border-graphite-800/30 hover:border-gold-500/30 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-semibold text-base mb-2 line-clamp-2",children:v.titulo}),e.jsx("p",{className:"text-graphite-400 text-sm leading-relaxed line-clamp-3",children:v.resumo})]}),e.jsx("div",{className:"ml-4",children:w(v.sentimento)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-graphite-800",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-graphite-500",children:[e.jsx("span",{className:"font-medium",children:v.fonte}),e.jsx("span",{children:new Date(v.data).toLocaleDateString("pt-BR")}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-gold-500"}),v.relevancia,"% relevante"]})]}),e.jsx("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"text-gold-500 hover:text-gold-400 transition-colors",children:e.jsx(wt,{className:"w-4 h-4"})})]})]});return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"NotÃ­cias & InteligÃªncia de Mercado"}),e.jsxs("p",{className:"text-graphite-400",children:["Acompanhe tendÃªncias, concorrentes e oportunidades do setor â€¢ ",n]})]}),e.jsxs(Ye,{onClick:k,disabled:i,className:"flex items-center gap-2",children:[e.jsx(Q,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Atualizar"]})]}),e.jsxs(P,{className:"mb-6 bg-gradient-to-br from-gold-500/10 to-gold-600/5 border-gold-500/20",children:[e.jsx(z,{children:e.jsxs(F,{className:"text-gold-400 flex items-center gap-2",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Sobre a Empresa Analisada"]})}),e.jsxs(L,{className:"space-y-3",children:[e.jsx("p",{className:"text-graphite-300 text-sm leading-relaxed",children:t||"Carregando informaÃ§Ãµes da empresa..."}),d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-3 border-t border-gold-500/20",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yt,{className:"w-4 h-4 text-gold-400"}),e.jsx("span",{className:"text-xs font-semibold text-gold-400",children:"Segmento"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.segmentosPrincipais.map(v=>e.jsx("span",{className:"px-2 py-1 rounded-md bg-gold-500/10 text-gold-400 text-xs",children:v.toUpperCase()},v))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs font-semibold text-blue-400",children:"Concorrentes Principais"})]}),e.jsxs("p",{className:"text-graphite-400 text-xs",children:[d.concorrentes.slice(0,3).join(", "),"..."]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs font-semibold text-green-400",children:"Palavras-Chave"})]}),e.jsx("p",{className:"text-graphite-400 text-xs",children:d.palavrasChave.slice(0,3).join(", ")})]})]})]})]}),e.jsxs(Ke,{defaultValue:"mercado",className:"w-full",children:[e.jsxs(xe,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(_,{value:"mercado",children:["Mercado & Setor",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-gold-500/20 text-gold-400 text-xs",children:g.length})]}),e.jsxs(_,{value:"concorrentes",children:["Concorrentes",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400 text-xs",children:C.length})]}),e.jsxs(_,{value:"tendencias",children:["TendÃªncias",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-purple-500/20 text-purple-400 text-xs",children:b.length})]})]}),e.jsx(G,{value:"mercado",className:"space-y-4",children:i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"w-8 h-8 animate-spin text-gold-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando notÃ­cias do mercado..."})]}):g.map(v=>e.jsx(D,{noticia:v},v.id))}),e.jsx(G,{value:"concorrentes",className:"space-y-4",children:i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando notÃ­cias de concorrentes..."})]}):C.map(v=>e.jsx(D,{noticia:v},v.id))}),e.jsx(G,{value:"tendencias",className:"space-y-4",children:i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando tendÃªncias do setor..."})]}):b.map(v=>e.jsx(D,{noticia:v},v.id))})]})]})}const Ue={duration:.2,ease:[.22,1,.36,1]},ga={duration:.35,ease:[.22,1,.36,1]},fa={hidden:{opacity:0,y:16},show:{opacity:1,y:0,transition:ga}},B={whileHover:{scale:1.02},transition:Ue},le={hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:Ue}},Ee="oracle_context_rules";function ba({open:a,onClose:n,onUpdateOracleContext:o}){const[i,r]=c.useState("");if(c.useEffect(()=>{if(a){const l=localStorage.getItem(Ee)||"";r(l)}},[a]),!a)return null;const t=()=>{localStorage.setItem(Ee,i),o&&o(i),n()};return e.jsx(u.div,{className:"fixed inset-0 z-[65] bg-black/60 backdrop-blur-sm",children:e.jsxs(u.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"mx-auto mt-20 max-w-[720px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"ConfiguraÃ§Ãµes â€¢ Regras de Contexto"})]}),e.jsx("button",{onClick:n,className:"text-muted-foreground hover:text-foreground",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Regras de contexto do OrÃ¡culo (empresa/grupo, fontes, tom e escopo)"}),e.jsx("textarea",{value:i,onChange:l=>r(l.target.value),rows:8,className:"w-full bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:n,className:"px-3 py-2 rounded-xl bg-secondary text-secondary-foreground",children:"Cancelar"}),e.jsx("button",{onClick:t,className:"px-3 py-2 rounded-xl bg-primary text-primary-foreground",children:"Salvar"})]})]})]})})}function ja({open:a,onClose:n}){const[o,i]=c.useState("all"),[r,t]=c.useState("all"),[l,d]=c.useState("24h"),[y,g]=c.useState([]);if(c.useEffect(()=>{if(!a)return;const p={select:"*",order:"ts.desc",limit:"200"};$.restGet("app_logs",{query:p}).then(g).catch(()=>g([]))},[a,o,r,l]),!a)return null;const x=y.filter(p=>(o==="all"||p.level===o)&&(r==="all"||p.service===r)),C=x.map(p=>({ts:p.ts,info:p.level==="info"?1:0,warn:p.level==="warn"?1:0,error:p.level==="error"?1:0})),h=Object.values(x.reduce((p,N)=>(N.endpoint&&(p[N.endpoint]=(p[N.endpoint]||0)+1),p),{})).length?Object.entries(x.reduce((p,N)=>(N.endpoint&&(p[N.endpoint]=(p[N.endpoint]||0)+1),p),{})).slice(0,8).map(([p,N])=>({endpoint:p,count:N})):[],b=x.filter(p=>p.latencyMs).map(p=>({endpoint:p.endpoint||"N/A",latency:p.latencyMs}));return e.jsx(u.div,{className:"fixed inset-0 z-[75] bg-black/55 backdrop-blur-sm",children:e.jsxs(u.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},className:"mx-auto mt-16 max-w-[1200px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Gerenciamento â€¢ Logs"})]}),e.jsx("button",{onClick:n,className:"text-muted-foreground hover:text-foreground",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5 flex items-center gap-3",children:[e.jsxs("select",{value:l,onChange:p=>d(p.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"24h",children:"24h"}),e.jsx("option",{value:"7d",children:"7 dias"}),e.jsx("option",{value:"30d",children:"30 dias"})]}),e.jsxs("select",{value:o,onChange:p=>i(p.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warn",children:"Warn"}),e.jsx("option",{value:"error",children:"Error"})]}),e.jsxs("select",{value:r,onChange:p=>t(p.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"UI",children:"UI"}),e.jsx("option",{value:"API",children:"API"}),e.jsx("option",{value:"Edge",children:"Edge"})]})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"NÃ­veis ao longo do tempo"})}),e.jsx("div",{className:"p-4 pt-0 h-[300px]",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(me,{data:C,children:[e.jsx(K,{stroke:"rgba(200,200,200,0.15)",vertical:!1}),e.jsx(Y,{dataKey:"ts",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},hide:!0}),e.jsx(U,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(H,{}),e.jsx(re,{}),e.jsx(J,{type:"monotone",dataKey:"info",stackId:"1",stroke:"#38bdf8",fill:"#38bdf8"}),e.jsx(J,{type:"monotone",dataKey:"warn",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b"}),e.jsx(J,{type:"monotone",dataKey:"error",stackId:"1",stroke:"#ef4444",fill:"#ef4444"})]})})})]}),e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Top endpoints"})}),e.jsx("div",{className:"p-4 pt-0 h-[300px]",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(se,{data:h,children:[e.jsx(K,{stroke:"rgba(200,200,200,0.15)"}),e.jsx(Y,{dataKey:"endpoint",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(U,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(H,{}),e.jsx(Z,{dataKey:"count",fill:"#ff7a00"})]})})})]}),e.jsxs("div",{className:"card-premium xl:col-span-2",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"LatÃªncia por endpoint"})}),e.jsx("div",{className:"p-4 pt-0 h-[300px]",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(se,{data:b,children:[e.jsx(K,{stroke:"rgba(200,200,200,0.15)"}),e.jsx(Y,{dataKey:"endpoint",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(U,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(H,{}),e.jsx(Z,{dataKey:"latency",fill:"#10b981"})]})})})]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"rounded-2xl border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Ts"}),e.jsx("th",{className:"text-left p-3",children:"NÃ­vel"}),e.jsx("th",{className:"text-left p-3",children:"ServiÃ§o"}),e.jsx("th",{className:"text-left p-3",children:"Endpoint"}),e.jsx("th",{className:"text-left p-3",children:"Empresa"}),e.jsx("th",{className:"text-left p-3",children:"Mensagem"})]})}),e.jsx("tbody",{children:x.slice(0,50).map((p,N)=>e.jsxs("tr",{className:"border-t border-border",children:[e.jsx("td",{className:"p-3",children:p.ts}),e.jsx("td",{className:"p-3",children:p.level}),e.jsx("td",{className:"p-3",children:p.service}),e.jsx("td",{className:"p-3",children:p.endpoint||""}),e.jsx("td",{className:"p-3",children:p.companyCnpj||""}),e.jsx("td",{className:"p-3",children:p.message})]},N))})]})})})]})})}function va({open:a,onClose:n,onLogged:o}){const[i,r]=c.useState("dev@angrax.com.br"),[t,l]=c.useState("B5b0dcf500@#"),[d,y]=c.useState(""),[g,x]=c.useState(!1),C=async()=>{y(""),x(!0);try{const h=await Ge(i,t);if(!h){y("Credenciais invÃ¡lidas"),x(!1);return}const b={...h,defaultCompany:"26888098000159",companies:[{cliente_nome:"LOJA 01 - VOLPE MATRIZ",cnpj:"26888098000159"}]};o(b),n()}catch(h){y(h.message||"Erro ao fazer login"),x(!1)}};return a?e.jsx(u.div,{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-xl flex items-center justify-center",children:e.jsx(u.div,{variants:fa,initial:"hidden",animate:"show",className:"neomorphic neomorphic-hover w-[380px] rounded-xl border border-graphite-800/30 shadow-soft-lg",children:e.jsxs("div",{className:"p-7 space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:"/finapp-logo.png",alt:"fin.app",className:"w-40 h-auto"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Login - Grupo VOLPE"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acesso exclusivo para o grupo VOLPE"})]}),e.jsx(u.input,{whileHover:B.whileHover,value:i,onChange:h=>r(h.target.value),placeholder:"E-mail",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:g}),e.jsx(u.input,{whileHover:B.whileHover,type:"password",value:t,onChange:h=>l(h.target.value),placeholder:"Senha",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:g}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e.jsx("p",{children:"Empresa padrÃ£o: LOJA 01 - VOLPE MATRIZ (0159)"})}),d&&e.jsx("p",{className:"text-xs text-destructive text-center",children:d}),e.jsx("div",{className:"flex gap-2 justify-end pt-2",children:e.jsx(u.button,{whileHover:B.whileHover,whileTap:{scale:.98},onClick:C,disabled:g,className:"w-full px-3 py-2 rounded-sm bg-emerald-400 text-white hover:bg-emerald-500 disabled:opacity-50",children:g?"Entrando...":"Entrar"})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[e.jsx("p",{children:"UsuÃ¡rio: dev@angrax.com.br"}),e.jsx("p",{children:"Empresa: 26888098000159 (Matriz)"})]})]})})}):null}function Na(a="26888098000159",n){const[o,i]=c.useState({receitaTotal:0,despesasTotal:0,limiteDiario:45e3,metaPoupanca:15e4,receitaChange:0,despesasChange:0,limiteDiarioProgress:0,metaPoupancaProgress:0}),[r,t]=c.useState(!0);c.useEffect(()=>{l()},[a,n]);const l=async()=>{try{const d=await $.getDRE(a);if(!d||d.length===0){t(!1);return}const[y,g]=n?n.split("-").map(Number):[new Date().getFullYear(),new Date().getMonth()+1],x=y,C=g-1;let h=0,b=0,p=0,N=0;d.forEach(I=>{const A=new Date(I.data),s=A.getFullYear(),m=A.getMonth();s===x&&m===C?I.natureza==="receita"?h+=I.valor:I.natureza==="despesa"&&(b+=Math.abs(I.valor)):(s===x&&m===C-1||C===0&&s===x-1&&m===11)&&(I.natureza==="receita"?p+=I.valor:I.natureza==="despesa"&&(N+=Math.abs(I.valor)))});const k=p>0?(h-p)/p*100:0,w=N>0?(b-N)/N*100:0,v=45e3*22,R=Math.min(Math.round(h/v*100),100),T=h-b,M=Math.min(Math.round(T/15e4*100),100);i({receitaTotal:h,despesasTotal:b,limiteDiario:45e3,metaPoupanca:15e4,receitaChange:k,despesasChange:w,limiteDiarioProgress:R,metaPoupancaProgress:M}),t(!1)}catch(d){console.error("Erro ao carregar dados financeiros:",d),t(!1)}};return{metrics:o,loading:r}}function ya(){const[a,n]=c.useState(!0),[o,i]=c.useState(!1),[r,t]=c.useState(!1),[l,d]=c.useState(""),[y]=c.useState("admin"),[g,x]=c.useState("Dashboard"),[C,h]=c.useState("Ano"),[b,p]=c.useState(()=>Ft()),[N,k]=c.useState(""),[w,D]=c.useState(""),[v,R]=c.useState(""),T=window.location.hostname.includes("dev.angrax.com.br")||window.location.hostname.includes("localhost"),[M,I]=c.useState("2025-11"),[A,s]=c.useState("26888098000159"),[m,f]=c.useState([]),{metrics:j,loading:S}=Na(A,M);c.useEffect(()=>{O()},[]);const O=async()=>{try{const E=await $.getCompanies();f(E)}catch(E){console.error("Erro ao carregar empresas:",E)}};return c.useState(()=>{const E=We=>x(We.detail);return window.addEventListener("navigate",E),()=>window.removeEventListener("navigate",E)}),e.jsxs("div",{className:`min-h-screen ${a?"dark bg-gradient-to-br from-charcoal-950 via-graphite-950 to-charcoal-900":"bg-gradient-to-br from-gray-50 via-white to-gray-100"} transition-colors duration-500`,children:[e.jsx(Gt,{role:y,onOpenSettings:()=>i(!0),onOpenLogs:()=>t(!0)}),e.jsxs("div",{className:"ml-64 flex flex-col min-h-screen",children:[e.jsx(Jt,{isDark:a,onThemeToggle:()=>n(!a),oracleContext:l,currentPeriod:C,onPeriodChange:E=>h(E),selectedMonth:M,onMonthChange:I,selectedCompany:A,onCompanyChange:s,companies:m}),e.jsxs("main",{className:"flex-1 p-8",children:[g==="Dashboard"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[e.jsx(ee,{title:"Receita Total",value:S?"R$ 0":`R$ ${Math.round(j.receitaTotal).toLocaleString("pt-BR")}`,change:S?0:j.receitaChange,trend:j.receitaChange>=0?"up":"down",icon:"TrendingUp",color:"green",sparklineData:[42,48,45,52,58,65,70,68,75,80,85,90]}),e.jsx(ee,{title:"Despesas",value:S?"R$ 0":`R$ ${Math.round(j.despesasTotal).toLocaleString("pt-BR")}`,change:S?0:j.despesasChange,trend:j.despesasChange>=0?"up":"down",icon:"TrendingDown",color:"red",sparklineData:[30,35,40,38,42,45,48,50,52,54,56,58]}),e.jsx(ee,{title:"Limite DiÃ¡rio",value:`R$ ${j.limiteDiario.toLocaleString("pt-BR")}`,change:S?0:j.limiteDiarioProgress,trend:"up",icon:"Wallet",color:"blue",sparklineData:[20,25,30,28,32,35,38,40,42,43,44,45],progress:S?0:j.limiteDiarioProgress}),e.jsx(ee,{title:"Meta de PoupanÃ§a",value:`R$ ${j.metaPoupanca.toLocaleString("pt-BR")}`,change:S?0:j.metaPoupancaProgress,trend:"up",icon:"Target",color:"gold",sparklineData:[10,20,35,45,60,70,80,90,95,100,105,110],progress:S?0:j.metaPoupancaProgress})]}),e.jsx("section",{className:"mb-6",children:e.jsx(Qt,{period:C,session:b},`overview-${b?"auth":"anon"}`)}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(ve,{period:C,cnpj:A,selectedMonth:M})}),e.jsx("div",{children:e.jsx(Ut,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(Ve,{})}),e.jsx("div",{children:e.jsx(Xt,{cnpj:A,selectedMonth:M})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[e.jsx(u.div,{className:"neomorphic neomorphic-hover rounded-2xl p-6 border border-graphite-800/30",whileHover:B.whileHover,transition:B.transition,variants:le,initial:"hidden",animate:"show",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/20",children:e.jsx(ke,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Clientes Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:"1.248"}),e.jsx("p",{className:"text-xs text-success mt-1",children:"+8% este mÃªs"})]})]})}),e.jsx(u.div,{className:"neomorphic neomorphic-hover rounded-2xl p-6 border border-graphite-800/30",whileHover:B.whileHover,transition:B.transition,variants:le,initial:"hidden",animate:"show",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/20",children:e.jsx(ce,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Documentos Processados"}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:"8.542"}),e.jsx("p",{className:"text-xs text-success mt-1",children:"+15% este mÃªs"})]})]})}),e.jsx(u.div,{className:"neomorphic neomorphic-hover rounded-2xl p-6 border border-graphite-800/30",whileHover:B.whileHover,transition:B.transition,variants:le,initial:"hidden",animate:"show",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gold-500/20 to-gold-600/10 border border-gold-500/20",children:e.jsx(Dt,{className:"w-6 h-6 text-gold-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"AutomaÃ§Ã£o"}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:"94.8%"}),e.jsx("p",{className:"text-xs text-success mt-1",children:"+2.3% este mÃªs"})]})]})})]})]}),g==="AnÃ¡lises"&&e.jsx(we,{}),g==="Fluxo de Caixa"&&e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(ve,{period:C})}),g==="Extrato de LanÃ§amentos"&&e.jsx(ra,{}),g==="RelatÃ³rios"&&e.jsx(ea,{}),g==="Clientes"&&e.jsx(ta,{}),g==="AnÃ¡lises"&&e.jsx(we,{}),g==="NotÃ­cias"&&e.jsx(ua,{cnpj:A,nomeEmpresa:m.find(E=>E.cnpj===A)?.cliente_nome||"Empresa",grupoEmpresarial:m.find(E=>E.cnpj===A)?.grupo_empresarial||"Grupo Empresarial"})]}),e.jsx(ba,{open:o,onClose:()=>i(!1),onUpdateOracleContext:d}),e.jsx(ja,{open:r,onClose:()=>t(!1)}),!b&&(T?e.jsx(va,{open:!b,onClose:()=>{},onLogged:E=>p(E)}):e.jsx("div",{className:"fixed inset-0 z-[90] bg-black/60 backdrop-blur flex items-center justify-center",children:e.jsxs("div",{className:"w-[360px] rounded-xl border border-graphite-800 bg-graphite-900 p-4 space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Entrar"}),v&&e.jsx("div",{className:"text-xs text-red-400",children:v}),e.jsx("input",{value:N,onChange:E=>k(E.target.value),placeholder:"E-mail",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("input",{type:"password",value:w,onChange:E=>D(E.target.value),placeholder:"Senha",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("button",{onClick:async()=>{R("");try{const E=await zt(N,w);if(!E){R(ae||"Credenciais invÃ¡lidas");return}p(E)}catch(E){R(E.message||"Erro ao fazer login")}},className:"px-3 py-1 rounded-sm bg-emerald-400 text-white text-xs",children:"Entrar"})]})}))]})]})}Xe.createRoot(document.getElementById("root")).render(e.jsx(te.StrictMode,{children:e.jsx(ya,{})}));
