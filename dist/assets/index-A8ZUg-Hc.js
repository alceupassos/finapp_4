import{a as o,j as e,h as Oe,c as Le}from"./vendor-react-CHG81KOM.js";import{m as c}from"./vendor-motion-BVqqJjYH.js";import{L as Ae,C as Te,T as q,W as he,F as ee,U as pe,a as $e,B as ue,S as Fe,b as Me,c as ze,X as te,d as ge,e as Pe,M as Be,f as se,g as He,h as _e,A as je,i as Ve,E as Je,j as Ke,k as Ge,l as We,m as Xe,n as Ue,o as fe,P as qe,p as be,V as Ye,I as ve,q as Ze,R as Qe,r as et,s as tt,t as st,Z as at}from"./vendor-ui-5jFN8JOW.js";import{i as O,j as Ne,k as L,l as A,m as T,n as $,o as F,p as W,q as X,r as z,s as rt,t as Z}from"./vendor-recharts-liPIgyFp.js";import{c as it,a as ae,s as re,u as nt,b as lt,m as ie}from"./vendor-tremor-BnIhdU9C.js";import{a5 as ot}from"./vendor-Bi-BPEI5.js";import{t as ct}from"./vendor-tailwind-merge-DxgBj8Ug.js";import"./vendor-date-fns-B_6AWE7E.js";import"./vendor-tanstack-Bu6QsKMo.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const x of s.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&n(x)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}})();const ye="https://xzrmzmcoslomtzkzgskn.supabase.co",U="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI";function we(){const t=localStorage.getItem("supabase_session");if(!t)return null;try{return JSON.parse(t).access_token||null}catch{return null}}async function P(t,i={}){const a=new URL(`${ye}/rest/v1/${t}`);Object.entries(i.query||{}).forEach(([s,x])=>a.searchParams.set(s,x));const n=we()||U,r=await fetch(a.toString(),{headers:{apikey:U,Authorization:`Bearer ${n}`,Accept:"application/json"}});if(!r.ok)throw new Error(`Supabase GET ${t} failed: ${r.status}`);return r.json()}async function ne(t,i){const a=`${ye}/rest/v1/${t}`,n=we()||U,r=await fetch(a,{method:"POST",headers:{apikey:U,Authorization:`Bearer ${n}`,"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify(i)});if(!r.ok)throw new Error(`Supabase POST ${t} failed: ${r.status}`);return r.json()}const S={restGet:P,restPost:ne,getCompanies:()=>P("integration_f360",{query:{select:"grupo_empresarial,cliente_nome,cnpj"}}),getDRE:async t=>{const i=(t||"").replace(/^0+/,""),a=await P("dre_entries",{query:{company_cnpj:`eq.${i}`,select:"*"}});return Array.isArray(a)?a.map(n=>({data:n.date||n.data,conta:n.account??n.conta??"Conta",natureza:n.nature??n.natureza??null,valor:Number(n.amount??n.valor??0)})):[]},getDFC:async t=>{const i=(t||"").replace(/^0+/,""),a=await P("cashflow_entries",{query:{company_cnpj:`eq.${i}`,select:"*"}});if(!Array.isArray(a))return[];if(a.length&&(a[0].entrada!==void 0||a[0].saida!==void 0))return a;const n=[...a].sort((s,x)=>new Date(s.date||s.data).getTime()-new Date(x.date||x.data).getTime());let r=0;return n.map(s=>{const x=String(s.kind||"").toLowerCase()==="in"?Number(s.amount||0):0,u=String(s.kind||"").toLowerCase()==="out"?Number(s.amount||0):0;return r+=x-u,{data:s.date||s.data,descricao:s.category||s.descricao||"LanÃ§amento",entrada:x,saida:u,saldo:r,id:s.id??void 0}})},log:t=>ne("app_logs",{...t,ts:new Date().toISOString()})};let G="";async function Ce(t,i){const r=await fetch("https://xzrmzmcoslomtzkzgskn.supabase.co/auth/v1/token?grant_type=password",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI",Accept:"application/json"},body:JSON.stringify({email:t,password:i})});if(!r.ok){try{const s=await r.json();G=String(s.error_description||s.error||`HTTP ${r.status}`)}catch{G=`HTTP ${r.status}`}return null}return G="",r.json()}async function dt(t,i){try{const a=await Ce(t,i);if(!a||!a.access_token)return null;localStorage.setItem("supabase_session",JSON.stringify(a));const n={id:a.user?.id||"unknown",email:t},r={id:n.id,email:n.email||t,name:(n.email||t).split("@")[0],role:"cliente",defaultCompany:null,mode:"supabase",accessToken:a.access_token};return localStorage.setItem("session_user",JSON.stringify(r)),r}catch{return null}}function xt(){const t=localStorage.getItem("session_user");return t?JSON.parse(t):null}function mt(){localStorage.removeItem("session_user"),localStorage.removeItem("supabase_session")}const ht=[{icon:Ae,label:"Dashboard",active:!0},{icon:Te,label:"AnÃ¡lises",active:!1},{icon:q,label:"Fluxo de Caixa",active:!1},{icon:he,label:"Extrato de LanÃ§amentos",active:!1},{icon:ee,label:"RelatÃ³rios",active:!1},{icon:pe,label:"Clientes",active:!1}];function pt(t){return[{icon:ue,label:"NotificaÃ§Ãµes"},{icon:Fe,label:"ConfiguraÃ§Ãµes"},{icon:ee,label:"Gerenciamento â€¢ Logs",adminOnly:!0},{icon:Me,label:"Sair"}].filter(a=>!a.adminOnly||t==="admin")}function ut({onOpenSettings:t,onOpenLogs:i,role:a="cliente"}){const[n,r]=o.useState(null);return e.jsxs(c.aside,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"fixed left-0 top-0 h-screen w-64 bg-gradient-to-b from-charcoal-950 via-graphite-950 to-charcoal-900 border-r border-graphite-900 flex flex-col z-50 pattern-soft",children:[e.jsx("div",{className:"p-6 border-b border-graphite-900 flex justify-center",children:e.jsx(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:e.jsx("img",{src:"/finapp-logo.png",alt:"FinApp Logo",className:"h-16 w-auto object-contain"})})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:ht.map((s,x)=>e.jsxs(c.button,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*x},onHoverStart:()=>r(x),onHoverEnd:()=>r(null),onClick:()=>{if(s.label==="RelatÃ³rios"){const u=new CustomEvent("navigate",{detail:"RelatÃ³rios"});window.dispatchEvent(u)}if(s.label==="Clientes"){const u=new CustomEvent("navigate",{detail:"Clientes"});window.dispatchEvent(u)}if(s.label==="Dashboard"||s.label==="AnÃ¡lises"||s.label==="Fluxo de Caixa"||s.label==="Extrato de LanÃ§amentos"){const u=new CustomEvent("navigate",{detail:s.label});window.dispatchEvent(u)}},className:`
              w-full flex items-center gap-3 px-4 py-2.5 rounded-xl
              transition-all duration-200 group relative
              ${s.active?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-900"}
            `,children:[s.active&&e.jsx(c.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gold-500 rounded-xl",transition:{type:"spring",duration:.6}}),e.jsx(c.span,{whileHover:{scale:1.08,rotate:1},className:"relative z-10",children:e.jsx(s.icon,{className:`w-4 h-4 ${s.active?"text-white":""}`})}),e.jsx("span",{className:"text-sm font-medium relative z-10",children:s.label}),n===x&&!s.active&&e.jsx(c.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},className:"ml-auto",children:e.jsx($e,{className:"w-4 h-4"})})]},s.label))}),e.jsx("div",{className:"p-4 border-t border-graphite-900 space-y-1",children:pt(a).map((s,x)=>e.jsxs(c.button,{whileHover:{x:5},whileTap:{scale:.98},onClick:()=>{s.label==="ConfiguraÃ§Ãµes"&&t&&t(),s.label==="Gerenciamento â€¢ Logs"&&i&&i(),s.label==="Sair"&&(mt(),window.dispatchEvent(new CustomEvent("logout")),location.reload())},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-graphite-400 hover:text-white hover:bg-graphite-900 transition-all duration-200",children:[e.jsx(s.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:s.label})]},s.label))}),e.jsx(c.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"p-4 border-t border-graphite-900",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 transition-all cursor-pointer",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gold-400 to-gold-600 flex items-center justify-center text-white font-bold",children:"AC"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:"Admin BPO"}),e.jsx("p",{className:"text-xs text-graphite-400 truncate",children:"admin@bpo.com"})]})]})})]})}const gt={info:(t,i={})=>S.log({level:"info",service:"UI",message:t,...i}),warn:(t,i={})=>S.log({level:"warn",service:"UI",message:t,...i}),error:(t,i={})=>S.log({level:"error",service:"UI",message:t,...i})};function jt({open:t,onClose:i,contextRules:a=""}){const[n,r]=o.useState(""),[s,x]=o.useState([]),u=o.useRef(null);if(o.useEffect(()=>{t&&u.current&&(u.current.scrollTop=u.current.scrollHeight)},[t,s]),!t)return null;const v=async()=>{const h=n.trim();if(!h)return;const m=Date.now();x(p=>[...p,{role:"user",content:h,ts:m}]),r("");const N=`Consulta: ${h}

Regra: ${a?a.slice(0,160)+"â€¦":"padrÃ£o executiva"}

Resposta: Em breve, integrado ao Supabase / ERPs.`;x(p=>[...p,{role:"assistant",content:N,ts:Date.now()}]);try{await gt.info("oracle_query",{endpoint:"oracle",latencyMs:0})}catch{}};return e.jsx(c.div,{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm",children:e.jsxs(c.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"absolute right-8 top-20 w-[520px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"OrÃ¡culo de IA â€¢ Respostas concisas"})]}),e.jsx("button",{onClick:i,className:"text-muted-foreground hover:text-foreground",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:u,className:"max-h-[48vh] overflow-y-auto p-4 space-y-3",children:[s.map((h,m)=>e.jsx("div",{className:h.role==="user"?"text-foreground":"text-muted-foreground",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:h.content})},m)),s.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"FaÃ§a uma pergunta rÃ¡pida sobre lanÃ§amentos, DRE/DFC, fluxo ou insights."})]}),e.jsxs("div",{className:"p-4 border-t border-border flex items-center gap-2",children:[e.jsx("input",{value:n,onChange:h=>r(h.target.value),placeholder:"Digite sua perguntaâ€¦",className:"flex-1 bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"}),e.jsx("button",{onClick:v,className:"px-3 py-2 rounded-xl bg-gold-500 text-white text-sm hover:bg-gold-600 focus-visible-ring",children:"Enviar"})]})]})})}function ft({onThemeToggle:t,isDark:i=!0,oracleContext:a="",currentPeriod:n="Ano",onPeriodChange:r}){const[s,x]=o.useState(3),[u,v]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(c.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"sticky top-0 z-40 bg-charcoal-950/80 backdrop-blur-xl border-b border-graphite-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("div",{className:"flex-1 max-w-xl",children:e.jsxs("div",{className:"relative group",children:[e.jsx(ge,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-graphite-400 group-focus-within:text-gold-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar transaÃ§Ãµes, clientes, relatÃ³rios...",className:`
                w-full pl-12 pr-4 py-3 
                bg-graphite-900 
                border border-graphite-800 
                rounded-2xl 
                text-white placeholder-graphite-500
                focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20
                transition-all duration-200
              `})]})}),e.jsxs("div",{className:"flex items-center gap-3 ml-6",children:[e.jsx(c.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>v(!0),className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group","aria-label":"Abrir OrÃ¡culo de IA",children:e.jsx(Pe,{className:"w-5 h-5"})}),e.jsxs(c.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group",children:[e.jsx(ue,{className:"w-5 h-5"}),s>0&&e.jsx(c.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-gold-500 rounded-full text-xs font-bold text-white flex items-center justify-center shadow-glow-sm",children:s})]}),e.jsxs(c.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all relative overflow-hidden group",children:[e.jsx(c.div,{initial:!1,animate:{rotate:i?0:180,scale:i?1:0},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Be,{className:"w-5 h-5"})}),e.jsx(c.div,{initial:!1,animate:{rotate:i?180:0,scale:i?0:1},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(se,{className:"w-5 h-5"})}),e.jsx("div",{className:"opacity-0",children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"h-8 w-px bg-graphite-800"}),e.jsxs("div",{className:"hidden lg:flex items-center gap-6 pl-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"Saldo Total"}),e.jsx("p",{className:"text-sm font-bold text-white",children:"R$ 2.847.920,00"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"VariaÃ§Ã£o"}),e.jsx("p",{className:"text-sm font-bold text-emerald-400",children:"+12.5%"})]})]})]})]}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c.h1,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},className:"text-2xl font-bold text-white font-display",children:"Dashboard Financeiro"}),e.jsx(c.p,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"text-sm text-graphite-400 mt-1",children:"VisÃ£o geral â€¢ Atualizado agora hÃ¡ pouco"})]}),e.jsx(c.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"flex items-center gap-2 bg-graphite-900 rounded-xl p-1",children:["Dia","Semana","MÃªs","Ano"].map(h=>e.jsx("button",{onClick:()=>r&&r(h),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${n===h?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-800"}`,children:h},h))})]})})]}),e.jsx(jt,{open:u,onClose:()=>v(!1),contextRules:a})]})}const bt={green:{bg:"from-emerald-500/20 to-emerald-600/10",icon:"bg-emerald-500/20 text-emerald-400",text:"text-emerald-400",border:"border-emerald-500/20"},red:{bg:"from-red-500/20 to-red-600/10",icon:"bg-red-500/20 text-red-400",text:"text-red-400",border:"border-red-500/20"},gold:{bg:"from-gold-500/20 to-gold-600/10",icon:"bg-gold-500/20 text-gold-400",text:"text-gold-400",border:"border-gold-500/20"},blue:{bg:"from-blue-500/20 to-blue-600/10",icon:"bg-blue-500/20 text-blue-400",text:"text-blue-400",border:"border-blue-500/20"}},vt={TrendingUp:q,TrendingDown:_e,Wallet:he,Target:He};function B({title:t,value:i,change:a,icon:n,trend:r="up",color:s="gold",delay:x=0,progress:u,sparklineData:v}){const h=bt[s],m=r==="up",N=vt[n]||q;return e.jsxs(c.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:x,duration:.5,ease:"easeOut"},whileHover:{y:-4,scale:1.02},className:"group relative",children:[e.jsx(c.div,{className:`absolute inset-0 bg-gradient-to-br ${h.bg} rounded-3xl blur-xl opacity-0 group-hover:opacity-60 transition-opacity duration-500`}),e.jsxs("div",{className:"relative neomorphic neomorphic-hover rounded-3xl p-6 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-graphite-400 font-medium mb-2",children:t}),e.jsx(c.h3,{initial:{scale:.9},animate:{scale:1},transition:{delay:x+.2},className:"text-3xl font-bold text-white font-display",children:i})]}),e.jsx(c.div,{whileHover:{rotate:15,scale:1.1},className:`p-3 rounded-2xl bg-gradient-to-br ${h.bg} border ${h.border}`,children:e.jsx(N,{className:"w-6 h-6 text-current",style:{color:h.icon.split(" ")[1].replace("text-","")}})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs(c.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:x+.3},className:`flex items-center gap-1 px-3 py-1.5 rounded-lg ${m?"bg-emerald-500/10":"bg-red-500/10"}`,children:[m?e.jsx(je,{className:"w-4 h-4 text-emerald-400"}):e.jsx(Ve,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:`text-sm font-semibold ${m?"text-emerald-400":"text-red-400"}`,children:[a,"%"]})]}),e.jsx("span",{className:"text-sm text-graphite-400",children:"vs mÃªs anterior"})]}),v&&e.jsx("div",{className:"flex items-end gap-1 h-12 mt-4",children:v.map((p,f)=>{const d=Math.max(...v),y=p/d*100;return e.jsx(c.div,{initial:{height:0},animate:{height:`${y}%`},transition:{delay:x+.5+f*.02,duration:.3},className:`flex-1 bg-gradient-to-t ${h.bg} rounded-sm opacity-70 hover:opacity-100 transition-opacity`},f)})}),u!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-graphite-400 mb-2",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{className:h.text,children:[u,"%"]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(c.div,{initial:{width:0},animate:{width:`${u}%`},transition:{delay:x+.7,duration:.8,ease:"easeOut"},className:`h-full bg-gradient-to-r ${h.bg} relative overflow-hidden`,children:e.jsx(c.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{repeat:1/0,duration:1.5,ease:"linear"}})})})]})]})]})}const H=[{month:"Jan",receita:45e4,despesa:28e4,saldo:17e4},{month:"Fev",receita:52e4,despesa:32e4,saldo:2e5},{month:"Mar",receita:48e4,despesa:29e4,saldo:19e4},{month:"Abr",receita:61e4,despesa:35e4,saldo:26e4},{month:"Mai",receita:58e4,despesa:33e4,saldo:25e4},{month:"Jun",receita:72e4,despesa:42e4,saldo:3e5},{month:"Jul",receita:68e4,despesa:38e4,saldo:3e5},{month:"Ago",receita:75e4,despesa:41e4,saldo:34e4},{month:"Set",receita:82e4,despesa:45e4,saldo:37e4},{month:"Out",receita:89e4,despesa:48e4,saldo:41e4},{month:"Nov",receita:95e4,despesa:52e4,saldo:43e4},{month:"Dez",receita:102e4,despesa:55e4,saldo:47e4}],Nt=({active:t,payload:i,label:a})=>t&&i&&i.length?e.jsxs(c.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-charcoal-900/95 backdrop-blur-xl border border-graphite-800 rounded-2xl p-4 shadow-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-white mb-3",children:a}),i.map((n,r)=>e.jsxs("div",{className:"flex items-center justify-between gap-6 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),e.jsx("span",{className:"text-xs text-graphite-400",children:n.name})]}),e.jsx("span",{className:"text-sm font-bold text-white",children:n.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]},r))]}):null;function le({period:t="Ano"}){return e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Receitas vs Despesas (2024)"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Receita"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Despesa"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Saldo"})]})]})]}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"h-80",children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(Ne,{data:t==="Ano"?H:t==="MÃªs"?H.slice(-4):t==="Semana"?H.slice(-2):H.slice(-1),margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorDespesa",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorSaldo",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ff7a00",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#ff7a00",stopOpacity:0})]})]}),e.jsx(L,{strokeDasharray:"3 3",stroke:"#2a2a2a",opacity:.3}),e.jsx(A,{dataKey:"month",stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1}),e.jsx(T,{stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1,tickFormatter:i=>`R$ ${(i/1e3).toFixed(0)}k`}),e.jsx($,{content:e.jsx(Nt,{}),cursor:{stroke:"#ff7a00",strokeWidth:1}}),e.jsx(F,{type:"monotone",dataKey:"receita",name:"Receita",stroke:"#10b981",strokeWidth:2,fill:"url(#colorReceita)",animationDuration:1500}),e.jsx(F,{type:"monotone",dataKey:"despesa",name:"Despesa",stroke:"#ef4444",strokeWidth:2,fill:"url(#colorDespesa)",animationDuration:1500}),e.jsx(F,{type:"monotone",dataKey:"saldo",name:"Saldo",stroke:"#ff7a00",strokeWidth:3,fill:"url(#colorSaldo)",animationDuration:1500})]})})}),e.jsxs(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8},className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-graphite-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Receita"}),e.jsx("p",{className:"text-lg font-bold text-emerald-400",children:"R$ 8.490.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Despesa"}),e.jsx("p",{className:"text-lg font-bold text-red-400",children:"R$ 4.780.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Saldo LÃ­quido"}),e.jsx("p",{className:"text-lg font-bold text-gold-400",children:"R$ 3.710.000"})]})]})]})}function yt(){const[t,i]=o.useState(!1),[a,n]=o.useState(!0);return e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"neomorphic rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display mb-1",children:"CartÃ£o Corporativo"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Limite e saldo disponÃ­vel"})]}),e.jsxs(c.div,{animate:{rotateY:t?180:0},transition:{duration:.6,type:"spring"},className:"relative preserve-3d cursor-pointer",onClick:()=>i(!t),style:{transformStyle:"preserve-3d"},children:[e.jsx(c.div,{className:"backface-hidden relative",style:{backfaceVisibility:"hidden"},children:e.jsxs("div",{className:"bg-gradient-to-br from-gold-500 via-gold-600 to-gold-700 rounded-2xl p-8 shadow-2xl shadow-gold-500/20 relative overflow-hidden group",children:[e.jsx(c.div,{className:"absolute inset-0 opacity-20",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,ease:"linear"},style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),e.jsx(c.div,{className:"absolute -inset-1 bg-gradient-to-r from-gold-400 to-gold-600 rounded-3xl blur-xl opacity-0 group-hover:opacity-50 transition-opacity duration-500",style:{zIndex:-1}}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 font-medium mb-1",children:"Conta Empresarial"}),e.jsx(c.p,{className:"text-2xl font-bold text-white font-display",animate:{opacity:a?1:0},children:a?"R$ 2.847.920,00":"â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsx(c.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:r=>{r.stopPropagation(),n(!a)},className:"p-2 rounded-xl bg-white/10 backdrop-blur-sm hover:bg-white/20 transition-colors",children:a?e.jsx(Je,{className:"w-5 h-5 text-white"}):e.jsx(Ke,{className:"w-5 h-5 text-white"})})]}),e.jsxs(c.div,{whileHover:{scale:1.05,rotate:5},className:"w-12 h-10 rounded-lg bg-gradient-to-br from-yellow-200 to-yellow-400 mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-1 border border-yellow-600/30 rounded-md"}),e.jsx("div",{className:"absolute inset-2 border border-yellow-600/20 rounded-sm"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-white text-lg font-mono tracking-wider",children:"â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 8492"}),e.jsx(c.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:r=>r.stopPropagation(),className:"p-1.5 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(Ge,{className:"w-4 h-4 text-white"})})]})}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Titular"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"BPO FINANCIAL LTDA"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Validade"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"12/28"})]}),e.jsxs(c.div,{whileHover:{scale:1.1},className:"flex flex-col items-end",children:[e.jsx(We,{className:"w-8 h-8 text-white/90"}),e.jsx("span",{className:"text-[10px] text-white/70 font-bold mt-1",children:"CORPORATE"})]})]})]})}),e.jsx(c.div,{className:"absolute inset-0 backface-hidden",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:e.jsxs("div",{className:"bg-gradient-to-br from-charcoal-900 to-charcoal-950 rounded-3xl p-6 shadow-2xl h-full",children:[e.jsx("div",{className:"w-full h-12 bg-gradient-to-r from-graphite-900 to-graphite-800 mt-4 mb-6 rounded-lg"}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"CVV"}),e.jsx("p",{className:"text-lg font-mono font-bold text-white",children:"â€¢â€¢â€¢"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"CÃ³digo de SeguranÃ§a"}),e.jsx("p",{className:"text-xs text-white/50",children:"NÃ£o compartilhe"})]})]})}),e.jsxs("div",{className:"space-y-3 text-xs text-white/60",children:[e.jsx("p",{children:"Este cartÃ£o Ã© de uso exclusivo corporativo"}),e.jsx("p",{children:"Em caso de perda, bloqueie imediatamente"}),e.jsx("p",{className:"text-gold-400 font-semibold",children:"Suporte: 0800 XXX XXXX"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-white/50",children:"MastercardÂ® Corporate"}),e.jsx("span",{className:"text-xs text-white/50",children:"ID: #BPO-2024-8492"})]})]})})]}),e.jsx(c.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-center text-xs text-graphite-400 mt-3",children:"Clique no cartÃ£o para visualizar o verso"})]})}const wt={success:{label:"ConcluÃ­do",color:"emerald",bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20"},pending:{label:"Pendente",color:"gold",bg:"bg-gold-500/10",text:"text-gold-400",border:"border-gold-500/20"},failed:{label:"Falhou",color:"red",bg:"bg-red-500/10",text:"text-red-400",border:"border-red-500/20"}};function Se(){const[t,i]=o.useState([]),[a,n]=o.useState(""),[r,s]=o.useState([]),[x,u]=o.useState(!0),[v,h]=o.useState("");return o.useEffect(()=>{(async()=>{try{const m=await S.getCompanies();i(m||[]);const N=(m||[]).find(d=>String(d.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,p=(m||[]).find(d=>String(d.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,f=N||p||m&&m[0]?.cnpj||"";n(f)}catch{h("Falha ao carregar empresas")}})()},[]),o.useEffect(()=>{a&&(u(!0),h(""),(async()=>{try{const m=await S.getDFC(a);s(Array.isArray(m)?m:[])}catch{h("Falha ao carregar extrato")}finally{u(!1)}})())},[a]),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-graphite-800/30",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display",children:"TransaÃ§Ãµes Recentes"}),e.jsx("p",{className:"text-sm text-graphite-400 mt-1",children:"Ãšltimas movimentaÃ§Ãµes financeiras"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-graphite-400"}),e.jsx("input",{type:"text",placeholder:"Buscar...",className:"pl-9 pr-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white placeholder-graphite-500 focus:outline-none focus:border-gold-500 transition-all w-48"})]}),e.jsxs("select",{className:"px-4 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all",children:[e.jsx("option",{children:"Todos"}),e.jsx("option",{children:"Hoje"}),e.jsx("option",{children:"Esta Semana"}),e.jsx("option",{children:"Este MÃªs"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-graphite-800",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"DescriÃ§Ã£o"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"AÃ§Ãµes"})]})}),e.jsxs("tbody",{children:[(x?[]:r).map((m,N)=>{const p=(m.entrada||0)-(m.saida||0),f=p>=0?"income":"expense",d=wt[f==="income"?"success":"pending"];return e.jsxs(c.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+N*.05},whileHover:{backgroundColor:"rgba(255, 122, 0, 0.03)"},className:"border-b border-graphite-800/50 last:border-0 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c.div,{whileHover:{scale:1.1,rotate:5},className:"w-10 h-10 rounded-xl bg-gradient-to-br from-graphite-800 to-graphite-900 flex items-center justify-center text-xl group-hover:shadow-lg transition-shadow",children:"ğŸ’¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:m.descricao||"LanÃ§amento"}),e.jsx("p",{className:"text-xs text-graphite-400",children:f==="income"?"Entrada":"SaÃ­da"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-graphite-300",children:m.data||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded-lg ${f==="income"?"bg-emerald-500/10":"bg-red-500/10"}`,children:f==="income"?e.jsx(je,{className:"w-4 h-4 text-emerald-400"}):e.jsx(Xe,{className:"w-4 h-4 text-red-400"})}),e.jsxs("span",{className:`text-sm font-bold ${f==="income"?"text-emerald-400":"text-red-400"}`,children:[p>0?"+":"",Number(p).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(c.span,{whileHover:{scale:1.05},className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold border ${d.bg} ${d.text} ${d.border}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${d.text.replace("text-","bg-")} mr-2`}),Number(m.saldo||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(c.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 rounded-lg hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all",children:e.jsx(Ue,{className:"w-4 h-4"})})})]},m.id||N)}),!x&&r.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-graphite-400",children:["Nenhum lanÃ§amento encontrado para ",a||"empresa"]})})]})]})}),e.jsxs("div",{className:"p-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-graphite-400",children:[x?"Carregando...":`Mostrando ${r.length} lanÃ§amentos`," ",a&&e.jsxs("span",{className:"text-white font-semibold",children:["â€¢ ",a]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:a,onChange:m=>n(m.target.value),className:"px-4 py-2 bg-graphite-800 text-white rounded-xl text-sm",children:[e.jsx("option",{value:"",children:"Selecione CNPJ"}),t.map(m=>e.jsxs("option",{value:m.cnpj,children:[m.cliente_nome," â€¢ ",m.cnpj]},m.cnpj))]})})]})]})}const oe=[{name:"ServiÃ§os BPO",value:58e4,color:"#ff7a00",percentage:45},{name:"Consultoria",value:32e4,color:"#10b981",percentage:25},{name:"Software",value:25e4,color:"#3b82f6",percentage:20},{name:"Outros",value:13e4,color:"#8b5cf6",percentage:10}];function Ct(){const t=oe.reduce((a,n)=>a+n.value,0),i=73;return e.jsxs(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.3},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"DistribuiÃ§Ã£o de Receita"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Por categoria de serviÃ§o"})]}),e.jsxs("div",{className:"relative flex items-center justify-center mb-8",children:[e.jsxs("svg",{width:"280",height:"180",viewBox:"0 0 280 180",className:"transform -rotate-0",children:[e.jsx("path",{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"#2a2a2a",strokeWidth:"24",strokeLinecap:"round"}),e.jsx(c.path,{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"24",strokeLinecap:"round",strokeDasharray:"314",initial:{strokeDashoffset:314},animate:{strokeDashoffset:314-314*i/100},transition:{duration:2,ease:"easeOut"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981"}),e.jsx("stop",{offset:"50%",stopColor:"#ff7a00"}),e.jsx("stop",{offset:"100%",stopColor:"#ef4444"})]})})]}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/4 text-center",children:e.jsxs(c.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},children:[e.jsxs("p",{className:"text-4xl font-bold text-white font-display mb-1",children:[i,"%"]}),e.jsx("p",{className:"text-xs text-graphite-400",children:"Meta Atingida"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-2",children:[e.jsx(q,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-sm font-semibold text-emerald-400",children:"+8.2%"})]})]})})]}),e.jsx("div",{className:"space-y-3",children:oe.map((a,n)=>e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+n*.1},className:"group/item",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c.div,{whileHover:{scale:1.2},className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),e.jsx("span",{className:"text-sm text-graphite-300 group-hover/item:text-white transition-colors",children:a.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:a.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})}),e.jsxs("span",{className:"text-xs text-graphite-400 ml-2",children:["(",a.percentage,"%)"]})]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(c.div,{initial:{width:0},animate:{width:`${a.percentage}%`},transition:{delay:1+n*.1,duration:.8,ease:"easeOut"},className:"h-full rounded-full relative",style:{backgroundColor:a.color},children:e.jsx(c.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear",delay:1.5+n*.1},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"})})})]},a.name))}),e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},className:"mt-6 pt-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-graphite-400",children:"Total de Receita"}),e.jsx("span",{className:"text-lg font-bold text-gold-400",children:t.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]})]})}function St(t){return["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][t.getMonth()]}function kt({period:t="Ano"}){const[i,a]=o.useState([]),[n,r]=o.useState(""),[s,x]=o.useState([]),[u,v]=o.useState(!0),[h,m]=o.useState("");o.useEffect(()=>{(async()=>{try{const g=await S.getCompanies();a(g||[]),r("26888098000159")}catch{m("Falha ao carregar empresas")}})()},[]),o.useEffect(()=>{n&&(v(!0),(async()=>{try{const g=await S.getDFC(n);x(Array.isArray(g)?g:[])}finally{v(!1)}})())},[n]);const{receitaTotal:N,despesasTotal:p,lucro:f}=o.useMemo(()=>{const g=s.reduce((w,C)=>(w.receitaTotal+=Number(C.entrada||0),w.despesasTotal+=Number(C.saida||0),w),{receitaTotal:0,despesasTotal:0});return{...g,lucro:g.receitaTotal-g.despesasTotal}},[s]),d=o.useMemo(()=>{const g=new Map;s.forEach(C=>{const I=C.data?new Date(C.data):new Date,k=St(I),R=g.get(k)||{month:k,receita:0,despesas:0};R.receita+=Number(C.entrada||0),R.despesas+=Number(C.saida||0),g.set(k,R)});const w=Array.from(g.values());return t==="Ano"?w:t==="MÃªs"?w.slice(-1):t==="Semana"?w.slice(-1).map(C=>({...C,month:"Semana"})):w.slice(-1).map(C=>({...C,month:"Hoje"}))},[s,t]),y=[{name:"Receita",value:N,delta:0},{name:"Despesas",value:p,delta:0},{name:"Lucro",value:f,delta:0}];return e.jsxs(it,{numItemsSm:1,numItemsMd:2,numItemsLg:3,className:"gap-6",children:[y.map(g=>e.jsxs(ae,{decoration:"top",decorationColor:"orange",className:"rounded-3xl bg-card border border-border shadow-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{children:g.name}),e.jsxs(nt,{deltaType:g.delta>=0?"moderateIncrease":"moderateDecrease",children:[g.delta,"%"]})]}),e.jsxs(lt,{children:["R$ ",Number(g.value).toLocaleString("pt-BR")]}),e.jsx(ie,{className:"mt-2 text-sm text-muted-foreground",children:u?"Carregando...":`Empresa ${n||""}`})]},g.name)),e.jsxs(ae,{className:"rounded-3xl col-span-1 md:col-span-2 bg-card border border-border shadow-card",children:[e.jsx(re,{children:"EvoluÃ§Ã£o Mensal"}),e.jsx(ie,{className:"text-sm text-muted-foreground",children:"Receita vs Despesas"}),e.jsx("div",{className:"mt-4 h-56",children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(W,{data:d,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"barReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#ff7a00",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#ff7a00",stopOpacity:.4})]}),e.jsxs("linearGradient",{id:"barDespesas",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#38bdf8",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#38bdf8",stopOpacity:.4})]}),e.jsx("filter",{id:"barShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3","flood-color":"#000","flood-opacity":"0.35"})})]}),e.jsx(L,{stroke:"rgba(200,200,200,0.12)",vertical:!1}),e.jsx(A,{dataKey:"month",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(T,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},tickFormatter:g=>`R$ ${Number(g).toLocaleString("pt-BR")}`}),e.jsx($,{contentStyle:{background:"#11161C",border:"1px solid #1B232C"},formatter:g=>`R$ ${Number(g).toLocaleString("pt-BR")}`}),e.jsx(X,{}),e.jsx(z,{dataKey:"receita",name:"Receita",fill:"url(#barReceita)",radius:[8,8,0,0],filter:"url(#barShadow)"}),e.jsx(z,{dataKey:"despesas",name:"Despesas",fill:"url(#barDespesas)",radius:[8,8,0,0],filter:"url(#barShadow)"})]})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:n,onChange:g=>r(g.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),i.map(g=>e.jsxs("option",{value:g.cnpj,children:[g.cliente_nome," â€¢ ",g.cnpj]},g.cnpj))]})]})]})]})}function Et(){const[t,i]=o.useState([]),[a,n]=o.useState(""),[r,s]=o.useState(0),[x,u]=o.useState(0),[v,h]=o.useState(!0),[m,N]=o.useState("");return o.useEffect(()=>{(async()=>{try{const p=await S.getCompanies();i(p||[]);const f=(p||[]).find(g=>String(g.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,d=(p||[]).find(g=>String(g.cliente_nome||"").toLowerCase().includes("volpe")||String(g.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,y=f||d||p&&p[0]?.cnpj||"";n(y)}catch{N("Falha ao carregar empresas")}})()},[]),o.useEffect(()=>{a&&(h(!0),(async()=>{try{const p=await S.getDRE(a);s(Array.isArray(p)?p.length:0);const f=await S.getDFC(a);u(Array.isArray(f)?f.length:0)}catch{N("Falha ao carregar relatÃ³rios")}finally{h(!1)}})())},[a]),e.jsx("div",{className:"grid gap-6",children:e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"RelatÃ³rios Gerenciais"}),m&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:m}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"DRE Consolidada"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v?"Carregando...":`${r} linhas`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v?"Carregando...":`${x} lanÃ§amentos`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Receita por Cliente"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v?"Carregando...":`${t.length} clientes`})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:a,onChange:p=>n(p.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),t.map(p=>e.jsxs("option",{value:p.cnpj,children:[p.cliente_nome," â€¢ ",p.cnpj]},p.cnpj))]})]})]})})}function Dt(){const[t,i]=o.useState([]),[a,n]=o.useState(!0),[r,s]=o.useState("");return o.useEffect(()=>{(async()=>{try{const x=await S.getCompanies();i(Array.isArray(x)?x:[])}catch{s("Falha ao carregar clientes")}finally{n(!1)}})()},[]),e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes â€¢ Dados Reais"}),r&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:r}),e.jsx("div",{className:"mt-4 rounded-2xl border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Cliente"}),e.jsx("th",{className:"text-left p-3",children:"CNPJ"}),e.jsx("th",{className:"text-left p-3",children:"Grupo"})]})}),e.jsxs("tbody",{children:[(a?[]:t).map((x,u)=>e.jsxs("tr",{className:"border-t border-border",children:[e.jsx("td",{className:"p-3",children:x.cliente_nome}),e.jsx("td",{className:"p-3",children:x.cnpj}),e.jsx("td",{className:"p-3",children:x.grupo_empresarial})]},u)),!a&&t.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-3 text-sm text-muted-foreground",colSpan:3,children:"Nenhum cliente encontrado"})})]})]})})]})}function Y(...t){return ct(ot(t))}function _({className:t,...i}){return e.jsx("div",{className:Y("bg-card border border-border rounded-3xl shadow-card transition-all duration-300",t),...i})}function V({className:t,...i}){return e.jsx("div",{className:Y("flex items-center justify-between p-4 pb-2",t),...i})}function J({className:t,...i}){return e.jsx("h3",{className:Y("text-sm text-foreground",t),...i})}function K({className:t,...i}){return e.jsx("div",{className:Y("p-4 pt-2",t),...i})}const Rt=Qe,It=et,ke=o.forwardRef(({className:t,...i},a)=>e.jsx(fe,{ref:a,className:"inline-flex items-center justify-between gap-2 rounded-lg border border-[#1B232C] bg-[#0a0f14] px-3 py-1.5 text-xs text-gray-300 shadow-sm hover:bg-[#0f141b] focus:outline-none",...i}));ke.displayName=fe.displayName;const Ee=o.forwardRef(({className:t,children:i,position:a="popper",...n},r)=>e.jsx(qe,{children:e.jsx(be,{ref:r,className:"z-50 min-w-[8rem] overflow-hidden rounded-xl border border-[#1B232C] bg-[#0a0f14] p-1 shadow-xl",position:a,...n,children:e.jsx(Ye,{className:"p-1",children:i})})}));Ee.displayName=be.displayName;const De=o.forwardRef(({className:t,children:i,...a},n)=>e.jsx(ve,{ref:n,className:"relative flex w-full cursor-pointer select-none items-center rounded-lg px-3 py-2 text-xs text-gray-300 outline-none data-[highlighted]:bg-[#0f141b]",...a,children:e.jsx(Ze,{children:i})}));De.displayName=ve.displayName;const ce=t=>String(t).padStart(2,"0"),de=t=>{const i=new Set;if(t.forEach(r=>{if(!r)return;const s=r.slice(0,7);/^\d{4}-\d{2}$/.test(s)&&i.add(s)}),i.size===0){const r=new Date().getFullYear().toString();return Array.from({length:12},(s,x)=>`${r}-${ce(x+1)}`)}const a=Array.from(new Set(Array.from(i).map(r=>r.split("-")[0]))).sort(),n=[];return a.forEach(r=>{for(let s=1;s<=12;s+=1)n.push(`${r}-${ce(s)}`)}),n};function xe({className:t}){const[i,a]=o.useState([]),[n,r]=o.useState("26888098000159"),[s,x]=o.useState([]),[u,v]=o.useState([]),[h,m]=o.useState(!1);o.useEffect(()=>{N()},[]),o.useEffect(()=>{n&&p(n)},[n]);const N=async()=>{try{const j=(await S.getCompanies()).filter(b=>b.cliente_nome?.toLowerCase().includes("volpe")||String(b.cnpj||"").startsWith("26888098")).map(b=>({...b,cnpj:b.cnpj?b.cnpj.replace(/^0+/,""):b.cnpj})).sort((b,E)=>{const M=String(b.cnpj||"")==="26888098000159"?-1:1,Ie=String(E.cnpj||"")==="26888098000159"?-1:1;return M-Ie});a(j)}catch(l){console.error("Erro ao carregar empresas:",l)}},p=async l=>{m(!0);try{const[j,b]=await Promise.all([S.getDRE(l),S.getDFC(l)]);x(j||[]),v(b||[])}catch(j){console.error("Erro ao carregar dados:",j)}finally{m(!1)}},f=l=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l),d=i.find(l=>l.cnpj===n)?.cliente_nome||"Empresa",y=de(s.map(l=>l.data)),g=de(u.map(l=>l.data)),w=s.reduce((l,j)=>{const b=j.natureza||"Outros";return l[b]=(l[b]||0)+Number(j.valor||0),l},{}),C=(()=>{const l={};return s.forEach(j=>{const b=j.data?j.data.slice(0,7):y[0],E=j.natureza||"Outros",M=Number(j.valor||0);l[E]||(l[E]={}),l[E][b]=(l[E][b]||0)+M}),y.map(j=>{const b={month:j};return Object.entries(l).forEach(([E,M])=>{b[E]=M[j]||0}),b})})(),I=(()=>{const l={};return u.forEach(j=>{const b=j.data?j.data.slice(0,7):g[0];l[b]||(l[b]={entradas:0,saidas:0}),l[b].entradas+=Number(j.entrada||0),l[b].saidas+=Number(j.saida||0)}),g.map(j=>{const b=l[j]?.entradas||0,E=l[j]?.saidas||0;return{month:j,entradas:b,saidas:E,saldo:b-E}})})(),k=I.reduce((l,j)=>(l.entradas+=j.entradas,l.saidas+=j.saidas,l.saldo+=j.saldo,l),{entradas:0,saidas:0,saldo:0}),R=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];return e.jsxs("div",{className:t,children:[e.jsx("div",{className:"mb-6",children:e.jsxs(_,{children:[e.jsx(V,{children:e.jsx(J,{className:"text-lg",children:"AnÃ¡lises - SeleÃ§Ã£o de Empresa"})}),e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Empresa:"}),e.jsxs(Rt,{value:n,onValueChange:r,children:[e.jsx(ke,{className:"w-[300px]",children:e.jsx(It,{placeholder:"Selecione uma empresa"})}),e.jsx(Ee,{children:i.map(l=>e.jsxs(De,{value:l.cnpj,children:[l.cliente_nome," (",l.cnpj,")"]},l.cnpj))})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Visualizando: ",d]})]})})]})}),h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Carregando dados..."})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsx(V,{children:e.jsx(J,{children:"DRE - DemonstraÃ§Ã£o de Resultados"})}),e.jsx(K,{children:s.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Resumo por Grupo"}),e.jsx("div",{className:"space-y-1",children:Object.entries(w).map(([l,j])=>{const b=Number(j||0);return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:l}),e.jsx("span",{className:b>=0?"text-green-600":"text-red-600",children:f(b)})]},l)})})]}),e.jsx("div",{className:"h-64",children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(W,{data:C,children:[e.jsx(L,{strokeDasharray:"3 3"}),e.jsx(A,{dataKey:"month"}),e.jsx(T,{tickFormatter:l=>`R$ ${(l/1e3).toFixed(0)}k`}),e.jsx($,{formatter:l=>f(l)}),e.jsx(X,{}),Object.keys(w).map((l,j)=>e.jsx(z,{dataKey:l,fill:R[j%R.length]},l))]})})})]}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DRE disponÃ­vel para esta empresa"})})]}),e.jsxs(_,{children:[e.jsx(V,{children:e.jsx(J,{children:"DFC - DemonstraÃ§Ã£o de Fluxo de Caixa"})}),e.jsx(K,{children:u.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Resumo de Fluxo"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:f(k.entradas)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Entradas"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:f(k.saidas)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total SaÃ­das"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f(k.saldo)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Saldo Final"})]})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(rt,{data:I,children:[e.jsx(L,{strokeDasharray:"3 3"}),e.jsx(A,{dataKey:"month"}),e.jsx(T,{tickFormatter:l=>`R$ ${(l/1e3).toFixed(0)}k`}),e.jsx($,{formatter:l=>f(l)}),e.jsx(X,{}),e.jsx(Z,{type:"monotone",dataKey:"entradas",stroke:"#10b981",name:"Entradas"}),e.jsx(Z,{type:"monotone",dataKey:"saidas",stroke:"#ef4444",name:"SaÃ­das"}),e.jsx(Z,{type:"monotone",dataKey:"saldo",stroke:"#3b82f6",name:"Saldo"})]})})})]}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DFC disponÃ­vel para esta empresa"})})]}),e.jsxs(_,{className:"lg:col-span-2",children:[e.jsx(V,{children:e.jsxs(J,{children:["Dados Detalhados - ",d]})}),e.jsx(K,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"DRE Detalhado"}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-1",children:"Grupo"}),e.jsx("th",{className:"text-left py-1",children:"Conta"}),e.jsx("th",{className:"text-right py-1",children:"Valor"})]})}),e.jsx("tbody",{children:s.slice(0,10).map((l,j)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-1",children:l.natureza||"Outros"}),e.jsx("td",{className:"py-1",children:l.conta}),e.jsx("td",{className:"py-1 text-right",children:f(l.valor||0)})]},j))})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"DFC Detalhado"}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-1",children:"Data"}),e.jsx("th",{className:"text-left py-1",children:"DescriÃ§Ã£o"}),e.jsx("th",{className:"text-right py-1",children:"Valor"})]})}),e.jsx("tbody",{children:u.slice(0,10).map((l,j)=>{const b=l.entrada?l.entrada:l.saida?-l.saida:l.saldo||0;return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-1",children:l.data}),e.jsx("td",{className:"py-1",children:l.descricao}),e.jsx("td",{className:"py-1 text-right",children:f(b)})]},j)})})]})})]})]})})]})]})]})}function Ot(){return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extrato de LanÃ§amentos â€¢ Dados Reais"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registros financeiros consultados via Supabase"})]}),e.jsx(Se,{})]})}const Re={duration:.2,ease:[.22,1,.36,1]},Lt={duration:.35,ease:[.22,1,.36,1]},At={hidden:{opacity:0,y:16},show:{opacity:1,y:0,transition:Lt}},D={whileHover:{scale:1.02},transition:Re},Q={hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:Re}},me="oracle_context_rules";function Tt({open:t,onClose:i,onUpdateOracleContext:a}){const[n,r]=o.useState("");if(o.useEffect(()=>{if(t){const x=localStorage.getItem(me)||"";r(x)}},[t]),!t)return null;const s=()=>{localStorage.setItem(me,n),a&&a(n),i()};return e.jsx(c.div,{className:"fixed inset-0 z-[65] bg-black/60 backdrop-blur-sm",children:e.jsxs(c.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"mx-auto mt-20 max-w-[720px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"ConfiguraÃ§Ãµes â€¢ Regras de Contexto"})]}),e.jsx("button",{onClick:i,className:"text-muted-foreground hover:text-foreground",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Regras de contexto do OrÃ¡culo (empresa/grupo, fontes, tom e escopo)"}),e.jsx("textarea",{value:n,onChange:x=>r(x.target.value),rows:8,className:"w-full bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:i,className:"px-3 py-2 rounded-xl bg-secondary text-secondary-foreground",children:"Cancelar"}),e.jsx("button",{onClick:s,className:"px-3 py-2 rounded-xl bg-primary text-primary-foreground",children:"Salvar"})]})]})]})})}function $t({open:t,onClose:i}){const[a,n]=o.useState("all"),[r,s]=o.useState("all"),[x,u]=o.useState("24h"),[v,h]=o.useState([]);if(o.useEffect(()=>{if(!t)return;const d={select:"*",order:"ts.desc",limit:"200"};S.restGet("app_logs",{query:d}).then(h).catch(()=>h([]))},[t,a,r,x]),!t)return null;const m=v.filter(d=>(a==="all"||d.level===a)&&(r==="all"||d.service===r)),N=m.map(d=>({ts:d.ts,info:d.level==="info"?1:0,warn:d.level==="warn"?1:0,error:d.level==="error"?1:0})),p=Object.values(m.reduce((d,y)=>(y.endpoint&&(d[y.endpoint]=(d[y.endpoint]||0)+1),d),{})).length?Object.entries(m.reduce((d,y)=>(y.endpoint&&(d[y.endpoint]=(d[y.endpoint]||0)+1),d),{})).slice(0,8).map(([d,y])=>({endpoint:d,count:y})):[],f=m.filter(d=>d.latencyMs).map(d=>({endpoint:d.endpoint||"N/A",latency:d.latencyMs}));return e.jsx(c.div,{className:"fixed inset-0 z-[75] bg-black/55 backdrop-blur-sm",children:e.jsxs(c.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},className:"mx-auto mt-16 max-w-[1200px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Gerenciamento â€¢ Logs"})]}),e.jsx("button",{onClick:i,className:"text-muted-foreground hover:text-foreground",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5 flex items-center gap-3",children:[e.jsxs("select",{value:x,onChange:d=>u(d.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"24h",children:"24h"}),e.jsx("option",{value:"7d",children:"7 dias"}),e.jsx("option",{value:"30d",children:"30 dias"})]}),e.jsxs("select",{value:a,onChange:d=>n(d.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warn",children:"Warn"}),e.jsx("option",{value:"error",children:"Error"})]}),e.jsxs("select",{value:r,onChange:d=>s(d.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"UI",children:"UI"}),e.jsx("option",{value:"API",children:"API"}),e.jsx("option",{value:"Edge",children:"Edge"})]})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"NÃ­veis ao longo do tempo"})}),e.jsx("div",{className:"p-4 pt-0 h-[300px]",children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(Ne,{data:N,children:[e.jsx(L,{stroke:"rgba(200,200,200,0.15)",vertical:!1}),e.jsx(A,{dataKey:"ts",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},hide:!0}),e.jsx(T,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx($,{}),e.jsx(X,{}),e.jsx(F,{type:"monotone",dataKey:"info",stackId:"1",stroke:"#38bdf8",fill:"#38bdf8"}),e.jsx(F,{type:"monotone",dataKey:"warn",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b"}),e.jsx(F,{type:"monotone",dataKey:"error",stackId:"1",stroke:"#ef4444",fill:"#ef4444"})]})})})]}),e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Top endpoints"})}),e.jsx("div",{className:"p-4 pt-0 h-[300px]",children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(W,{data:p,children:[e.jsx(L,{stroke:"rgba(200,200,200,0.15)"}),e.jsx(A,{dataKey:"endpoint",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(T,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx($,{}),e.jsx(z,{dataKey:"count",fill:"#ff7a00"})]})})})]}),e.jsxs("div",{className:"card-premium xl:col-span-2",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"LatÃªncia por endpoint"})}),e.jsx("div",{className:"p-4 pt-0 h-[300px]",children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(W,{data:f,children:[e.jsx(L,{stroke:"rgba(200,200,200,0.15)"}),e.jsx(A,{dataKey:"endpoint",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(T,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx($,{}),e.jsx(z,{dataKey:"latency",fill:"#10b981"})]})})})]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"rounded-2xl border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Ts"}),e.jsx("th",{className:"text-left p-3",children:"NÃ­vel"}),e.jsx("th",{className:"text-left p-3",children:"ServiÃ§o"}),e.jsx("th",{className:"text-left p-3",children:"Endpoint"}),e.jsx("th",{className:"text-left p-3",children:"Empresa"}),e.jsx("th",{className:"text-left p-3",children:"Mensagem"})]})}),e.jsx("tbody",{children:m.slice(0,50).map((d,y)=>e.jsxs("tr",{className:"border-t border-border",children:[e.jsx("td",{className:"p-3",children:d.ts}),e.jsx("td",{className:"p-3",children:d.level}),e.jsx("td",{className:"p-3",children:d.service}),e.jsx("td",{className:"p-3",children:d.endpoint||""}),e.jsx("td",{className:"p-3",children:d.companyCnpj||""}),e.jsx("td",{className:"p-3",children:d.message})]},y))})]})})})]})})}function Ft({open:t,onClose:i,onLogged:a}){const[n,r]=o.useState("dev@angrax.com.br"),[s,x]=o.useState("B5b0dcf500@#"),[u,v]=o.useState(""),[h,m]=o.useState(!1),N=async()=>{v(""),m(!0);try{const p=await Ce(n,s);if(!p){v("Credenciais invÃ¡lidas"),m(!1);return}const f={...p,defaultCompany:"26888098000159",companies:[{cliente_nome:"LOJA 01 - VOLPE MATRIZ",cnpj:"26888098000159"}]};a(f),i()}catch(p){v(p.message||"Erro ao fazer login"),m(!1)}};return t?e.jsx(c.div,{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-xl flex items-center justify-center",children:e.jsx(c.div,{variants:At,initial:"hidden",animate:"show",className:"neomorphic neomorphic-hover w-[380px] rounded-xl border border-graphite-800/30 shadow-soft-lg",children:e.jsxs("div",{className:"p-7 space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:"/finapp-logo.png",alt:"fin.app",className:"w-40 h-auto"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Login - Grupo VOLPE"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acesso exclusivo para o grupo VOLPE"})]}),e.jsx(c.input,{whileHover:D.whileHover,value:n,onChange:p=>r(p.target.value),placeholder:"E-mail",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:h}),e.jsx(c.input,{whileHover:D.whileHover,type:"password",value:s,onChange:p=>x(p.target.value),placeholder:"Senha",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:h}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e.jsx("p",{children:"Empresa padrÃ£o: LOJA 01 - VOLPE MATRIZ (0159)"})}),u&&e.jsx("p",{className:"text-xs text-destructive text-center",children:u}),e.jsx("div",{className:"flex gap-2 justify-end pt-2",children:e.jsx(c.button,{whileHover:D.whileHover,whileTap:{scale:.98},onClick:N,disabled:h,className:"w-full px-3 py-2 rounded-sm bg-emerald-400 text-white hover:bg-emerald-500 disabled:opacity-50",children:h?"Entrando...":"Entrar"})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[e.jsx("p",{children:"UsuÃ¡rio: dev@angrax.com.br"}),e.jsx("p",{children:"Empresa: 26888098000159 (Matriz)"})]})]})})}):null}function Mt(){const[t,i]=o.useState(!0),[a,n]=o.useState(!1),[r,s]=o.useState(!1),[x,u]=o.useState(""),[v]=o.useState("admin"),[h,m]=o.useState("Dashboard"),[N,p]=o.useState("Ano"),[f,d]=o.useState(()=>xt()),[y,g]=o.useState(""),[w,C]=o.useState(""),[I,k]=o.useState(""),R=window.location.hostname.includes("dev.angrax.com.br")||window.location.hostname.includes("localhost");return o.useState(()=>{const l=j=>m(j.detail);return window.addEventListener("navigate",l),()=>window.removeEventListener("navigate",l)}),e.jsxs("div",{className:`min-h-screen ${t?"dark bg-gradient-to-br from-charcoal-950 via-graphite-950 to-charcoal-900":"bg-gradient-to-br from-gray-50 via-white to-gray-100"} transition-colors duration-500`,children:[e.jsx(ut,{role:v,onOpenSettings:()=>n(!0),onOpenLogs:()=>s(!0)}),e.jsxs("div",{className:"ml-64 flex flex-col min-h-screen",children:[e.jsx(ft,{isDark:t,onThemeToggle:()=>i(!t),oracleContext:x,currentPeriod:N,onPeriodChange:l=>p(l)}),e.jsxs("main",{className:"flex-1 p-8",children:[h==="Dashboard"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[e.jsx(B,{title:"Receita Total",value:"R$ 847.250",change:12.5,trend:"up",icon:"TrendingUp",color:"green",sparklineData:[42,48,45,52,58,65,70,68,75,80,85,90]}),e.jsx(B,{title:"Despesas",value:"R$ 523.180",change:8.2,trend:"up",icon:"TrendingDown",color:"red",sparklineData:[30,35,40,38,42,45,48,50,52,54,56,58]}),e.jsx(B,{title:"Limite DiÃ¡rio",value:"R$ 45.000",change:82,trend:"up",icon:"Wallet",color:"blue",sparklineData:[20,25,30,28,32,35,38,40,42,43,44,45],progress:82}),e.jsx(B,{title:"Meta de PoupanÃ§a",value:"R$ 150.000",change:67,trend:"up",icon:"Target",color:"gold",sparklineData:[10,20,35,45,60,70,80,90,95,100,105,110],progress:67})]}),e.jsx("section",{className:"mb-6",children:e.jsx(kt,{period:N})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(le,{period:N})}),e.jsx("div",{children:e.jsx(yt,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(Se,{})}),e.jsx("div",{children:e.jsx(Ct,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[e.jsx(c.div,{className:"neomorphic neomorphic-hover rounded-2xl p-6 border border-graphite-800/30",whileHover:D.whileHover,transition:D.transition,variants:Q,initial:"hidden",animate:"show",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/20",children:e.jsx(pe,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Clientes Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:"1.248"}),e.jsx("p",{className:"text-xs text-success mt-1",children:"+8% este mÃªs"})]})]})}),e.jsx(c.div,{className:"neomorphic neomorphic-hover rounded-2xl p-6 border border-graphite-800/30",whileHover:D.whileHover,transition:D.transition,variants:Q,initial:"hidden",animate:"show",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/20",children:e.jsx(ee,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Documentos Processados"}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:"8.542"}),e.jsx("p",{className:"text-xs text-success mt-1",children:"+15% este mÃªs"})]})]})}),e.jsx(c.div,{className:"neomorphic neomorphic-hover rounded-2xl p-6 border border-graphite-800/30",whileHover:D.whileHover,transition:D.transition,variants:Q,initial:"hidden",animate:"show",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gold-500/20 to-gold-600/10 border border-gold-500/20",children:e.jsx(at,{className:"w-6 h-6 text-gold-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"AutomaÃ§Ã£o"}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:"94.8%"}),e.jsx("p",{className:"text-xs text-success mt-1",children:"+2.3% este mÃªs"})]})]})})]})]}),h==="AnÃ¡lises"&&e.jsx(xe,{}),h==="Fluxo de Caixa"&&e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(le,{period:N})}),h==="Extrato de LanÃ§amentos"&&e.jsx(Ot,{}),h==="RelatÃ³rios"&&e.jsx(Et,{}),h==="Clientes"&&e.jsx(Dt,{}),h==="AnÃ¡lises"&&e.jsx(xe,{})]}),e.jsx(Tt,{open:a,onClose:()=>n(!1),onUpdateOracleContext:u}),e.jsx($t,{open:r,onClose:()=>s(!1)}),!f&&(R?e.jsx(Ft,{open:!f,onClose:()=>{},onLogged:l=>d(l)}):e.jsx("div",{className:"fixed inset-0 z-[90] bg-black/60 backdrop-blur flex items-center justify-center",children:e.jsxs("div",{className:"w-[360px] rounded-xl border border-graphite-800 bg-graphite-900 p-4 space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Entrar"}),I&&e.jsx("div",{className:"text-xs text-red-400",children:I}),e.jsx("input",{value:y,onChange:l=>g(l.target.value),placeholder:"E-mail",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("input",{type:"password",value:w,onChange:l=>C(l.target.value),placeholder:"Senha",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("button",{onClick:async()=>{k("");try{const l=await dt(y,w);if(!l){k(G||"Credenciais invÃ¡lidas");return}d(l)}catch(l){k(l.message||"Erro ao fazer login")}},className:"px-3 py-1 rounded-sm bg-emerald-400 text-white text-xs",children:"Entrar"})]})}))]})]})}Oe.createRoot(document.getElementById("root")).render(e.jsx(Le.StrictMode,{children:e.jsx(Mt,{})}));
