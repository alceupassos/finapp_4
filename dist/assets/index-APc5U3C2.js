import{a as c,j as e,c as oe,h as ta}from"./vendor-react-LKNicB05.js";import{m as b}from"./vendor-motion-B58r-QRs.js";import{L as ra,C as oa,N as na,T as H,W as Fe,F as ia,U as la,a as ca,B as Le,S as ne,b as da,c as ma,X as Be,d as Ve,e as xa,M as pa,f as Se,g as _e,h as de,A as Ge,i as ua,E as ha,j as ga,k as fa,l as ba,m as ja,n as va,o as Je,P as Na,p as qe,V as ya,I as Ke,q as wa,R as Ca,r as Sa,s as He,t as Ue,u as Ye,v as Ea,w as Da,x as te,y as Ra,z as Ia,D as Aa,G as Ma,H as Oa,J as ka}from"./vendor-ui-CH9-Rzli.js";import{i as B,j as se,k as Z,l as Q,m as ee,n as Y,o as V,p as he,q as me,r as K,s as Pa,t as Xe,u as We,v as Ne}from"./vendor-recharts-CC_6uSjI.js";import{c as Ta,a as Ee,s as De,u as za,b as $a,m as Re}from"./vendor-tremor-DHV9nXN5.js";import{a5 as Fa,b$ as La}from"./vendor-D5S_S527.js";import{t as Ba}from"./vendor-tailwind-merge-DxgBj8Ug.js";import"./vendor-date-fns-B_6AWE7E.js";import"./vendor-tanstack-ofcTeKip.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const Ze="https://xzrmzmcoslomtzkzgskn.supabase.co",xe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI";function Qe(){const s=localStorage.getItem("supabase_session");if(!s)return null;try{return JSON.parse(s).access_token||null}catch{return null}}async function ae(s,o={}){const n=new URL(`${Ze}/rest/v1/${s}`);Object.entries(o.query||{}).forEach(([r,d])=>n.searchParams.set(r,d));const i=Qe()||xe,t=await fetch(n.toString(),{headers:{apikey:xe,Authorization:`Bearer ${i}`,Accept:"application/json"}});if(!t.ok)throw new Error(`Supabase GET ${s} failed: ${t.status}`);return t.json()}async function Ie(s,o){const n=`${Ze}/rest/v1/${s}`,i=Qe()||xe,t=await fetch(n,{method:"POST",headers:{apikey:xe,Authorization:`Bearer ${i}`,"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify(o)});if(!t.ok)throw new Error(`Supabase POST ${s} failed: ${t.status}`);return t.json()}const P={restGet:ae,restPost:Ie,getCompanies:async()=>{const s=await ae("dre_entries",{query:{select:"company_cnpj,company_nome",limit:"1000"}}),o=await ae("cashflow_entries",{query:{select:"company_cnpj,company_nome",limit:"1000"}}),n=new Map;return[...s,...o].forEach(i=>{const t=i.company_cnpj;n.has(t)||n.set(t,{cnpj:t,cliente_nome:i.company_nome,grupo_empresarial:i.company_nome.includes("VOLPE")?"Grupo Volpe":"Outros"})}),Array.from(n.values()).sort((i,t)=>i.cnpj.localeCompare(t.cnpj))},getDRE:async s=>{const o=(s||"").replace(/^0+/,""),n=await ae("dre_entries",{query:{company_cnpj:`eq.${o}`,select:"*",limit:"5000"}});return Array.isArray(n)?(console.log("üîç getDRE recebeu",n.length,"registros para CNPJ",o),n.map(i=>({data:i.date||i.data,conta:i.account??i.conta??"Conta",natureza:i.nature??i.natureza??null,valor:Number(i.amount??i.valor??0)}))):[]},getDFC:async s=>{const o=(s||"").replace(/^0+/,""),n=await ae("cashflow_entries",{query:{company_cnpj:`eq.${o}`,select:"*",limit:"5000"}});if(!Array.isArray(n))return[];if(console.log("üîç getDFC recebeu",n.length,"registros para CNPJ",o),n.length&&(n[0].entrada!==void 0||n[0].saida!==void 0))return n;const i=[...n].sort((r,d)=>new Date(r.date||r.data).getTime()-new Date(d.date||d.data).getTime());let t=0;return i.map(r=>{const d=String(r.kind||"").toLowerCase()==="in"?Number(r.amount||0):0,m=String(r.kind||"").toLowerCase()==="out"?Number(r.amount||0):0;return t+=d-m,{data:r.date||r.data,descricao:r.category||r.descricao||"Lan√ßamento",entrada:d,saida:m,saldo:t,id:r.id??void 0}})},log:s=>Ie("app_logs",{...s,ts:new Date().toISOString()})};let ie="";async function ea(s,o){const t=await fetch("https://xzrmzmcoslomtzkzgskn.supabase.co/auth/v1/token?grant_type=password",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI",Accept:"application/json"},body:JSON.stringify({email:s,password:o})});if(!t.ok){try{const r=await t.json();ie=String(r.error_description||r.error||`HTTP ${t.status}`)}catch{ie=`HTTP ${t.status}`}return null}return ie="",t.json()}async function Va(s,o){try{const n=await ea(s,o);if(!n||!n.access_token)return null;localStorage.setItem("supabase_session",JSON.stringify(n));const i={id:n.user?.id||"unknown",email:s},t={id:i.id,email:i.email||s,name:(i.email||s).split("@")[0],role:"cliente",defaultCompany:null,mode:"supabase",accessToken:n.access_token};return localStorage.setItem("session_user",JSON.stringify(t)),t}catch{return null}}function _a(){const s=localStorage.getItem("session_user");return s?JSON.parse(s):null}function Ga(){localStorage.removeItem("session_user"),localStorage.removeItem("supabase_session")}const Ja=[{icon:ra,label:"Dashboard",active:!0},{icon:oa,label:"An√°lises",active:!1},{icon:na,label:"Not√≠cias",active:!1},{icon:H,label:"Fluxo de Caixa",active:!1},{icon:Fe,label:"Extrato de Lan√ßamentos",active:!1},{icon:ia,label:"Relat√≥rios",active:!1},{icon:la,label:"Clientes",active:!1}];function qa(s){return[{icon:Le,label:"Notifica√ß√µes"},{icon:ne,label:"Configura√ß√µes"},{icon:da,label:"Sair"}].filter(n=>!n.adminOnly||s==="admin")}function Ka({onOpenSettings:s,role:o="cliente"}){const[n,i]=c.useState(null);return e.jsxs(b.aside,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"fixed left-0 top-0 h-screen w-64 bg-gradient-to-b from-charcoal-950 via-graphite-950 to-charcoal-900 border-r border-graphite-900 flex flex-col z-50 pattern-soft",children:[e.jsx("div",{className:"p-6 border-b border-graphite-900 flex justify-center",children:e.jsx(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:e.jsx("img",{src:"/finapp-logo.png",alt:"FinApp Logo",className:"h-16 w-auto object-contain"})})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:Ja.map((t,r)=>e.jsxs(b.button,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*r},onHoverStart:()=>i(r),onHoverEnd:()=>i(null),onClick:()=>{if(t.label==="Relat√≥rios"){const d=new CustomEvent("navigate",{detail:"Relat√≥rios"});window.dispatchEvent(d)}if(t.label==="Clientes"){const d=new CustomEvent("navigate",{detail:"Clientes"});window.dispatchEvent(d)}if(t.label==="Dashboard"||t.label==="An√°lises"||t.label==="Not√≠cias"||t.label==="Fluxo de Caixa"||t.label==="Extrato de Lan√ßamentos"){const d=new CustomEvent("navigate",{detail:t.label});window.dispatchEvent(d)}},className:`
              w-full flex items-center gap-3 px-4 py-2.5 rounded-xl
              transition-all duration-200 group relative
              ${t.active?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-900"}
            `,children:[t.active&&e.jsx(b.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gold-500 rounded-xl",transition:{type:"spring",duration:.6}}),e.jsx(b.span,{whileHover:{scale:1.08,rotate:1},className:"relative z-10",children:e.jsx(t.icon,{className:`w-4 h-4 ${t.active?"text-white":""}`})}),e.jsx("span",{className:"text-sm font-medium relative z-10",children:t.label}),n===r&&!t.active&&e.jsx(b.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},className:"ml-auto",children:e.jsx(ca,{className:"w-4 h-4"})})]},t.label))}),e.jsx("div",{className:"p-4 border-t border-graphite-900 space-y-1",children:qa(o).map((t,r)=>e.jsxs(b.button,{whileHover:{x:5},whileTap:{scale:.98},onClick:()=>{t.label==="Configura√ß√µes"&&s&&s(),t.label==="Sair"&&(Ga(),window.dispatchEvent(new CustomEvent("logout")),location.reload())},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-graphite-400 hover:text-white hover:bg-graphite-900 transition-all duration-200",children:[e.jsx(t.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.label))}),e.jsx(b.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"p-4 border-t border-graphite-900",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 transition-all cursor-pointer",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gold-400 to-gold-600 flex items-center justify-center text-white font-bold",children:"AC"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:"Admin BPO"}),e.jsx("p",{className:"text-xs text-graphite-400 truncate",children:"admin@bpo.com"})]})]})})]})}const Ha={info:(s,o={})=>P.log({level:"info",service:"UI",message:s,...o}),warn:(s,o={})=>P.log({level:"warn",service:"UI",message:s,...o}),error:(s,o={})=>P.log({level:"error",service:"UI",message:s,...o})};function Ua({open:s,onClose:o,contextRules:n=""}){const[i,t]=c.useState(""),[r,d]=c.useState([]),m=c.useRef(null);if(c.useEffect(()=>{s&&m.current&&(m.current.scrollTop=m.current.scrollHeight)},[s,r]),!s)return null;const j=async()=>{const u=i.trim();if(!u)return;const v=Date.now();d(g=>[...g,{role:"user",content:u,ts:v}]),t("");const y=`Consulta: ${u}

Regra: ${n?n.slice(0,160)+"‚Ä¶":"padr√£o executiva"}

Resposta: Em breve, integrado ao Supabase / ERPs.`;d(g=>[...g,{role:"assistant",content:y,ts:Date.now()}]);try{await Ha.info("oracle_query",{endpoint:"oracle",latencyMs:0})}catch{}};return e.jsx(b.div,{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm",children:e.jsxs(b.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"absolute right-8 top-20 w-[520px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ma,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Or√°culo de IA ‚Ä¢ Respostas concisas"})]}),e.jsx("button",{onClick:o,className:"text-muted-foreground hover:text-foreground",children:e.jsx(Be,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:m,className:"max-h-[48vh] overflow-y-auto p-4 space-y-3",children:[r.map((u,v)=>e.jsx("div",{className:u.role==="user"?"text-foreground":"text-muted-foreground",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:u.content})},v)),r.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fa√ßa uma pergunta r√°pida sobre lan√ßamentos, DRE/DFC, fluxo ou insights."})]}),e.jsxs("div",{className:"p-4 border-t border-border flex items-center gap-2",children:[e.jsx("input",{value:i,onChange:u=>t(u.target.value),placeholder:"Digite sua pergunta‚Ä¶",className:"flex-1 bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"}),e.jsx("button",{onClick:j,className:"px-3 py-2 rounded-xl bg-gold-500 text-white text-sm hover:bg-gold-600 focus-visible-ring",children:"Enviar"})]})]})})}function Ya({onThemeToggle:s,isDark:o=!0,oracleContext:n="",currentPeriod:i="Ano",onPeriodChange:t,selectedMonth:r="2025-11",onMonthChange:d,selectedCompany:m="26888098000159",onCompanyChange:j,companies:u=[]}){const[v,y]=c.useState(3),[g,E]=c.useState(!1),D=[{value:"2025-01",label:"Janeiro 2025"},{value:"2025-02",label:"Fevereiro 2025"},{value:"2025-03",label:"Mar√ßo 2025"},{value:"2025-04",label:"Abril 2025"},{value:"2025-05",label:"Maio 2025"},{value:"2025-06",label:"Junho 2025"},{value:"2025-07",label:"Julho 2025"},{value:"2025-08",label:"Agosto 2025"},{value:"2025-09",label:"Setembro 2025"},{value:"2025-10",label:"Outubro 2025"},{value:"2025-11",label:"Novembro 2025"},{value:"2025-12",label:"Dezembro 2025"}];return e.jsxs(e.Fragment,{children:[e.jsxs(b.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"sticky top-0 z-40 bg-charcoal-950/80 backdrop-blur-xl border-b border-graphite-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("div",{className:"flex-1 max-w-xl",children:e.jsxs("div",{className:"relative group",children:[e.jsx(Ve,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-graphite-400 group-focus-within:text-gold-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar transa√ß√µes, clientes, relat√≥rios...",className:`
                w-full pl-12 pr-4 py-3 
                bg-graphite-900 
                border border-graphite-800 
                rounded-2xl 
                text-white placeholder-graphite-500
                focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20
                transition-all duration-200
              `})]})}),e.jsxs("div",{className:"flex items-center gap-3 ml-6",children:[u.length>0&&e.jsxs("select",{value:m,onChange:w=>j?.(w.target.value),className:"px-4 py-2 rounded-xl bg-graphite-900 border border-graphite-800 text-white text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 transition-all",children:[e.jsx("option",{value:"",children:"Todas as Empresas"}),u.map(w=>e.jsx("option",{value:w.cnpj,children:w.cliente_nome},w.cnpj))]}),e.jsx("select",{value:r,onChange:w=>d?.(w.target.value),className:"px-4 py-2 rounded-xl bg-graphite-900 border border-graphite-800 text-white text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 transition-all",children:D.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}),e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>E(!0),className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group","aria-label":"Abrir Or√°culo de IA",children:e.jsx(xa,{className:"w-5 h-5"})}),e.jsxs(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group",children:[e.jsx(Le,{className:"w-5 h-5"}),v>0&&e.jsx(b.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-gold-500 rounded-full text-xs font-bold text-white flex items-center justify-center shadow-glow-sm",children:v})]}),e.jsxs(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all relative overflow-hidden group",children:[e.jsx(b.div,{initial:!1,animate:{rotate:o?0:180,scale:o?1:0},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(pa,{className:"w-5 h-5"})}),e.jsx(b.div,{initial:!1,animate:{rotate:o?180:0,scale:o?0:1},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Se,{className:"w-5 h-5"})}),e.jsx("div",{className:"opacity-0",children:e.jsx(Se,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"h-8 w-px bg-graphite-800"}),e.jsxs("div",{className:"hidden lg:flex items-center gap-6 pl-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"Saldo Total"}),e.jsx("p",{className:"text-sm font-bold text-white",children:"R$ 2.847.920,00"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"Varia√ß√£o"}),e.jsx("p",{className:"text-sm font-bold text-emerald-400",children:"+12.5%"})]})]})]})]}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b.h1,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},className:"text-2xl font-bold text-white font-display",children:"Dashboard Financeiro"}),e.jsx(b.p,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"text-sm text-graphite-400 mt-1",children:"Vis√£o geral ‚Ä¢ Atualizado agora h√° pouco"})]}),e.jsx(b.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"flex items-center gap-2 bg-graphite-900 rounded-xl p-1",children:["Dia","Semana","M√™s","Ano"].map(w=>e.jsx("button",{onClick:()=>t&&t(w),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i===w?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-800"}`,children:w},w))})]})})]}),e.jsx(Ua,{open:g,onClose:()=>E(!1),contextRules:n})]})}const Xa={green:{bg:"from-emerald-500/20 to-emerald-600/10",icon:"bg-emerald-500/20 text-emerald-400",text:"text-emerald-400",border:"border-emerald-500/20"},red:{bg:"from-red-500/20 to-red-600/10",icon:"bg-red-500/20 text-red-400",text:"text-red-400",border:"border-red-500/20"},gold:{bg:"from-gold-500/20 to-gold-600/10",icon:"bg-gold-500/20 text-gold-400",text:"text-gold-400",border:"border-gold-500/20"},blue:{bg:"from-blue-500/20 to-blue-600/10",icon:"bg-blue-500/20 text-blue-400",text:"text-blue-400",border:"border-blue-500/20"}},Wa={TrendingUp:H,TrendingDown:de,Wallet:Fe,Target:_e};function re({title:s,value:o,change:n,icon:i,trend:t="up",color:r="gold",delay:d=0,progress:m,sparklineData:j}){const u=Xa[r],v=t==="up",y=Wa[i]||H;return e.jsxs(b.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:d,duration:.5,ease:"easeOut"},whileHover:{y:-4,scale:1.02},className:"group relative",children:[e.jsx(b.div,{className:`absolute inset-0 bg-gradient-to-br ${u.bg} rounded-3xl blur-xl opacity-0 group-hover:opacity-60 transition-opacity duration-500`}),e.jsxs("div",{className:"relative neomorphic neomorphic-hover rounded-3xl p-6 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-graphite-400 font-medium mb-2",children:s}),e.jsx(b.h3,{initial:{scale:.9},animate:{scale:1},transition:{delay:d+.2},className:"text-3xl font-bold text-white font-display",children:o})]}),e.jsx(b.div,{whileHover:{rotate:15,scale:1.1},className:`p-3 rounded-2xl bg-gradient-to-br ${u.bg} border ${u.border}`,children:e.jsx(y,{className:"w-6 h-6 text-current",style:{color:u.icon.split(" ")[1].replace("text-","")}})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs(b.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:d+.3},className:`flex items-center gap-1 px-3 py-1.5 rounded-lg ${v?"bg-emerald-500/10":"bg-red-500/10"}`,children:[v?e.jsx(Ge,{className:"w-4 h-4 text-emerald-400"}):e.jsx(ua,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:`text-sm font-semibold ${v?"text-emerald-400":"text-red-400"}`,children:[n,"%"]})]}),e.jsx("span",{className:"text-sm text-graphite-400",children:"vs m√™s anterior"})]}),j&&e.jsx("div",{className:"flex items-end gap-1 h-12 mt-4",children:j.map((g,E)=>{const D=Math.max(...j),w=g/D*100;return e.jsx(b.div,{initial:{height:0},animate:{height:`${w}%`},transition:{delay:d+.5+E*.02,duration:.3},className:`flex-1 bg-gradient-to-t ${u.bg} rounded-sm opacity-70 hover:opacity-100 transition-opacity`},E)})}),m!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-graphite-400 mb-2",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{className:u.text,children:[m,"%"]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(b.div,{initial:{width:0},animate:{width:`${m}%`},transition:{delay:d+.7,duration:.8,ease:"easeOut"},className:`h-full bg-gradient-to-r ${u.bg} relative overflow-hidden`,children:e.jsx(b.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{repeat:1/0,duration:1.5,ease:"linear"}})})})]})]})]})}const Za=({active:s,payload:o,label:n})=>s&&o&&o.length?e.jsxs(b.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-charcoal-900/95 backdrop-blur-xl border border-graphite-800 rounded-2xl p-4 shadow-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-white mb-3",children:n}),o.map((i,t)=>e.jsxs("div",{className:"flex items-center justify-between gap-6 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.color}}),e.jsx("span",{className:"text-xs text-graphite-400",children:i.name})]}),e.jsx("span",{className:"text-sm font-bold text-white",children:i.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]},t))]}):null;function Ae({period:s="Ano",cnpj:o="26888098000159",selectedMonth:n}){const[i,t]=c.useState([{month:"Jan",receita:0,despesa:0,saldo:0},{month:"Fev",receita:0,despesa:0,saldo:0},{month:"Mar",receita:0,despesa:0,saldo:0},{month:"Abr",receita:0,despesa:0,saldo:0},{month:"Mai",receita:0,despesa:0,saldo:0},{month:"Jun",receita:0,despesa:0,saldo:0},{month:"Jul",receita:0,despesa:0,saldo:0},{month:"Ago",receita:0,despesa:0,saldo:0},{month:"Set",receita:0,despesa:0,saldo:0},{month:"Out",receita:0,despesa:0,saldo:0},{month:"Nov",receita:0,despesa:0,saldo:0},{month:"Dez",receita:0,despesa:0,saldo:0}]);c.useEffect(()=>{r()},[s,o,n]);const r=async()=>{try{const d=await P.getDRE(o);if(!d||d.length===0)return;const m=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],j={},[u]=n?n.split("-").map(Number):[new Date().getFullYear()],v=u;m.forEach(g=>{j[g]={month:g,receita:0,despesa:0,saldo:0}}),d.forEach(g=>{const E=new Date(g.data);if(E.getFullYear()!==v)return;const D=E.getMonth(),w=m[D];g.natureza==="receita"?j[w].receita+=g.valor:g.natureza==="despesa"&&(j[w].despesa+=Math.abs(g.valor))}),Object.values(j).forEach(g=>{g.saldo=g.receita-g.despesa});const y=m.map(g=>j[g]);t(y)}catch(d){console.error("Erro ao carregar dados de fluxo de caixa:",d)}};return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Receitas vs Despesas (2024)"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Receita"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Despesa"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Saldo"})]})]})]}),e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"h-80",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(se,{data:s==="Ano"?i:s==="M√™s"?i.slice(-4):s==="Semana"?i.slice(-2):i.slice(-1),margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorDespesa",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorSaldo",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ff7a00",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#ff7a00",stopOpacity:0})]})]}),e.jsx(Z,{strokeDasharray:"3 3",stroke:"#2a2a2a",opacity:.3}),e.jsx(Q,{dataKey:"month",stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1}),e.jsx(ee,{stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1,tickFormatter:d=>d>=1e6?`R$ ${(d/1e6).toFixed(1)}M`:d>=1e3?`R$ ${(d/1e3).toFixed(0)}k`:`R$ ${d}`}),e.jsx(Y,{content:e.jsx(Za,{}),cursor:{stroke:"#ff7a00",strokeWidth:1}}),e.jsx(V,{type:"monotone",dataKey:"receita",name:"Receita",stroke:"#10b981",strokeWidth:2,fill:"url(#colorReceita)",animationDuration:1500}),e.jsx(V,{type:"monotone",dataKey:"despesa",name:"Despesa",stroke:"#ef4444",strokeWidth:2,fill:"url(#colorDespesa)",animationDuration:1500}),e.jsx(V,{type:"monotone",dataKey:"saldo",name:"Saldo",stroke:"#ff7a00",strokeWidth:3,fill:"url(#colorSaldo)",animationDuration:1500})]})})}),e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8},className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-graphite-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Receita"}),e.jsx("p",{className:"text-lg font-bold text-emerald-400",children:"R$ 8.490.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Despesa"}),e.jsx("p",{className:"text-lg font-bold text-red-400",children:"R$ 4.780.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Saldo L√≠quido"}),e.jsx("p",{className:"text-lg font-bold text-gold-400",children:"R$ 3.710.000"})]})]})]})}function Qa(){const[s,o]=c.useState(!1),[n,i]=c.useState(!0);return e.jsxs(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"neomorphic rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display mb-1",children:"Cart√£o Corporativo"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Limite e saldo dispon√≠vel"})]}),e.jsxs(b.div,{animate:{rotateY:s?180:0},transition:{duration:.6,type:"spring"},className:"relative preserve-3d cursor-pointer",onClick:()=>o(!s),style:{transformStyle:"preserve-3d"},children:[e.jsx(b.div,{className:"backface-hidden relative",style:{backfaceVisibility:"hidden"},children:e.jsxs("div",{className:"bg-gradient-to-br from-gold-500 via-gold-600 to-gold-700 rounded-2xl p-8 shadow-2xl shadow-gold-500/20 relative overflow-hidden group",children:[e.jsx(b.div,{className:"absolute inset-0 opacity-20",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,ease:"linear"},style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),e.jsx(b.div,{className:"absolute -inset-1 bg-gradient-to-r from-gold-400 to-gold-600 rounded-3xl blur-xl opacity-0 group-hover:opacity-50 transition-opacity duration-500",style:{zIndex:-1}}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 font-medium mb-1",children:"Conta Empresarial"}),e.jsx(b.p,{className:"text-2xl font-bold text-white font-display",animate:{opacity:n?1:0},children:n?"R$ 2.847.920,00":"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})]}),e.jsx(b.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:t=>{t.stopPropagation(),i(!n)},className:"p-2 rounded-xl bg-white/10 backdrop-blur-sm hover:bg-white/20 transition-colors",children:n?e.jsx(ha,{className:"w-5 h-5 text-white"}):e.jsx(ga,{className:"w-5 h-5 text-white"})})]}),e.jsxs(b.div,{whileHover:{scale:1.05,rotate:5},className:"w-12 h-10 rounded-lg bg-gradient-to-br from-yellow-200 to-yellow-400 mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-1 border border-yellow-600/30 rounded-md"}),e.jsx("div",{className:"absolute inset-2 border border-yellow-600/20 rounded-sm"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-white text-lg font-mono tracking-wider",children:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 8492"}),e.jsx(b.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:t=>t.stopPropagation(),className:"p-1.5 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(fa,{className:"w-4 h-4 text-white"})})]})}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Titular"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"BPO FINANCIAL LTDA"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Validade"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"12/28"})]}),e.jsxs(b.div,{whileHover:{scale:1.1},className:"flex flex-col items-end",children:[e.jsx(ba,{className:"w-8 h-8 text-white/90"}),e.jsx("span",{className:"text-[10px] text-white/70 font-bold mt-1",children:"CORPORATE"})]})]})]})}),e.jsx(b.div,{className:"absolute inset-0 backface-hidden",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:e.jsxs("div",{className:"bg-gradient-to-br from-charcoal-900 to-charcoal-950 rounded-3xl p-6 shadow-2xl h-full",children:[e.jsx("div",{className:"w-full h-12 bg-gradient-to-r from-graphite-900 to-graphite-800 mt-4 mb-6 rounded-lg"}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"CVV"}),e.jsx("p",{className:"text-lg font-mono font-bold text-white",children:"‚Ä¢‚Ä¢‚Ä¢"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"C√≥digo de Seguran√ßa"}),e.jsx("p",{className:"text-xs text-white/50",children:"N√£o compartilhe"})]})]})}),e.jsxs("div",{className:"space-y-3 text-xs text-white/60",children:[e.jsx("p",{children:"Este cart√£o √© de uso exclusivo corporativo"}),e.jsx("p",{children:"Em caso de perda, bloqueie imediatamente"}),e.jsx("p",{className:"text-gold-400 font-semibold",children:"Suporte: 0800 XXX XXXX"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-white/50",children:"Mastercard¬Æ Corporate"}),e.jsx("span",{className:"text-xs text-white/50",children:"ID: #BPO-2024-8492"})]})]})})]}),e.jsx(b.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-center text-xs text-graphite-400 mt-3",children:"Clique no cart√£o para visualizar o verso"})]})}const es={success:{label:"Conclu√≠do",color:"emerald",bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20"},pending:{label:"Pendente",color:"gold",bg:"bg-gold-500/10",text:"text-gold-400",border:"border-gold-500/20"},failed:{label:"Falhou",color:"red",bg:"bg-red-500/10",text:"text-red-400",border:"border-red-500/20"}};function aa(){const[s,o]=c.useState([]),[n,i]=c.useState(""),[t,r]=c.useState([]),[d,m]=c.useState(!0),[j,u]=c.useState(""),[v,y]=c.useState("all"),[g,E]=c.useState(""),[D,w]=c.useState(""),[R,p]=c.useState(""),[S,l]=c.useState("");c.useEffect(()=>{(async()=>{try{const f=await P.getCompanies();o(f||[]);const M=(f||[]).find(I=>String(I.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,O=(f||[]).find(I=>String(I.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,T=M||O||f&&f[0]?.cnpj||"";i(T)}catch{u("Falha ao carregar empresas")}})()},[]),c.useEffect(()=>{n&&(m(!0),u(""),(async()=>{try{const f=await P.getDFC(n);r(Array.isArray(f)?f:[])}catch{u("Falha ao carregar extrato")}finally{m(!1)}})())},[n]);const C=c.useMemo(()=>{let f=[...t];return f.sort((M,O)=>{const T=new Date(M.data||"1900-01-01").getTime();return new Date(O.data||"1900-01-01").getTime()-T}),S&&(f=f.filter(M=>(M.descricao||"").toLowerCase().includes(S.toLowerCase()))),v==="month"&&g?f=f.filter(M=>M.data?.startsWith(g)):v==="range"&&D&&R&&(f=f.filter(M=>{const O=M.data||"";return O>=D&&O<=R})),f},[t,S,v,g,D,R]),k=c.useMemo(()=>{const f=new Set;return t.forEach(M=>{M.data&&f.add(M.data.slice(0,7))}),Array.from(f).sort().reverse()},[t]);return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-graphite-800/30",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display",children:"Transa√ß√µes Recentes"}),e.jsx("p",{className:"text-sm text-graphite-400 mt-1",children:"√öltimas movimenta√ß√µes financeiras"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-graphite-400"}),e.jsx("input",{type:"text",placeholder:"Buscar...",value:S,onChange:f=>l(f.target.value),className:"pl-9 pr-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white placeholder-graphite-500 focus:outline-none focus:border-gold-500 transition-all w-48"})]}),e.jsxs("select",{value:v,onChange:f=>y(f.target.value),className:"px-4 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all",children:[e.jsx("option",{value:"all",children:"Todos os per√≠odos"}),e.jsx("option",{value:"month",children:"Por m√™s"}),e.jsx("option",{value:"range",children:"Faixa de datas"})]}),v==="month"&&e.jsxs("select",{value:g,onChange:f=>E(f.target.value),className:"px-4 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all",children:[e.jsx("option",{value:"",children:"Selecione o m√™s"}),k.map(f=>e.jsx("option",{value:f,children:new Date(f+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})},f))]}),v==="range"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:D,onChange:f=>w(f.target.value),className:"px-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all"}),e.jsx("span",{className:"text-graphite-400 text-sm",children:"at√©"}),e.jsx("input",{type:"date",value:R,onChange:f=>p(f.target.value),className:"px-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-graphite-800",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Descri√ß√£o"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"A√ß√µes"})]})}),e.jsxs("tbody",{children:[(d?[]:C).map((f,M)=>{const O=(f.entrada||0)-(f.saida||0),T=O>=0?"income":"expense",I=es[T==="income"?"success":"pending"];return e.jsxs(b.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+M*.05},whileHover:{backgroundColor:"rgba(255, 122, 0, 0.03)"},className:"border-b border-graphite-800/50 last:border-0 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b.div,{whileHover:{scale:1.1,rotate:5},className:"w-10 h-10 rounded-xl bg-gradient-to-br from-graphite-800 to-graphite-900 flex items-center justify-center text-xl group-hover:shadow-lg transition-shadow",children:"üí∏"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:f.descricao||"Lan√ßamento"}),e.jsx("p",{className:"text-xs text-graphite-400",children:T==="income"?"Entrada":"Sa√≠da"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-graphite-300",children:f.data||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded-lg ${T==="income"?"bg-emerald-500/10":"bg-red-500/10"}`,children:T==="income"?e.jsx(Ge,{className:"w-4 h-4 text-emerald-400"}):e.jsx(ja,{className:"w-4 h-4 text-red-400"})}),e.jsxs("span",{className:`text-sm font-bold ${T==="income"?"text-emerald-400":"text-red-400"}`,children:[O>0?"+":"",Number(O).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(b.span,{whileHover:{scale:1.05},className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold border ${I.bg} ${I.text} ${I.border}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${I.text.replace("text-","bg-")} mr-2`}),Number(f.saldo||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(b.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 rounded-lg hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all",children:e.jsx(va,{className:"w-4 h-4"})})})]},f.id||M)}),!d&&t.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-graphite-400",children:["Nenhum lan√ßamento encontrado para ",n||"empresa"]})})]})]})}),e.jsxs("div",{className:"p-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-graphite-400",children:[d?"Carregando...":`Mostrando ${t.length} lan√ßamentos`," ",n&&e.jsxs("span",{className:"text-white font-semibold",children:["‚Ä¢ ",n]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:n,onChange:f=>i(f.target.value),className:"px-4 py-2 bg-graphite-800 text-white rounded-xl text-sm",children:[e.jsx("option",{value:"",children:"Selecione CNPJ"}),s.map(f=>e.jsxs("option",{value:f.cnpj,children:[f.cliente_nome," ‚Ä¢ ",f.cnpj]},f.cnpj))]})})]})]})}function as({cnpj:s="26888098000159",selectedMonth:o}){const[n,i]=c.useState([{name:"Servi√ßos BPO",value:58e4,color:"#ff7a00",percentage:45},{name:"Consultoria",value:32e4,color:"#10b981",percentage:25},{name:"Software",value:25e4,color:"#3b82f6",percentage:20},{name:"Outros",value:13e4,color:"#8b5cf6",percentage:10}]),[t,r]=c.useState(73),[d,m]=c.useState(8.2);c.useEffect(()=>{j()},[s,o]);const j=async()=>{try{const v=await P.getDRE(s);if(!v||v.length===0)return;const y={},[g]=o?o.split("-").map(Number):[new Date().getFullYear()],E=g;v.forEach(p=>{if(new Date(p.data).getFullYear()===E&&p.natureza==="receita"&&p.valor>0){const l=p.conta.split("-")[0].substring(0,1),C=l==="3"?"Servi√ßos BPO":l==="4"?"Consultoria":l==="5"?"Software":"Outros";y[C]||(y[C]=0),y[C]+=p.valor}});const D=Object.values(y).reduce((p,S)=>p+S,0),w=["#ff7a00","#10b981","#3b82f6","#8b5cf6"],R=Object.entries(y).map(([p,S],l)=>({name:p,value:S,color:w[l]||"#8b5cf6",percentage:Math.round(S/D*100)})).sort((p,S)=>S.value-p.value);if(R.length>0){i(R);const S=Math.round(D/8e5*100);r(Math.min(S,100))}}catch(v){console.error("Erro ao carregar dados de receita:",v)}},u=n.reduce((v,y)=>v+y.value,0);return e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.3},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Distribui√ß√£o de Receita"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Por categoria de servi√ßo"})]}),e.jsxs("div",{className:"relative flex items-center justify-center mb-8",children:[e.jsxs("svg",{width:"280",height:"180",viewBox:"0 0 280 180",className:"transform -rotate-0",children:[e.jsx("path",{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"#2a2a2a",strokeWidth:"24",strokeLinecap:"round"}),e.jsx(b.path,{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"24",strokeLinecap:"round",strokeDasharray:"314",initial:{strokeDashoffset:314},animate:{strokeDashoffset:314-314*t/100},transition:{duration:2,ease:"easeOut"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981"}),e.jsx("stop",{offset:"50%",stopColor:"#ff7a00"}),e.jsx("stop",{offset:"100%",stopColor:"#ef4444"})]})})]}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/4 text-center",children:e.jsxs(b.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},children:[e.jsxs("p",{className:"text-4xl font-bold text-white font-display mb-1",children:[t,"%"]}),e.jsx("p",{className:"text-xs text-graphite-400",children:"Meta Atingida"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-2",children:[e.jsx(H,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("span",{className:"text-sm font-semibold text-emerald-400",children:["+",d.toFixed(1),"%"]})]})]})})]}),e.jsx("div",{className:"space-y-3",children:n.map((v,y)=>e.jsxs(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+y*.1},className:"group/item",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b.div,{whileHover:{scale:1.2},className:"w-3 h-3 rounded-full",style:{backgroundColor:v.color}}),e.jsx("span",{className:"text-sm text-graphite-300 group-hover/item:text-white transition-colors",children:v.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:v.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})}),e.jsxs("span",{className:"text-xs text-graphite-400 ml-2",children:["(",v.percentage,"%)"]})]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(b.div,{initial:{width:0},animate:{width:`${v.percentage}%`},transition:{delay:1+y*.1,duration:.8,ease:"easeOut"},className:"h-full rounded-full relative",style:{backgroundColor:v.color},children:e.jsx(b.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear",delay:1.5+y*.1},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"})})})]},v.name))}),e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},className:"mt-6 pt-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-graphite-400",children:"Total de Receita"}),e.jsx("span",{className:"text-lg font-bold text-gold-400",children:u.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]})]})}function ss(s){return["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][s.getMonth()]}function ts({period:s="Ano",session:o}){const[n,i]=c.useState([]),[t,r]=c.useState(""),[d,m]=c.useState([]),[j,u]=c.useState(!0),[v,y]=c.useState("");c.useEffect(()=>{(async()=>{try{const p=await P.getCompanies();i(p||[]),r("26888098000159")}catch{y("Falha ao carregar empresas")}})()},[]),c.useEffect(()=>{t&&(u(!0),(async()=>{try{const p=await P.getDFC(t);m(Array.isArray(p)?p:[])}finally{u(!1)}})())},[t]);const{receitaTotal:g,despesasTotal:E,lucro:D}=c.useMemo(()=>{const p=d.reduce((S,l)=>(S.receitaTotal+=Number(l.entrada||0),S.despesasTotal+=Number(l.saida||0),S),{receitaTotal:0,despesasTotal:0});return{...p,lucro:p.receitaTotal-p.despesasTotal}},[d]),w=c.useMemo(()=>{const p=new Map;d.forEach(l=>{const C=l.data?new Date(l.data):new Date,k=ss(C),f=p.get(k)||{month:k,receita:0,despesas:0};f.receita+=Number(l.entrada||0),f.despesas+=Number(l.saida||0),p.set(k,f)});const S=Array.from(p.values());return s==="Ano"?S:s==="M√™s"?S.slice(-1):s==="Semana"?S.slice(-1).map(l=>({...l,month:"Semana"})):S.slice(-1).map(l=>({...l,month:"Hoje"}))},[d,s]),R=[{name:"Receita",value:g,delta:0},{name:"Despesas",value:E,delta:0},{name:"Lucro",value:D,delta:0}];return e.jsxs(Ta,{numItemsSm:1,numItemsMd:2,numItemsLg:3,className:"gap-6",children:[R.map(p=>e.jsxs(Ee,{decoration:"top",decorationColor:"orange",className:"rounded-3xl bg-card border border-border shadow-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(De,{children:p.name}),e.jsxs(za,{deltaType:p.delta>=0?"moderateIncrease":"moderateDecrease",children:[p.delta,"%"]})]}),e.jsxs($a,{children:["R$ ",Number(p.value).toLocaleString("pt-BR")]}),e.jsx(Re,{className:"mt-2 text-sm text-muted-foreground",children:j?"Carregando...":`Empresa ${t||""}`})]},p.name)),e.jsxs(Ee,{className:"rounded-3xl col-span-1 md:col-span-2 bg-card border border-border shadow-card",children:[e.jsx(De,{children:"Evolu√ß√£o Mensal"}),e.jsx(Re,{className:"text-sm text-muted-foreground",children:"Receita vs Despesas"}),e.jsx("div",{className:"mt-4 h-56",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(he,{data:w,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"barReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#ff7a00",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#ff7a00",stopOpacity:.4})]}),e.jsxs("linearGradient",{id:"barDespesas",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#38bdf8",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#38bdf8",stopOpacity:.4})]}),e.jsx("filter",{id:"barShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3","flood-color":"#000","flood-opacity":"0.35"})})]}),e.jsx(Z,{stroke:"rgba(200,200,200,0.12)",vertical:!1}),e.jsx(Q,{dataKey:"month",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(ee,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},tickFormatter:p=>`R$ ${Number(p).toLocaleString("pt-BR")}`}),e.jsx(Y,{contentStyle:{background:"#11161C",border:"1px solid #1B232C"},formatter:p=>`R$ ${Number(p).toLocaleString("pt-BR")}`}),e.jsx(me,{}),e.jsx(K,{dataKey:"receita",name:"Receita",fill:"url(#barReceita)",radius:[8,8,0,0],filter:"url(#barShadow)"}),e.jsx(K,{dataKey:"despesas",name:"Despesas",fill:"url(#barDespesas)",radius:[8,8,0,0],filter:"url(#barShadow)"})]})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:t,onChange:p=>r(p.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),n.map(p=>e.jsxs("option",{value:p.cnpj,children:[p.cliente_nome," ‚Ä¢ ",p.cnpj]},p.cnpj))]})]})]})]})}function rs(){const[s,o]=c.useState([]),[n,i]=c.useState(""),[t,r]=c.useState(0),[d,m]=c.useState(0),[j,u]=c.useState(!0),[v,y]=c.useState("");return c.useEffect(()=>{(async()=>{try{const g=await P.getCompanies();o(g||[]);const E=(g||[]).find(R=>String(R.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,D=(g||[]).find(R=>String(R.cliente_nome||"").toLowerCase().includes("volpe")||String(R.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,w=E||D||g&&g[0]?.cnpj||"";i(w)}catch{y("Falha ao carregar empresas")}})()},[]),c.useEffect(()=>{n&&(u(!0),(async()=>{try{const g=await P.getDRE(n);r(Array.isArray(g)?g.length:0);const E=await P.getDFC(n);m(Array.isArray(E)?E.length:0)}catch{y("Falha ao carregar relat√≥rios")}finally{u(!1)}})())},[n]),e.jsx("div",{className:"grid gap-6",children:e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Relat√≥rios Gerenciais"}),v&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:v}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"DRE Consolidada"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j?"Carregando...":`${t} linhas`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j?"Carregando...":`${d} lan√ßamentos`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Receita por Cliente"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j?"Carregando...":`${s.length} clientes`})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:n,onChange:g=>i(g.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),s.map(g=>e.jsxs("option",{value:g.cnpj,children:[g.cliente_nome," ‚Ä¢ ",g.cnpj]},g.cnpj))]})]})]})})}function os(){const[s,o]=c.useState([]),[n,i]=c.useState(!0),[t,r]=c.useState("");return c.useEffect(()=>{(async()=>{try{const d=await P.getCompanies();o(Array.isArray(d)?d:[])}catch{r("Falha ao carregar clientes")}finally{i(!1)}})()},[]),e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes ‚Ä¢ Dados Reais"}),t&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:t}),e.jsx("div",{className:"mt-4 rounded-2xl border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Cliente"}),e.jsx("th",{className:"text-left p-3",children:"CNPJ"}),e.jsx("th",{className:"text-left p-3",children:"Grupo"})]})}),e.jsxs("tbody",{children:[(n?[]:s).map((d,m)=>e.jsxs("tr",{className:"border-t border-border",children:[e.jsx("td",{className:"p-3",children:d.cliente_nome}),e.jsx("td",{className:"p-3",children:d.cnpj}),e.jsx("td",{className:"p-3",children:d.grupo_empresarial})]},m)),!n&&s.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-3 text-sm text-muted-foreground",colSpan:3,children:"Nenhum cliente encontrado"})})]})]})})]})}function U(...s){return Ba(Fa(s))}function _({className:s,...o}){return e.jsx("div",{className:U("bg-card border border-border rounded-3xl shadow-card transition-all duration-300",s),...o})}function G({className:s,...o}){return e.jsx("div",{className:U("flex items-center justify-between p-4 pb-2",s),...o})}function J({className:s,...o}){return e.jsx("h3",{className:U("text-sm text-foreground",s),...o})}function q({className:s,...o}){return e.jsx("div",{className:U("p-4 pt-2",s),...o})}const be=Ca,je=Sa,le=c.forwardRef(({className:s,...o},n)=>e.jsx(Je,{ref:n,className:"inline-flex items-center justify-between gap-2 rounded-lg border border-[#1B232C] bg-[#0a0f14] px-3 py-1.5 text-xs text-gray-300 shadow-sm hover:bg-[#0f141b] focus:outline-none",...o}));le.displayName=Je.displayName;const ce=c.forwardRef(({className:s,children:o,position:n="popper",...i},t)=>e.jsx(Na,{children:e.jsx(qe,{ref:t,className:"z-50 min-w-[8rem] overflow-hidden rounded-xl border border-[#1B232C] bg-[#0a0f14] p-1 shadow-xl",position:n,...i,children:e.jsx(ya,{className:"p-1",children:o})})}));ce.displayName=qe.displayName;const W=c.forwardRef(({className:s,children:o,...n},i)=>e.jsx(Ke,{ref:i,className:"relative flex w-full cursor-pointer select-none items-center rounded-lg px-3 py-2 text-xs text-gray-300 outline-none data-[highlighted]:bg-[#0f141b]",...n,children:e.jsx(wa,{children:o})}));W.displayName=Ke.displayName;const we=Ea,ge=c.forwardRef(({className:s,...o},n)=>e.jsx(He,{ref:n,className:U("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...o}));ge.displayName=He.displayName;const F=c.forwardRef(({className:s,...o},n)=>e.jsx(Ue,{ref:n,className:U("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...o}));F.displayName=Ue.displayName;const L=c.forwardRef(({className:s,...o},n)=>e.jsx(Ye,{ref:n,className:U("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...o}));L.displayName=Ye.displayName;const Me=s=>String(s).padStart(2,"0"),Oe=s=>{const o=new Set;if(s.forEach(t=>{if(!t)return;const r=t.slice(0,7);/^\d{4}-\d{2}$/.test(r)&&o.add(r)}),o.size===0){const t=new Date().getFullYear().toString();return Array.from({length:12},(r,d)=>`${t}-${Me(d+1)}`)}const n=Array.from(new Set(Array.from(o).map(t=>t.split("-")[0]))).sort(),i=[];return n.forEach(t=>{for(let r=1;r<=12;r+=1)i.push(`${t}-${Me(r)}`)}),i};function ke({className:s}){const[o,n]=c.useState([]),[i,t]=c.useState("26888098000159"),[r,d]=c.useState("all"),[m,j]=c.useState([]),[u,v]=c.useState([]),[y,g]=c.useState(!1);c.useEffect(()=>{E()},[]),c.useEffect(()=>{i&&D(i)},[i]);const E=async()=>{try{const x=(await P.getCompanies()).filter(h=>h.cliente_nome?.toLowerCase().includes("volpe")||String(h.cnpj||"").startsWith("26888098")).map(h=>({...h,cnpj:h.cnpj?h.cnpj.replace(/^0+/,""):h.cnpj})).sort((h,N)=>{const A=String(h.cnpj||"")==="26888098000159"?-1:1,$=String(N.cnpj||"")==="26888098000159"?-1:1;return A-$});n(x)}catch(a){console.error("Erro ao carregar empresas:",a)}},D=async a=>{g(!0);try{console.log("üîç Buscando dados para CNPJ:",a);const[x,h]=await Promise.all([P.getDRE(a),P.getDFC(a)]);console.log("‚úÖ DRE recebido:",x?.length||0,"registros"),console.log("‚úÖ DFC recebido:",h?.length||0,"registros"),x&&x.length>0&&console.log("üìù Amostra DRE:",x[0]),h&&h.length>0&&console.log("üìù Amostra DFC:",h[0]);const N=x&&x.length>0?x:w(),A=h&&h.length>0?h:R();j(N),v(A)}catch(x){console.error("‚ùå Erro ao carregar dados:",x),j(w()),v(R())}finally{g(!1)}},w=()=>{const a=["2024-09","2024-10","2024-11","2025-01","2025-02","2025-03","2025-04","2025-05","2025-06","2025-07","2025-08","2025-09","2025-10","2025-11"],x=[{conta:"Receita de Servi√ßos BPO",natureza:"receita",baseValue:85e4},{conta:"Receita de Consultoria",natureza:"receita",baseValue:32e4},{conta:"Outras Receitas Operacionais",natureza:"receita",baseValue:45e3},{conta:"Sal√°rios e Encargos",natureza:"despesa",baseValue:-52e4},{conta:"Servi√ßos de Terceiros",natureza:"despesa",baseValue:-18e4},{conta:"Despesas Administrativas",natureza:"despesa",baseValue:-95e3},{conta:"Despesas com TI e Software",natureza:"despesa",baseValue:-78e3},{conta:"Aluguel e Condom√≠nio",natureza:"despesa",baseValue:-42e3},{conta:"Despesas com Viagens",natureza:"despesa",baseValue:-28e3},{conta:"Marketing e Publicidade",natureza:"despesa",baseValue:-35e3},{conta:"Treinamento e Capacita√ß√£o",natureza:"despesa",baseValue:-22e3},{conta:"Despesas Financeiras",natureza:"despesa",baseValue:-18e3}],h=[];return a.forEach(N=>{x.forEach(A=>{const $=.85+Math.random()*.3;h.push({data:`${N}-15`,conta:A.conta,natureza:A.natureza,valor:Math.round(A.baseValue*$)})})}),h},R=()=>{const a=["2024-09","2024-10","2024-11","2025-01","2025-02","2025-03","2025-04","2025-05","2025-06","2025-07","2025-08","2025-09","2025-10","2025-11"],x=[{descricao:"Recebimento de Clientes",entrada:98e4,saida:0},{descricao:"Pagamento de Fornecedores",entrada:0,saida:42e4},{descricao:"Pagamento de Sal√°rios",entrada:0,saida:52e4},{descricao:"Pagamento de Impostos",entrada:0,saida:125e3},{descricao:"Pagamento de Aluguel",entrada:0,saida:42e3},{descricao:"Investimentos em TI",entrada:0,saida:85e3},{descricao:"Empr√©stimos Banc√°rios",entrada:15e4,saida:0},{descricao:"Amortiza√ß√£o de D√≠vidas",entrada:0,saida:65e3}],h=[];return a.forEach(N=>{x.forEach(A=>{const $=.9+Math.random()*.2;h.push({data:`${N}-15`,descricao:A.descricao,entrada:Math.round(A.entrada*$),saida:Math.round(A.saida*$)})})}),h},p=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),S=o.find(a=>a.cnpj===i)?.cliente_nome||"Empresa",l=Oe(m.map(a=>a.data)),C=Oe(u.map(a=>a.data));console.log("üìä DRE Data:",m.length,"registros"),console.log("üìä DFC Data:",u.length,"registros"),console.log("üìÖ DRE Months:",l),console.log("üìÖ DFC Months:",C);const k=m.reduce((a,x)=>{const h=x.natureza||"Outros";return a[h]=(a[h]||0)+Number(x.valor||0),a},{}),f=(()=>{const a={};return m.forEach(x=>{const h=x.data?x.data.slice(0,7):l[0],N=x.natureza||"Outros",A=Number(x.valor||0);a[N]||(a[N]={}),a[N][h]=(a[N][h]||0)+A}),l.map(x=>{const h={month:x};return Object.entries(a).forEach(([N,A])=>{h[N]=A[x]||0}),h})})(),M=(()=>{const a={};return u.forEach(x=>{const h=x.data?x.data.slice(0,7):C[0];a[h]||(a[h]={entradas:0,saidas:0}),a[h].entradas+=Number(x.entrada||0),a[h].saidas+=Number(x.saida||0)}),C.map(x=>{const h=a[x]?.entradas||0,N=a[x]?.saidas||0;return{month:x,entradas:h,saidas:N,saldo:h-N}})})(),O=M.reduce((a,x)=>(a.entradas+=x.entradas,a.saidas+=x.saidas,a.saldo+=x.saldo,a),{entradas:0,saidas:0,saldo:0}),T=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],I=(()=>{if(!m||m.length===0)return[];const a={};return m.forEach(x=>{const h=x.data?x.data.slice(0,7):"",N=x.conta||"Outros",A=x.natureza||"Outros",$=Number(x.valor||0);a[N]||(a[N]={conta:N,natureza:A,total:0},l.forEach(X=>{a[N][X]=0})),h&&(a[N][h]===void 0&&(a[N][h]=0),a[N][h]+=$),a[N].total+=$}),Object.values(a).filter(x=>Math.abs(x.total)>0).sort((x,h)=>Math.abs(h.total)-Math.abs(x.total)).slice(0,50)})(),z=(()=>{if(!u||u.length===0)return[];const a={};return u.forEach(x=>{const h=x.data?x.data.slice(0,7):"",N=x.descricao||"Outros",A=Number(x.entrada||0),$=Number(x.saida||0);a[N]||(a[N]={categoria:N,totalEntradas:0,totalSaidas:0,saldo:0},C.forEach(X=>{a[N][`${X}_entrada`]=0,a[N][`${X}_saida`]=0})),h&&(a[N][`${h}_entrada`]===void 0&&(a[N][`${h}_entrada`]=0),a[N][`${h}_saida`]===void 0&&(a[N][`${h}_saida`]=0),a[N][`${h}_entrada`]+=A,a[N][`${h}_saida`]+=$),a[N].totalEntradas+=A,a[N].totalSaidas+=$,a[N].saldo+=A-$}),Object.values(a).filter(x=>Math.abs(x.saldo)>0||x.totalEntradas>0||x.totalSaidas>0).sort((x,h)=>Math.abs(h.saldo)-Math.abs(x.saldo)).slice(0,30)})(),fe=m.slice(0,100).map(a=>({data:a.data,tipo:"DRE",conta:a.conta,natureza:a.natureza,valor:a.valor}));return e.jsxs("div",{className:s,children:[e.jsx("div",{className:"mb-6",children:e.jsxs(_,{children:[e.jsx(G,{children:e.jsx(J,{className:"text-lg",children:"An√°lises - Sele√ß√£o de Empresa"})}),e.jsx(q,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Empresa:"}),e.jsxs(be,{value:i,onValueChange:t,children:[e.jsx(le,{className:"w-[300px]",children:e.jsx(je,{placeholder:"Selecione uma empresa"})}),e.jsx(ce,{children:o.map(a=>e.jsxs(W,{value:a.cnpj,children:[a.cliente_nome," (",a.cnpj,")"]},a.cnpj))})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Visualizando: ",S]})]})})]})}),y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Carregando dados..."})}):e.jsxs(we,{defaultValue:"dre",className:"w-full",children:[e.jsxs(ge,{className:"grid w-full grid-cols-4",children:[e.jsx(F,{value:"dre",children:"DRE"}),e.jsx(F,{value:"dfc",children:"DFC"}),e.jsx(F,{value:"lancamentos",children:"Lan√ßamentos"}),e.jsx(F,{value:"graficos",children:"Gr√°ficos"})]}),e.jsx(L,{value:"dre",className:"space-y-4",children:e.jsxs(_,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(J,{children:"DRE - Demonstra√ß√£o de Resultados por M√™s"}),e.jsxs(be,{value:r,onValueChange:d,children:[e.jsx(le,{className:"w-[200px]",children:e.jsx(je,{placeholder:"Selecione o m√™s"})}),e.jsxs(ce,{children:[e.jsx(W,{value:"all",children:"Todos os meses"}),l.slice().reverse().map(a=>e.jsx(W,{value:a,children:new Date(a+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})},a))]})]})]})}),e.jsx(q,{children:m.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left sticky left-0 bg-muted z-10",children:"Conta"}),e.jsx("th",{className:"border p-2 text-left",children:"Natureza"}),(r==="all"?l:[r]).map(a=>e.jsx("th",{className:"border p-2 text-right whitespace-nowrap",children:r==="all"?a.slice(5):new Date(a+"-01").toLocaleDateString("pt-BR",{month:"short",year:"numeric"})},a)),r==="all"&&e.jsx("th",{className:"border p-2 text-right font-bold bg-blue-50",children:"Total"})]})}),e.jsx("tbody",{children:I.length>0?I.map((a,x)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2 text-left sticky left-0 bg-background font-medium text-xs",children:a.conta}),e.jsx("td",{className:"border p-2 text-left",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${a.natureza==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.natureza})}),(r==="all"?l:[r]).map(h=>{const N=a[h]||0;return e.jsx("td",{className:"border p-2 text-right text-xs",children:Math.abs(N)>.01?p(N):"-"},h)}),r==="all"&&e.jsx("td",{className:"border p-2 text-right font-bold bg-blue-50 text-xs",children:p(a.total)})]},x)):e.jsx("tr",{children:e.jsx("td",{colSpan:l.length+3,className:"border p-4 text-center text-muted-foreground",children:"Nenhum dado DRE dispon√≠vel"})})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted font-bold",children:[e.jsx("td",{className:"border p-2",colSpan:2,children:"TOTAIS"}),(r==="all"?l:[r]).map(a=>{const x=I.reduce((h,N)=>h+(N[a]||0),0);return e.jsx("td",{className:"border p-2 text-right",children:p(x)},a)}),r==="all"&&e.jsx("td",{className:"border p-2 text-right bg-blue-100",children:p(I.reduce((a,x)=>a+x.total,0))})]})})]})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DRE dispon√≠vel para esta empresa"})})]})}),e.jsx(L,{value:"dfc",className:"space-y-4",children:e.jsxs(_,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(J,{children:"DFC - Demonstra√ß√£o de Fluxo de Caixa por M√™s"}),e.jsxs(be,{value:r,onValueChange:d,children:[e.jsx(le,{className:"w-[200px]",children:e.jsx(je,{placeholder:"Selecione o m√™s"})}),e.jsxs(ce,{children:[e.jsx(W,{value:"all",children:"Todos os meses"}),C.slice().reverse().map(a=>e.jsx(W,{value:a,children:new Date(a+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})},a))]})]})]})}),e.jsx(q,{children:u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left sticky left-0 bg-muted z-10",children:"Categoria"}),(r==="all"?C:[r]).map(a=>e.jsx("th",{className:"border p-2 text-center",colSpan:2,children:r==="all"?a.slice(5):new Date(a+"-01").toLocaleDateString("pt-BR",{month:"short",year:"numeric"})},a)),r==="all"&&e.jsx("th",{className:"border p-2 text-center bg-blue-50",colSpan:3,children:"Totais"})]}),e.jsxs("tr",{className:"bg-muted/50 text-xs",children:[e.jsx("th",{className:"border p-2"}),(r==="all"?C:[r]).map(a=>e.jsxs(oe.Fragment,{children:[e.jsx("th",{className:"border p-2 text-right text-green-700",children:"Entrada"}),e.jsx("th",{className:"border p-2 text-right text-red-700",children:"Sa√≠da"})]},a)),r==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"border p-2 text-right text-green-700 bg-green-50",children:"Entradas"}),e.jsx("th",{className:"border p-2 text-right text-red-700 bg-red-50",children:"Sa√≠das"}),e.jsx("th",{className:"border p-2 text-right text-blue-700 bg-blue-50",children:"Saldo"})]})]})]}),e.jsx("tbody",{children:z.length>0?z.map((a,x)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2 text-left sticky left-0 bg-background font-medium text-xs",children:a.categoria}),(r==="all"?C:[r]).map(h=>{const N=a[`${h}_entrada`]||0,A=a[`${h}_saida`]||0;return e.jsxs(oe.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-600 text-xs",children:Math.abs(N)>.01?p(N):"-"}),e.jsx("td",{className:"border p-2 text-right text-red-600 text-xs",children:Math.abs(A)>.01?p(A):"-"})]},h)}),r==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-700 bg-green-50 font-semibold text-xs",children:p(a.totalEntradas)}),e.jsx("td",{className:"border p-2 text-right text-red-700 bg-red-50 font-semibold text-xs",children:p(a.totalSaidas)}),e.jsx("td",{className:"border p-2 text-right text-blue-700 bg-blue-50 font-bold text-xs",children:p(a.saldo)})]})]},x)):e.jsx("tr",{children:e.jsx("td",{colSpan:(r==="all"?C.length:1)*2+(r==="all"?4:1),className:"border p-4 text-center text-muted-foreground",children:"Nenhum dado DFC dispon√≠vel"})})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted font-bold",children:[e.jsx("td",{className:"border p-2",children:"TOTAIS"}),(r==="all"?C:[r]).map(a=>{const x=z.reduce((N,A)=>N+(A[`${a}_entrada`]||0),0),h=z.reduce((N,A)=>N+(A[`${a}_saida`]||0),0);return e.jsxs(oe.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-700",children:p(x)}),e.jsx("td",{className:"border p-2 text-right text-red-700",children:p(h)})]},a)}),r==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right bg-green-100 text-green-900",children:p(z.reduce((a,x)=>a+x.totalEntradas,0))}),e.jsx("td",{className:"border p-2 text-right bg-red-100 text-red-900",children:p(z.reduce((a,x)=>a+x.totalSaidas,0))}),e.jsx("td",{className:"border p-2 text-right bg-blue-100 text-blue-900",children:p(z.reduce((a,x)=>a+x.saldo,0))})]})]})})]})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DFC dispon√≠vel para esta empresa"})})]})}),e.jsx(L,{value:"lancamentos",className:"space-y-4",children:e.jsxs(_,{children:[e.jsx(G,{children:e.jsx(J,{children:"Lan√ßamentos Brutos - √öltimos 100 Registros"})}),e.jsx(q,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left",children:"Data"}),e.jsx("th",{className:"border p-2 text-left",children:"Tipo"}),e.jsx("th",{className:"border p-2 text-left",children:"Conta"}),e.jsx("th",{className:"border p-2 text-left",children:"Natureza"}),e.jsx("th",{className:"border p-2 text-right",children:"Valor"})]})}),e.jsx("tbody",{children:fe.map((a,x)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2",children:a.data}),e.jsx("td",{className:"border p-2",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:a.tipo})}),e.jsx("td",{className:"border p-2",children:a.conta}),e.jsx("td",{className:"border p-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${a.natureza==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.natureza})}),e.jsx("td",{className:"border p-2 text-right font-mono",children:p(a.valor||0)})]},x))})]})})})]})}),e.jsx(L,{value:"graficos",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsx(G,{children:e.jsx(J,{children:"DRE - Evolu√ß√£o Mensal"})}),e.jsx(q,{children:m.length>0?e.jsx("div",{className:"h-80",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(he,{data:f,children:[e.jsx(Z,{strokeDasharray:"3 3"}),e.jsx(Q,{dataKey:"month"}),e.jsx(ee,{tickFormatter:a=>`R$ ${(a/1e3).toFixed(0)}k`}),e.jsx(Y,{formatter:a=>p(a)}),e.jsx(me,{}),Object.keys(k).map((a,x)=>e.jsx(K,{dataKey:a,fill:T[x%T.length]},a))]})})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Sem dados"})})]}),e.jsxs(_,{children:[e.jsx(G,{children:e.jsx(J,{children:"DFC - Fluxo de Caixa"})}),e.jsx(q,{children:u.length>0?e.jsx("div",{className:"h-80",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(se,{data:M,children:[e.jsx(Z,{strokeDasharray:"3 3"}),e.jsx(Q,{dataKey:"month"}),e.jsx(ee,{tickFormatter:a=>`R$ ${(a/1e3).toFixed(0)}k`}),e.jsx(Y,{formatter:a=>p(a)}),e.jsx(me,{}),e.jsx(V,{type:"monotone",dataKey:"entradas",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),e.jsx(V,{type:"monotone",dataKey:"saidas",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6}),e.jsx(Pa,{type:"monotone",dataKey:"saldo",stroke:"#3b82f6",strokeWidth:2})]})})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Sem dados"})})]}),e.jsxs(_,{children:[e.jsx(G,{children:e.jsx(J,{children:"DRE - Resumo por Natureza"})}),e.jsx(q,{children:e.jsx("div",{className:"space-y-2",children:Object.entries(k).map(([a,x])=>{const h=Number(x||0),N=Object.values(k).reduce(($,X)=>$+Math.abs(Number(X)),0),A=N>0?Math.abs(h)/N*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:a}),e.jsx("span",{className:h>=0?"text-green-600":"text-red-600",children:p(h)})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${h>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${A}%`}})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[A.toFixed(1),"%"]})]},a)})})})]}),e.jsxs(_,{children:[e.jsx(G,{children:e.jsx(J,{children:"DFC - Resumo de Fluxo"})}),e.jsxs(q,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-50",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p(O.entradas)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Entradas"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-red-50",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:p(O.saidas)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Sa√≠das"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-50",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p(O.saldo)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Saldo"})]})]}),e.jsx("div",{className:"h-48",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(Xe,{children:[e.jsxs(We,{data:[{name:"Entradas",value:O.entradas},{name:"Sa√≠das",value:Math.abs(O.saidas)}],cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:x})=>`${a} ${(x*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[e.jsx(Ne,{fill:"#10b981"}),e.jsx(Ne,{fill:"#ef4444"})]}),e.jsx(Y,{formatter:a=>p(a)})]})})})]})]})]})})]})]})}function ns(){return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extrato de Lan√ßamentos ‚Ä¢ Dados Reais"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registros financeiros consultados via Supabase"})]}),e.jsx(aa,{})]})}const is=La("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 border",{variants:{variant:{default:"bg-card text-foreground border-border hover:bg-[#0f141b]",primary:"bg-primary text-primary-foreground border-transparent hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground border-transparent hover:bg-secondary/90",destructive:"bg-destructive text-destructive-foreground border-transparent hover:bg-destructive/90",success:"bg-success text-success-foreground border-transparent hover:bg-success/90",warning:"bg-warning text-warning-foreground border-transparent hover:bg-warning/90",info:"bg-info text-info-foreground border-transparent hover:bg-info/90",ghost:"bg-transparent text-foreground border-transparent hover:bg-muted/40",outline:"bg-transparent text-foreground border-border hover:bg-muted/30",accent:"bg-accent border-border text-accent-foreground data-[active=true]:bg-accent/90"},size:{default:"h-9 px-3 py-2",sm:"h-8 px-2",lg:"h-10 px-4",icon:"h-9 w-9 p-0"}},defaultVariants:{variant:"default",size:"default"}}),sa=c.forwardRef(({className:s,variant:o,size:n,asChild:i=!1,...t},r)=>{const d=i?Da:"button";return e.jsx(d,{className:U(is({variant:o,size:n,className:s})),ref:r,...t})});sa.displayName="Button";const ls={bpo:["bpo","terceiriza√ß√£o","outsourcing","servi√ßos","processos"],tecnologia:["software","tech","tecnologia","sistemas","digital","ti"],consultoria:["consultoria","consulting","advisory","gest√£o"],rh:["rh","recursos humanos","people","talentos","recrutamento"],financeiro:["financeira","cr√©dito","banco","fundo","investimento"],saude:["sa√∫de","hospital","cl√≠nica","m√©dico","farm√°cia"],educacao:["educa√ß√£o","escola","universidade","curso","ensino"],varejo:["varejo","loja","com√©rcio","mercado","shopping"],industria:["ind√∫stria","f√°brica","manufatura","produ√ß√£o"],logistica:["log√≠stica","transporte","distribui√ß√£o","armaz√©m"]},Pe={bpo:{descricao:"Empresa especializada em Business Process Outsourcing (BPO), oferecendo servi√ßos de terceiriza√ß√£o de processos de neg√≥cios, gest√£o administrativa, financeira e de recursos humanos",concorrentes:["Atento","Stefanini","TCS Brasil","Accenture","Teleperformance","Contax","Almaviva"],tendencias:["intelig√™ncia artificial processos empresariais","automa√ß√£o RPA rob√≥tica","trabalho remoto h√≠brido gest√£o","ESG sustentabilidade empresas","transforma√ß√£o digital empresas","experi√™ncia do cliente CX"],palavrasChaveNoticias:["bpo","terceiriza√ß√£o","outsourcing","processos de neg√≥cio","gest√£o empresarial"]},tecnologia:{descricao:"Empresa de tecnologia focada em desenvolvimento de software, solu√ß√µes digitais e transforma√ß√£o tecnol√≥gica",concorrentes:["Microsoft","Oracle","SAP","Salesforce","Totvs","Senior"],tendencias:["intelig√™ncia artificial generativa","cloud computing nuvem","ciberseguran√ßa prote√ß√£o dados","blockchain web3","DevOps CI/CD","microservi√ßos arquitetura"],palavrasChaveNoticias:["tecnologia","software","inova√ß√£o digital","transforma√ß√£o digital","TI"]},consultoria:{descricao:"Consultoria empresarial especializada em estrat√©gia, gest√£o e otimiza√ß√£o de processos organizacionais",concorrentes:["McKinsey","BCG","Bain","Deloitte","PwC","EY","KPMG"],tendencias:["consultoria estrat√©gica digital","transforma√ß√£o organizacional","gest√£o de mudan√ßas","excel√™ncia operacional","analytics big data","governan√ßa corporativa"],palavrasChaveNoticias:["consultoria","estrat√©gia empresarial","gest√£o organizacional","advisory"]},rh:{descricao:"Especialista em gest√£o de recursos humanos, recrutamento, sele√ß√£o e desenvolvimento de talentos",concorrentes:["Randstad","Adecco","ManpowerGroup","Robert Half","Page Personnel"],tendencias:["people analytics dados RH","employee experience experi√™ncia colaborador","diversidade inclus√£o empresas","wellbeing sa√∫de mental trabalho","upskilling reskilling talentos","employer branding marca empregadora"],palavrasChaveNoticias:["recursos humanos","gest√£o de talentos","recrutamento","people management"]},financeiro:{descricao:"Institui√ß√£o financeira focada em servi√ßos banc√°rios, cr√©dito, investimentos e gest√£o financeira",concorrentes:["Ita√∫","Bradesco","Santander","Banco do Brasil","Nubank","BTG Pactual"],tendencias:["open banking open finance","fintechs pagamentos digitais","blockchain DeFi finan√ßas","regula√ß√£o financeira BACEN","cr√©dito digital an√°lise risco","ESG investimentos sustent√°veis"],palavrasChaveNoticias:["mercado financeiro","bancos","cr√©dito","investimentos","finan√ßas"]}};function cs(s,o){const n=`${s} ${o}`.toLowerCase();for(const[i,t]of Object.entries(ls))for(const r of t)if(n.includes(r))return i;return"bpo"}async function Te(s,o,n){const i=cs(o,n),t=Pe[i]||Pe.bpo;return{cnpj:s,nomeEmpresa:o,grupoEmpresarial:n,segmentosPrincipais:[i],palavrasChave:t.palavrasChaveNoticias,descricaoNegocio:t.descricao,concorrentes:t.concorrentes,tendenciasRelevantes:t.tendencias}}function ds(s){return`${s.grupoEmpresarial} - ${s.descricaoNegocio}. A empresa atua principalmente no segmento de ${s.segmentosPrincipais.join(", ")}.`}const Ce={bpo:{mercado:[{titulo:"Mercado de BPO cresce 18% no Brasil e deve movimentar R$ 156 bilh√µes em 2025",resumo:"Setor de terceiriza√ß√£o de processos apresenta forte expans√£o com empresas investindo em automa√ß√£o e IA. Demanda por servi√ßos especializados cresce principalmente em √°reas financeiras, RH e atendimento ao cliente.",sentimento:"positivo",fonte:"Valor Econ√¥mico",relevancia:98,categorias:["crescimento","mercado","transforma√ß√£o digital"]},{titulo:"Empresas de BPO investem R$ 8 bilh√µes em tecnologia e capacita√ß√£o",resumo:"Principais players do mercado brasileiro anunciam investimentos massivos em intelig√™ncia artificial, RPA e qualifica√ß√£o profissional. Movimento busca aumentar efici√™ncia e competitividade no setor.",sentimento:"positivo",fonte:"InfoMoney",relevancia:95,categorias:["investimento","tecnologia","capacita√ß√£o"]},{titulo:"Reforma trabalhista exige adequa√ß√µes em contratos de terceiriza√ß√£o",resumo:"Novas diretrizes do Minist√©rio do Trabalho imp√µem mudan√ßas na estrutura de contrata√ß√£o de servi√ßos terceirizados. Empresas t√™m at√© mar√ßo de 2025 para adequa√ß√£o completa.",sentimento:"negativo",fonte:"Estad√£o",relevancia:88,categorias:["regula√ß√£o","compliance","legisla√ß√£o"]},{titulo:"Demanda por servi√ßos de gest√£o de RH terceirizados cresce 24%",resumo:"Empresas buscam especializa√ß√£o externa para processos de recrutamento, folha e desenvolvimento. Tend√™ncia reflete foco em core business e redu√ß√£o de custos operacionais.",sentimento:"positivo",fonte:"Exame",relevancia:92,categorias:["rh","gest√£o de pessoas","terceiriza√ß√£o"]}],concorrentes:[{titulo:"Atento investe R$ 300 milh√µes em expans√£o e tecnologia",resumo:"L√≠der em contact center anuncia plano de expans√£o com abertura de 12 novas unidades e contrata√ß√£o de 8 mil profissionais. Investimento inclui plataforma pr√≥pria de IA conversacional.",sentimento:"neutro",fonte:"Folha de S.Paulo",relevancia:87},{titulo:"Stefanini adquire empresa de consultoria em transforma√ß√£o digital",resumo:"Grupo amplia portf√≥lio com aquisi√ß√£o estrat√©gica de consultoria especializada em cloud e analytics. Movimento fortalece posi√ß√£o em projetos de grande porte.",sentimento:"positivo",fonte:"TI Inside",relevancia:85},{titulo:"TCS Brasil reporta crescimento de 28% em receita no ano fiscal",resumo:"Tata Consultancy Services apresenta resultados acima das expectativas impulsionados por contratos de moderniza√ß√£o de sistemas e migra√ß√£o para nuvem.",sentimento:"positivo",fonte:"Bloomberg Brasil",relevancia:83}],tendencias:[{titulo:"IA Generativa deve automatizar 40% das tarefas em BPO at√© 2026",resumo:"Estudo da Gartner revela que tecnologias de IA generativa transformar√£o radicalmente opera√ß√µes de contact center e backoffice. Empresas que n√£o adotarem correm risco de perder competitividade.",sentimento:"positivo",fonte:"Gartner Research",relevancia:96,categorias:["intelig√™ncia artificial","automa√ß√£o","futuro"]},{titulo:"Trabalho h√≠brido se consolida como modelo permanente em servi√ßos",resumo:"Pesquisa da FGV indica que 73% das empresas de servi√ßos adotaram modelo h√≠brido definitivamente. Mudan√ßa exige novos investimentos em infraestrutura digital e gest√£o remota.",sentimento:"neutro",fonte:"FGV-EAESP",relevancia:89,categorias:["trabalho remoto","gest√£o","futuro do trabalho"]},{titulo:"ESG torna-se crit√©rio obrigat√≥rio em licita√ß√µes de grande porte",resumo:"Empresas de BPO precisam comprovar pr√°ticas sustent√°veis e sociais para participar de concorr√™ncias p√∫blicas e privadas. Certifica√ß√µes ambientais ganham peso em decis√µes.",sentimento:"positivo",fonte:"√âpoca Neg√≥cios",relevancia:91,categorias:["esg","sustentabilidade","governan√ßa"]},{titulo:"Escassez de talentos qualificados desafia setor de servi√ßos",resumo:"Pesquisa da Bain aponta falta de 150 mil profissionais qualificados no setor. Empresas investem em programas de requalifica√ß√£o e parcerias com universidades.",sentimento:"negativo",fonte:"Bain & Company",relevancia:87,categorias:["talentos","capacita√ß√£o","mercado de trabalho"]}]}},pe=["Valor Econ√¥mico","Folha de S.Paulo","O Estado de S.Paulo","Exame","InfoMoney","√âpoca Neg√≥cios","Bloomberg Brasil","Reuters Brasil","Converg√™ncia Digital","TI Inside","CIO Brasil","IT Forum"],ue=["Gartner Research","McKinsey & Company","Bain & Company","BCG Brasil","Deloitte Insights","PwC Brasil","FGV-EAESP","Funda√ß√£o Dom Cabral","IDC Brasil","Forrester Research"];function ms(s,o=48){const n=Ce.bpo.mercado,i=[];n.forEach((m,j)=>{const u=11-j;i.push({id:`real-${j}`,titulo:m.titulo,resumo:m.resumo,sentimento:m.sentimento,fonte:m.fonte,data:`2025-${String(u).padStart(2,"0")}-${15+j}`,url:"#",relevancia:m.relevancia,categorias:m.categorias||[]})});const t=us(),r=12-n.length,d=Math.floor((o-n.length)/r);for(let m=1;m<=12;m++)if(!(m>=8))for(let j=0;j<d;j++){const u=t[Math.floor(Math.random()*t.length)],v=Math.random()>.5?pe[Math.floor(Math.random()*pe.length)]:ue[Math.floor(Math.random()*ue.length)];i.push({id:`gen-mercado-${m}-${j}`,titulo:u.titulo.replace("{segmento}",s.segmentosPrincipais[0].toUpperCase()),resumo:u.resumo.replace("{grupo}",s.grupoEmpresarial),sentimento:u.sentimento,fonte:v,data:`2025-${String(m).padStart(2,"0")}-${5+j*8}`,url:"#",relevancia:75+Math.floor(Math.random()*20),categorias:u.categorias})}return i.sort((m,j)=>new Date(j.data).getTime()-new Date(m.data).getTime())}function xs(s,o=36){const n=Ce.bpo.concorrentes,i=[];n.forEach((r,d)=>{const m=s.concorrentes[d%s.concorrentes.length];i.push({id:`real-conc-${d}`,titulo:r.titulo,resumo:r.resumo,sentimento:r.sentimento,fonte:r.fonte,data:`2025-${String(10-d).padStart(2,"0")}-${20+d}`,url:"#",relevancia:r.relevancia,categorias:["concorrente",m]})});const t=hs();return s.concorrentes.forEach((r,d)=>{for(let m=1;m<=12&&!(i.length>=o);m++){const j=t[m%t.length],u=pe[Math.floor(Math.random()*pe.length)];i.push({id:`gen-conc-${r}-${m}`,titulo:j.titulo.replace("{concorrente}",r),resumo:j.resumo.replace("{concorrente}",r),sentimento:j.sentimento,fonte:u,data:`2025-${String(m).padStart(2,"0")}-${d*3+5}`,url:"#",relevancia:70+Math.floor(Math.random()*20),categorias:["concorrente",r]})}}),i.sort((r,d)=>new Date(d.data).getTime()-new Date(r.data).getTime()).slice(0,o)}function ps(s,o=48){const n=Ce.bpo.tendencias,i=[];n.forEach((r,d)=>{i.push({id:`real-tend-${d}`,titulo:r.titulo,resumo:r.resumo,sentimento:r.sentimento,fonte:r.fonte,data:`2025-${String(11-d).padStart(2,"0")}-${10+d*5}`,url:"#",relevancia:r.relevancia,categorias:r.categorias||[]})});const t=gs();for(let r=1;r<=12&&!(i.length>=o);r++){const d=Math.floor((o-n.length)/12);for(let m=0;m<d;m++){const j=t[(r+m)%t.length],u=ue[Math.floor(Math.random()*ue.length)];i.push({id:`gen-tend-${r}-${m}`,titulo:j.titulo,resumo:j.resumo,sentimento:j.sentimento,fonte:u,data:`2025-${String(r).padStart(2,"0")}-${3+m*7}`,url:"#",relevancia:80+Math.floor(Math.random()*18),categorias:j.categorias})}}return i.sort((r,d)=>new Date(d.data).getTime()-new Date(r.data).getTime())}function us(s){return[{titulo:"Investimentos em {segmento} superam R$ 5 bilh√µes no primeiro trimestre",resumo:"Setor registra aportes recordes com foco em tecnologia e expans√£o regional. Empresas como {grupo} lideram movimento de moderniza√ß√£o e amplia√ß√£o de capacidade.",sentimento:"positivo",categorias:["investimento","crescimento"]},{titulo:"Novas regulamenta√ß√µes impactam setor de servi√ßos terceirizados",resumo:"Mudan√ßas na legisla√ß√£o trabalhista e tribut√°ria exigem adapta√ß√µes operacionais. Especialistas recomendam revis√£o de contratos e processos de compliance.",sentimento:"negativo",categorias:["regula√ß√£o","compliance"]},{titulo:"Fus√µes e aquisi√ß√µes movimentam mercado de {segmento}",resumo:"Consolida√ß√£o do setor acelera com empresas buscando ganhos de escala e sinergias operacionais. Transa√ß√µes somam R$ 2,3 bilh√µes no per√≠odo.",sentimento:"neutro",categorias:["m&a","consolida√ß√£o"]},{titulo:"Empresas de {segmento} apostam em inova√ß√£o para diferencia√ß√£o",resumo:"Desenvolvimento de solu√ß√µes propriet√°rias e parcerias tecnol√≥gicas ganham for√ßa. Investimento em P&D cresce 35% em rela√ß√£o ao ano anterior.",sentimento:"positivo",categorias:["inova√ß√£o","tecnologia"]}]}function hs(){return[{titulo:"{concorrente} anuncia expans√£o para Nordeste e Centro-Oeste",resumo:"{concorrente} investe em novas unidades regionais visando ampliar presen√ßa nacional. Plano prev√™ cria√ß√£o de 2 mil empregos nos pr√≥ximos 18 meses.",sentimento:"neutro"},{titulo:"{concorrente} lan√ßa plataforma digital pr√≥pria de gest√£o",resumo:"{concorrente} desenvolve solu√ß√£o tecnol√≥gica interna para otimizar opera√ß√µes. Ferramenta integra IA e analytics para ganhos de produtividade.",sentimento:"positivo"},{titulo:"{concorrente} renova certifica√ß√µes internacionais de qualidade",resumo:"{concorrente} mant√©m padr√µes ISO e conquista novas certifica√ß√µes ESG. Reconhecimento refor√ßa posicionamento em mercados premium.",sentimento:"positivo"},{titulo:"{concorrente} enfrenta desafios com turnover elevado",resumo:"{concorrente} registra taxa de rotatividade acima da m√©dia do setor. Empresa anuncia programa de reten√ß√£o e benef√≠cios ampliados.",sentimento:"negativo"}]}function gs(s){return[{titulo:"Ciberseguran√ßa torna-se prioridade estrat√©gica em servi√ßos",resumo:"Ataques ransomware crescem 120% e empresas elevam investimentos em prote√ß√£o de dados. Compliance com LGPD exige infraestrutura robusta de seguran√ßa.",sentimento:"negativo",categorias:["seguran√ßa","tecnologia","lgpd"]},{titulo:"An√°lise preditiva revoluciona tomada de decis√£o empresarial",resumo:"Ferramentas de big data e machine learning permitem antecipa√ß√£o de tend√™ncias e otimiza√ß√£o de recursos. ROI m√©dio de implementa√ß√£o atinge 300%.",sentimento:"positivo",categorias:["analytics","big data","inova√ß√£o"]},{titulo:"Customer experience define competitividade no setor",resumo:"Pesquisa aponta que 78% dos clientes valorizam mais a experi√™ncia que o pre√ßo. Empresas investem em omnichannel e personaliza√ß√£o.",sentimento:"positivo",categorias:["cx","atendimento","estrat√©gia"]},{titulo:"Economia circular ganha espa√ßo em modelos de neg√≥cio",resumo:"Pr√°ticas sustent√°veis deixam de ser diferenciais e tornam-se requisitos b√°sicos. Empresas que n√£o se adaptarem perdem competitividade.",sentimento:"neutro",categorias:["sustentabilidade","esg","economia circular"]},{titulo:"Blockchain promete transformar contratos e auditoria",resumo:"Tecnologia de registro distribu√≠do garante transpar√™ncia e rastreabilidade em transa√ß√µes. Pilotos mostram redu√ß√£o de 60% no tempo de auditorias.",sentimento:"positivo",categorias:["blockchain","inova√ß√£o","tecnologia"]},{titulo:"Sa√∫de mental no trabalho exige novas pol√≠ticas corporativas",resumo:"Burnout e ansiedade afetam 40% dos profissionais segundo pesquisa. Empresas implementam programas de wellbeing e acompanhamento psicol√≥gico.",sentimento:"neutro",categorias:["sa√∫de mental","rh","wellbeing"]}]}function fs({cnpj:s="26888098000159",nomeEmpresa:o="Volpe BPO",grupoEmpresarial:n="Grupo Volpe"}){const[i,t]=c.useState(!1),[r,d]=c.useState(""),[m,j]=c.useState(null),[u,v]=c.useState([]),[y,g]=c.useState([]),[E,D]=c.useState([]);c.useEffect(()=>{w(),R()},[s,o,n]);const w=async()=>{const l=await Te(s,o,n);j(l),d(ds(l))},R=async()=>{t(!0);try{let l=m;l||(l=await Te(s,o,n),j(l));const C=ms(l,48),k=xs(l,36),f=ps(l,48);console.log(`üì∞ Not√≠cias geradas para ${l.grupoEmpresarial}:`,{mercado:C.length,concorrentes:k.length,tendencias:f.length}),setTimeout(()=>{v(C),g(k),D(f),t(!1)},800)}catch(l){console.error("Erro ao carregar not√≠cias:",l),t(!1)}},p=l=>{const k={positivo:{bg:"bg-green-500/20",text:"text-green-400",icon:H,label:"Positivo"},neutro:{bg:"bg-blue-500/20",text:"text-blue-400",icon:Ma,label:"Neutro"},negativo:{bg:"bg-red-500/20",text:"text-red-400",icon:de,label:"Negativo"}}[l],f=k.icon;return e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${k.bg} ${k.text} text-xs font-semibold`,children:[e.jsx(f,{className:"w-3 h-3"}),k.label]})},S=({noticia:l})=>e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"neomorphic rounded-2xl p-5 border border-graphite-800/30 hover:border-gold-500/30 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-semibold text-base mb-2 line-clamp-2",children:l.titulo}),e.jsx("p",{className:"text-graphite-400 text-sm leading-relaxed line-clamp-3",children:l.resumo})]}),e.jsx("div",{className:"ml-4",children:p(l.sentimento)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-graphite-800",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-graphite-500",children:[e.jsx("span",{className:"font-medium",children:l.fonte}),e.jsx("span",{children:new Date(l.data).toLocaleDateString("pt-BR")}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-gold-500"}),l.relevancia,"% relevante"]})]}),e.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"text-gold-500 hover:text-gold-400 transition-colors",children:e.jsx(Aa,{className:"w-4 h-4"})})]})]});return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Not√≠cias & Intelig√™ncia de Mercado"}),e.jsxs("p",{className:"text-graphite-400",children:["Acompanhe tend√™ncias, concorrentes e oportunidades do setor ‚Ä¢ ",o]})]}),e.jsxs(sa,{onClick:R,disabled:i,className:"flex items-center gap-2",children:[e.jsx(te,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Atualizar"]})]}),e.jsxs(_,{className:"mb-6 bg-gradient-to-br from-gold-500/10 to-gold-600/5 border-gold-500/20",children:[e.jsx(G,{children:e.jsxs(J,{className:"text-gold-400 flex items-center gap-2",children:[e.jsx(Ra,{className:"w-5 h-5"}),"Sobre a Empresa Analisada"]})}),e.jsxs(q,{className:"space-y-3",children:[e.jsx("p",{className:"text-graphite-300 text-sm leading-relaxed",children:r||"Carregando informa√ß√µes da empresa..."}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-3 border-t border-gold-500/20",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ia,{className:"w-4 h-4 text-gold-400"}),e.jsx("span",{className:"text-xs font-semibold text-gold-400",children:"Segmento"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:m.segmentosPrincipais.map(l=>e.jsx("span",{className:"px-2 py-1 rounded-md bg-gold-500/10 text-gold-400 text-xs",children:l.toUpperCase()},l))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_e,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs font-semibold text-blue-400",children:"Concorrentes Principais"})]}),e.jsxs("p",{className:"text-graphite-400 text-xs",children:[m.concorrentes.slice(0,3).join(", "),"..."]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs font-semibold text-green-400",children:"Palavras-Chave"})]}),e.jsx("p",{className:"text-graphite-400 text-xs",children:m.palavrasChave.slice(0,3).join(", ")})]})]})]})]}),e.jsxs(we,{defaultValue:"mercado",className:"w-full",children:[e.jsxs(ge,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(F,{value:"mercado",children:["Mercado & Setor",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-gold-500/20 text-gold-400 text-xs",children:u.length})]}),e.jsxs(F,{value:"concorrentes",children:["Concorrentes",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400 text-xs",children:y.length})]}),e.jsxs(F,{value:"tendencias",children:["Tend√™ncias",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-purple-500/20 text-purple-400 text-xs",children:E.length})]})]}),e.jsx(L,{value:"mercado",className:"space-y-4",children:i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(te,{className:"w-8 h-8 animate-spin text-gold-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando not√≠cias do mercado..."})]}):u.map(l=>e.jsx(S,{noticia:l},l.id))}),e.jsx(L,{value:"concorrentes",className:"space-y-4",children:i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(te,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando not√≠cias de concorrentes..."})]}):y.map(l=>e.jsx(S,{noticia:l},l.id))}),e.jsx(L,{value:"tendencias",className:"space-y-4",children:i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(te,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando tend√™ncias do setor..."})]}):E.map(l=>e.jsx(S,{noticia:l},l.id))})]})]})}const ze="oracle_context_rules";function bs({open:s,onClose:o,onUpdateOracleContext:n}){const[i,t]=c.useState("settings"),[r,d]=c.useState(""),[m,j]=c.useState("all"),[u,v]=c.useState("all"),[y,g]=c.useState("24h"),[E,D]=c.useState([]);if(c.useEffect(()=>{if(s){const l=localStorage.getItem(ze)||"";d(l)}},[s]),c.useEffect(()=>{if(!s||i!=="logs")return;const l={select:"*",order:"ts.desc",limit:"200"};P.restGet("app_logs",{query:l}).then(D).catch(()=>D([]))},[s,i,m,u,y]),!s)return null;const w=()=>{localStorage.setItem(ze,r),n&&n(r),o()},R=E.filter(l=>(m==="all"||l.level===m)&&(u==="all"||l.service===u)),p=R.map(l=>({ts:l.ts,info:l.level==="info"?1:0,warn:l.level==="warn"?1:0,error:l.level==="error"?1:0})),S=Object.values(R.reduce((l,C)=>(C.endpoint&&(l[C.endpoint]=(l[C.endpoint]||0)+1),l),{})).length?Object.entries(R.reduce((l,C)=>(C.endpoint&&(l[C.endpoint]=(l[C.endpoint]||0)+1),l),{})).slice(0,8).map(([l,C])=>({endpoint:l,count:C})):[];return R.filter(l=>l.latencyMs).map(l=>({endpoint:l.endpoint||"N/A",latency:l.latencyMs})),e.jsx(b.div,{className:"fixed inset-0 z-[75] bg-black/60 backdrop-blur-sm",children:e.jsxs(b.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"mx-auto mt-12 max-w-[1200px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Configura√ß√µes do Sistema"})]}),e.jsx("button",{onClick:o,className:"text-muted-foreground hover:text-foreground",children:e.jsx(Be,{className:"w-5 h-5"})})]}),e.jsxs(we,{value:i,onValueChange:t,className:"w-full",children:[e.jsxs(ge,{className:"w-full grid grid-cols-3 p-1 mx-5 mt-5",children:[e.jsxs(F,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Configura√ß√µes"]}),e.jsxs(F,{value:"logs",className:"flex items-center gap-2",children:[e.jsx(Oa,{className:"w-4 h-4"}),"Logs"]}),e.jsxs(F,{value:"about",className:"flex items-center gap-2",children:[e.jsx(ka,{className:"w-4 h-4"}),"Sobre"]})]}),e.jsx(L,{value:"settings",className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Regras de Contexto do Or√°culo"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Configure regras de contexto (empresa/grupo, fontes, tom e escopo) para personalizar respostas do Or√°culo."}),e.jsx("textarea",{value:r,onChange:l=>d(l.target.value),rows:10,placeholder:"Ex: Focar em an√°lise do Grupo Volpe, usar tom profissional, priorizar dados de 2024-2025...",className:"w-full bg-graphite-900 border border-graphite-800 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 font-mono"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 rounded-xl bg-secondary text-secondary-foreground hover:bg-secondary/80",children:"Cancelar"}),e.jsx("button",{onClick:w,className:"px-4 py-2 rounded-xl bg-primary text-primary-foreground hover:bg-primary/90",children:"Salvar"})]})]})}),e.jsx(L,{value:"logs",className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("select",{value:y,onChange:l=>g(l.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"24h",children:"24h"}),e.jsx("option",{value:"7d",children:"7 dias"}),e.jsx("option",{value:"30d",children:"30 dias"})]}),e.jsxs("select",{value:m,onChange:l=>j(l.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos os n√≠veis"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warn",children:"Warn"}),e.jsx("option",{value:"error",children:"Error"})]}),e.jsxs("select",{value:u,onChange:l=>v(l.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos os servi√ßos"}),e.jsx("option",{value:"UI",children:"UI"}),e.jsx("option",{value:"API",children:"API"}),e.jsx("option",{value:"Edge",children:"Edge"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"N√≠veis ao longo do tempo"})}),e.jsx("div",{className:"p-4 pt-0 h-[250px]",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(se,{data:p,children:[e.jsx(Z,{stroke:"rgba(200,200,200,0.15)",vertical:!1}),e.jsx(Q,{dataKey:"ts",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},hide:!0}),e.jsx(ee,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(Y,{}),e.jsx(me,{}),e.jsx(V,{type:"monotone",dataKey:"info",stackId:"1",stroke:"#38bdf8",fill:"#38bdf8"}),e.jsx(V,{type:"monotone",dataKey:"warn",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b"}),e.jsx(V,{type:"monotone",dataKey:"error",stackId:"1",stroke:"#ef4444",fill:"#ef4444"})]})})})]}),e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Top endpoints"})}),e.jsx("div",{className:"p-4 pt-0 h-[250px]",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(he,{data:S,children:[e.jsx(Z,{stroke:"rgba(200,200,200,0.15)"}),e.jsx(Q,{dataKey:"endpoint",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(ee,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(Y,{}),e.jsx(K,{dataKey:"count",fill:"#ff7a00"})]})})})]})]}),e.jsx("div",{className:"rounded-2xl border border-border overflow-hidden max-h-[300px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Timestamp"}),e.jsx("th",{className:"text-left p-3",children:"N√≠vel"}),e.jsx("th",{className:"text-left p-3",children:"Servi√ßo"}),e.jsx("th",{className:"text-left p-3",children:"Endpoint"}),e.jsx("th",{className:"text-left p-3",children:"Mensagem"})]})}),e.jsxs("tbody",{children:[R.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-8 text-muted-foreground",children:"Nenhum log encontrado para os filtros selecionados."})}),R.slice(0,50).map((l,C)=>e.jsxs("tr",{className:"border-t border-border hover:bg-graphite-900/50",children:[e.jsx("td",{className:"p-3 text-xs",children:new Date(l.ts).toLocaleString("pt-BR")}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${l.level==="error"?"bg-red-500/20 text-red-400":l.level==="warn"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:l.level})}),e.jsx("td",{className:"p-3 text-xs",children:l.service}),e.jsx("td",{className:"p-3 text-xs font-mono",children:l.endpoint||"-"}),e.jsx("td",{className:"p-3 text-xs",children:l.message})]},C))]})]})})]})}),e.jsx(L,{value:"about",className:"p-5",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-gold-500 to-orange-500 flex items-center justify-center",children:e.jsx(ne,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold",children:"fin.app"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Financial Intelligence Dashboard"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Vers√£o"}),e.jsx("p",{className:"text-lg font-bold",children:"v0.2.0"})]}),e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Ambiente"}),e.jsx("p",{className:"text-lg font-bold",children:"Produ√ß√£o"})]}),e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Empresa"}),e.jsx("p",{className:"text-lg font-bold",children:"Grupo Volpe"})]}),e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"√öltima Atualiza√ß√£o"}),e.jsx("p",{className:"text-lg font-bold",children:"17/11/2025"})]})]}),e.jsxs("div",{className:"card-premium p-5",children:[e.jsx("h5",{className:"text-sm font-semibold mb-3",children:"Funcionalidades"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Dashboard financeiro com DRE e DFC"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"An√°lise de fluxo de caixa e lan√ßamentos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Sistema de not√≠cias inteligente com IA"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Or√°culo para consultas financeiras"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Gerenciamento de logs e monitoramento"]})]})]}),e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"¬© 2025 fin.app. Todos os direitos reservados."})]})})]})]})})}const js={duration:.35,ease:[.22,1,.36,1]},vs={hidden:{opacity:0,y:16},show:{opacity:1,y:0,transition:js}},ve={whileHover:{scale:1.02}};function Ns({open:s,onClose:o,onLogged:n}){const[i,t]=c.useState("dev@angrax.com.br"),[r,d]=c.useState("B5b0dcf500@#"),[m,j]=c.useState(""),[u,v]=c.useState(!1),y=async()=>{j(""),v(!0);try{const g=await ea(i,r);if(!g){j("Credenciais inv√°lidas"),v(!1);return}const E={...g,defaultCompany:"26888098000159",companies:[{cliente_nome:"LOJA 01 - VOLPE MATRIZ",cnpj:"26888098000159"}]};n(E),o()}catch(g){j(g.message||"Erro ao fazer login"),v(!1)}};return s?e.jsx(b.div,{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-xl flex items-center justify-center",children:e.jsx(b.div,{variants:vs,initial:"hidden",animate:"show",className:"neomorphic neomorphic-hover w-[380px] rounded-xl border border-graphite-800/30 shadow-soft-lg",children:e.jsxs("div",{className:"p-7 space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:"/finapp-logo.png",alt:"fin.app",className:"w-40 h-auto"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Login - Grupo VOLPE"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acesso exclusivo para o grupo VOLPE"})]}),e.jsx(b.input,{whileHover:ve.whileHover,value:i,onChange:g=>t(g.target.value),placeholder:"E-mail",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:u}),e.jsx(b.input,{whileHover:ve.whileHover,type:"password",value:r,onChange:g=>d(g.target.value),placeholder:"Senha",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:u}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e.jsx("p",{children:"Empresa padr√£o: LOJA 01 - VOLPE MATRIZ (0159)"})}),m&&e.jsx("p",{className:"text-xs text-destructive text-center",children:m}),e.jsx("div",{className:"flex gap-2 justify-end pt-2",children:e.jsx(b.button,{whileHover:ve.whileHover,whileTap:{scale:.98},onClick:y,disabled:u,className:"w-full px-3 py-2 rounded-sm bg-emerald-400 text-white hover:bg-emerald-500 disabled:opacity-50",children:u?"Entrando...":"Entrar"})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[e.jsx("p",{children:"Usu√°rio: dev@angrax.com.br"}),e.jsx("p",{children:"Empresa: 26888098000159 (Matriz)"})]})]})})}):null}function ys(s="26888098000159",o){const[n,i]=c.useState({receitaTotal:0,despesasTotal:0,limiteDiario:45e3,metaPoupanca:15e4,receitaChange:0,despesasChange:0,limiteDiarioProgress:0,metaPoupancaProgress:0}),[t,r]=c.useState(!0);c.useEffect(()=>{d()},[s,o]);const d=async()=>{try{const m=await P.getDRE(s);if(!m||m.length===0){r(!1);return}const[j,u]=o?o.split("-").map(Number):[new Date().getFullYear(),new Date().getMonth()+1],v=j,y=u-1;let g=0,E=0,D=0,w=0;m.forEach(M=>{const O=new Date(M.data),T=O.getFullYear(),I=O.getMonth();T===v&&I===y?M.natureza==="receita"?g+=M.valor:M.natureza==="despesa"&&(E+=Math.abs(M.valor)):(T===v&&I===y-1||y===0&&T===v-1&&I===11)&&(M.natureza==="receita"?D+=M.valor:M.natureza==="despesa"&&(w+=Math.abs(M.valor)))});const R=D>0?(g-D)/D*100:0,p=w>0?(E-w)/w*100:0,l=45e3*22,C=Math.min(Math.round(g/l*100),100),k=g-E,f=Math.min(Math.round(k/15e4*100),100);i({receitaTotal:g,despesasTotal:E,limiteDiario:45e3,metaPoupanca:15e4,receitaChange:R,despesasChange:p,limiteDiarioProgress:C,metaPoupancaProgress:f}),r(!1)}catch(m){console.error("Erro ao carregar dados financeiros:",m),r(!1)}};return{metrics:n,loading:t}}const $e=[{value:42},{value:48},{value:45},{value:52},{value:58},{value:65},{value:70}];function ws({payments:s,receipts:o,paymentsChange:n,receiptsChange:i}){return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl p-6 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-500/5 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-graphite-400",children:"Processamento"}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üìä"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-0.5",children:"Pagamentos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.toLocaleString()}),e.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded-md text-[10px] font-semibold ${n>=0?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:[n>=0?e.jsx(H,{className:"w-3 h-3"}):e.jsx(de,{className:"w-3 h-3"}),Math.abs(n),"%"]})]})]}),e.jsx("div",{className:"w-16 h-8",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsx(se,{data:$e,children:e.jsx(V,{type:"monotone",dataKey:"value",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.2,strokeWidth:1.5})})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-0.5",children:"Recebimentos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:o.toLocaleString()}),e.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded-md text-[10px] font-semibold ${i>=0?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:[i>=0?e.jsx(H,{className:"w-3 h-3"}):e.jsx(de,{className:"w-3 h-3"}),Math.abs(i),"%"]})]})]}),e.jsx("div",{className:"w-16 h-8",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsx(se,{data:$e,children:e.jsx(V,{type:"monotone",dataKey:"value",stroke:"#10b981",fill:"#10b981",fillOpacity:.2,strokeWidth:1.5})})})})]})]})]})]})}const Cs=[{name:"Stone",value:35,color:"#10b981"},{name:"Cielo",value:28,color:"#3b82f6"},{name:"Rede",value:22,color:"#f59e0b"},{name:"GetNet",value:15,color:"#8b5cf6"}],Ss=[{name:"Jan",stone:32,cielo:25,rede:20,getnet:12},{name:"Fev",stone:34,cielo:27,rede:21,getnet:14},{name:"Mar",stone:35,cielo:28,rede:22,getnet:15}];function Es(){return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl p-6 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/5 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-graphite-400",children:"Adquirentes"}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üí≥"})})]}),e.jsx("div",{className:"space-y-2.5 mb-4",children:Cs.map((s,o)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-graphite-300 font-medium",children:s.name}),e.jsxs("span",{className:"text-xs font-bold text-white",children:[s.value,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-graphite-900 rounded-full overflow-hidden",children:e.jsx(b.div,{initial:{width:0},animate:{width:`${s.value}%`},transition:{delay:.4+o*.1,duration:.6},className:"h-full rounded-full",style:{backgroundColor:s.color}})})]}),e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:s.color}})]},s.name))}),e.jsx("div",{className:"h-16 mt-4",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(he,{data:Ss,children:[e.jsx(K,{dataKey:"stone",fill:"#10b981",radius:[4,4,0,0]}),e.jsx(K,{dataKey:"cielo",fill:"#3b82f6",radius:[4,4,0,0]}),e.jsx(K,{dataKey:"rede",fill:"#f59e0b",radius:[4,4,0,0]}),e.jsx(K,{dataKey:"getnet",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]})}const ye=[{name:"Bradesco",value:38,color:"#ef4444",icon:"üè¶"},{name:"Ita√∫",value:32,color:"#f59e0b",icon:"üèõÔ∏è"},{name:"Santander",value:20,color:"#3b82f6",icon:"üè¢"},{name:"Outros",value:10,color:"#6b7280",icon:"üíº"}],Ds=ye.map(s=>({name:s.name,value:s.value}));function Rs(){return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl p-6 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-500/5 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-graphite-400",children:"Bancos"}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üè¶"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsx(Xe,{children:e.jsx(We,{data:Ds,cx:"50%",cy:"50%",innerRadius:12,outerRadius:35,dataKey:"value",strokeWidth:0,children:ye.map((s,o)=>e.jsx(Ne,{fill:s.color},`cell-${o}`))})})})}),e.jsx("div",{className:"flex-1 space-y-2",children:ye.map((s,o)=>e.jsxs(b.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.45+o*.08},className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-xs text-graphite-300 flex-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-xs font-bold text-white",children:[s.value,"%"]}),e.jsx("span",{className:"text-sm",children:s.icon})]})]},s.name))})]})]})]})}function Is(){const[s,o]=c.useState(!0),[n,i]=c.useState(!1),[t,r]=c.useState(""),[d]=c.useState("admin"),[m,j]=c.useState("Dashboard"),[u,v]=c.useState("Ano"),[y,g]=c.useState(()=>_a()),[E,D]=c.useState(""),[w,R]=c.useState(""),[p,S]=c.useState(""),l=window.location.hostname.includes("dev.angrax.com.br")||window.location.hostname.includes("localhost"),[C,k]=c.useState("2025-11"),[f,M]=c.useState("26888098000159"),[O,T]=c.useState([]),{metrics:I,loading:z}=ys(f,C);c.useEffect(()=>{fe();const a=localStorage.getItem("oracle_context_rules");if(a)r(a);else{const x=`# CONTEXTO DO OR√ÅCULO - ESPECIALISTA EM BPO E AN√ÅLISE DE FLUXO DE CAIXA

## EMPRESA/GRUPO
- Grupo Volpe BPO (CNPJ: 26.888.098/0001-59)
- Atua√ß√£o: Business Process Outsourcing (BPO), terceiriza√ß√£o de processos financeiros, administrativos e de RH
- Segmento: Servi√ßos empresariais B2B
- Principais clientes: Empresas de m√©dio e grande porte nos setores industrial, comercial e de servi√ßos

## EXPERTISE EM FLUXO DE CAIXA
Como especialista em BPO financeiro, o Or√°culo deve fornecer an√°lises profundas sobre:

### 1. GEST√ÉO DE RECEB√çVEIS E PAG√ÅVEIS
- An√°lise de prazos m√©dios de recebimento (PMR) e pagamento (PMP)
- Identifica√ß√£o de gargalos de cobran√ßa e inadimpl√™ncia
- Otimiza√ß√£o do ciclo de caixa operacional (CCC = PME + PMR - PMP)
- Estrat√©gias de antecipa√ß√£o de receb√≠veis e negocia√ß√£o com fornecedores
- An√°lise de aging de contas a receber e a pagar

### 2. PREVISIBILIDADE E PROJE√á√ïES
- Proje√ß√£o de fluxo de caixa para 30, 60 e 90 dias
- An√°lise de sazonalidade e padr√µes hist√≥ricos de receitas e despesas
- Identifica√ß√£o de tend√™ncias de entrada e sa√≠da de caixa
- Simula√ß√£o de cen√°rios (otimista, realista, pessimista)
- Alertas antecipados de necessidade de capital de giro

### 3. CAPITAL DE GIRO E LIQUIDEZ
- C√°lculo e monitoramento do capital de giro l√≠quido (CGL)
- An√°lise de √≠ndices de liquidez (corrente, seca, imediata)
- Identifica√ß√£o de necessidade de capital de giro (NCG)
- Estrat√©gias para otimiza√ß√£o de caixa m√≠nimo operacional
- An√°lise de convers√£o de caixa (cash conversion cycle)

### 4. CATEGORIZA√á√ÉO E AN√ÅLISE DE DESPESAS
- Classifica√ß√£o de despesas por natureza (fixas vs vari√°veis)
- An√°lise de despesas por centro de custo e departamento
- Identifica√ß√£o de despesas anormais ou outliers
- Benchmark de despesas operacionais vs receita bruta
- Oportunidades de redu√ß√£o de custos e renegocia√ß√£o

### 5. GEST√ÉO DE INADIMPL√äNCIA
- An√°lise de taxa de inadimpl√™ncia por cliente e per√≠odo
- Provis√£o para devedores duvidosos (PDD)
- Estrat√©gias de cobran√ßa e recupera√ß√£o de cr√©dito
- An√°lise de risco de cr√©dito de clientes
- Impacto da inadimpl√™ncia no fluxo de caixa projetado

### 6. INVESTIMENTOS E CAPEX
- An√°lise de investimentos em ativo fixo e tecnologia
- C√°lculo de retorno sobre investimento (ROI) e payback
- Impacto de investimentos no fluxo de caixa de curto e longo prazo
- Prioriza√ß√£o de projetos de investimento
- An√°lise de viabilidade financeira de expans√µes

### 7. INDICADORES CHAVE DE PERFORMANCE (KPIs)
- Gera√ß√£o de caixa operacional (Operating Cash Flow)
- Free Cash Flow (FCF = Fluxo Operacional - Capex)
- Burn rate (taxa de queima de caixa)
- Runway (tempo at√© esgotamento do caixa)
- Cash flow margin (margem de fluxo de caixa)
- EBITDA vs Cash Flow (an√°lise de qualidade de lucro)

### 8. COMPLIANCE E AUDITORIA
- Reconcilia√ß√£o banc√°ria e controles internos
- Rastreabilidade de lan√ßamentos e documenta√ß√£o
- Segrega√ß√£o de fun√ß√µes e al√ßadas de aprova√ß√£o
- Auditoria de processos de pagamento e recebimento
- Preven√ß√£o a fraudes e controles antifraude

## FONTES DE DADOS PRIORIT√ÅRIAS
1. DRE (Demonstra√ß√£o de Resultado do Exerc√≠cio) - an√°lise mensal e anual
2. DFC (Demonstra√ß√£o de Fluxo de Caixa) - m√©todo direto e indireto
3. Lan√ßamentos cont√°beis e extratos banc√°rios
4. Aging de contas a receber e a pagar
5. Ordens de pagamento e bordereaux de cobran√ßa
6. Concilia√ß√µes banc√°rias e movimenta√ß√µes financeiras

## TOM E ESTILO
- Linguagem executiva, clara e objetiva
- Foco em insights acion√°veis e recomenda√ß√µes pr√°ticas
- Uso de m√©tricas e KPIs financeiros
- Evid√™ncias baseadas em dados reais do ERP/Contabilidade
- Alertas proativos para riscos e oportunidades
- Compara√ß√µes temporais (MoM, YoY) e benchmarks setoriais

## ESCOPO DE AN√ÅLISE
- Per√≠odo: Dados de 2024 e 2025 (priorizar √∫ltimos 12 meses)
- Compara√ß√µes: M√™s vs m√™s anterior, ano vs ano anterior
- Foco: Grupo Volpe e suas unidades de neg√≥cio
- Granularidade: An√°lise consolidada e por centro de custo
- Alertas: Varia√ß√µes superiores a 15% ou valores at√≠picos

## RECOMENDA√á√ïES ESTRAT√âGICAS
Sempre que relevante, fornecer:
- Diagn√≥stico da situa√ß√£o atual do fluxo de caixa
- Identifica√ß√£o de problemas e oportunidades
- Recomenda√ß√µes de curto prazo (30 dias)
- Estrat√©gias de m√©dio prazo (90 dias)
- Plano de a√ß√£o com prioriza√ß√£o e respons√°veis sugeridos`;localStorage.setItem("oracle_context_rules",x),r(x)}},[]);const fe=async()=>{try{const a=await P.getCompanies();T(a)}catch(a){console.error("Erro ao carregar empresas:",a)}};return c.useState(()=>{const a=x=>j(x.detail);return window.addEventListener("navigate",a),()=>window.removeEventListener("navigate",a)}),e.jsxs("div",{className:`min-h-screen ${s?"dark bg-gradient-to-br from-charcoal-950 via-graphite-950 to-charcoal-900":"bg-gradient-to-br from-gray-50 via-white to-gray-100"} transition-colors duration-500`,children:[e.jsx(Ka,{role:d,onOpenSettings:()=>i(!0)}),e.jsxs("div",{className:"ml-64 flex flex-col min-h-screen",children:[e.jsx(Ya,{isDark:s,onThemeToggle:()=>o(!s),oracleContext:t,currentPeriod:u,onPeriodChange:a=>v(a),selectedMonth:C,onMonthChange:k,selectedCompany:f,onCompanyChange:M,companies:O}),e.jsxs("main",{className:"flex-1 p-8",children:[m==="Dashboard"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[e.jsx(re,{title:"Receita Total",value:z?"R$ 0":`R$ ${Math.round(I.receitaTotal).toLocaleString("pt-BR")}`,change:z?0:I.receitaChange,trend:I.receitaChange>=0?"up":"down",icon:"TrendingUp",color:"green",sparklineData:[42,48,45,52,58,65,70,68,75,80,85,90]}),e.jsx(re,{title:"Despesas",value:z?"R$ 0":`R$ ${Math.round(I.despesasTotal).toLocaleString("pt-BR")}`,change:z?0:I.despesasChange,trend:I.despesasChange>=0?"up":"down",icon:"TrendingDown",color:"red",sparklineData:[30,35,40,38,42,45,48,50,52,54,56,58]}),e.jsx(re,{title:"Limite Di√°rio",value:`R$ ${I.limiteDiario.toLocaleString("pt-BR")}`,change:z?0:I.limiteDiarioProgress,trend:"up",icon:"Wallet",color:"blue",sparklineData:[20,25,30,28,32,35,38,40,42,43,44,45],progress:z?0:I.limiteDiarioProgress}),e.jsx(re,{title:"Meta de Poupan√ßa",value:`R$ ${I.metaPoupanca.toLocaleString("pt-BR")}`,change:z?0:I.metaPoupancaProgress,trend:"up",icon:"Target",color:"gold",sparklineData:[10,20,35,45,60,70,80,90,95,100,105,110],progress:z?0:I.metaPoupancaProgress})]}),e.jsx("section",{className:"mb-6",children:e.jsx(ts,{period:u,session:y},`overview-${y?"auth":"anon"}`)}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(Ae,{period:u,cnpj:f,selectedMonth:C})}),e.jsx("div",{children:e.jsx(Qa,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(aa,{})}),e.jsx("div",{children:e.jsx(as,{cnpj:f,selectedMonth:C})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[e.jsx(ws,{payments:1248,receipts:892,paymentsChange:12,receiptsChange:8}),e.jsx(Es,{}),e.jsx(Rs,{})]})]}),m==="An√°lises"&&e.jsx(ke,{}),m==="Fluxo de Caixa"&&e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(Ae,{period:u})}),m==="Extrato de Lan√ßamentos"&&e.jsx(ns,{}),m==="Relat√≥rios"&&e.jsx(rs,{}),m==="Clientes"&&e.jsx(os,{}),m==="An√°lises"&&e.jsx(ke,{}),m==="Not√≠cias"&&e.jsx(fs,{cnpj:f,nomeEmpresa:O.find(a=>a.cnpj===f)?.cliente_nome||"Empresa",grupoEmpresarial:O.find(a=>a.cnpj===f)?.grupo_empresarial||"Grupo Empresarial"})]}),e.jsx(bs,{open:n,onClose:()=>i(!1),onUpdateOracleContext:r}),!y&&(l?e.jsx(Ns,{open:!y,onClose:()=>{},onLogged:a=>g(a)}):e.jsx("div",{className:"fixed inset-0 z-[90] bg-black/60 backdrop-blur flex items-center justify-center",children:e.jsxs("div",{className:"w-[360px] rounded-xl border border-graphite-800 bg-graphite-900 p-4 space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Entrar"}),p&&e.jsx("div",{className:"text-xs text-red-400",children:p}),e.jsx("input",{value:E,onChange:a=>D(a.target.value),placeholder:"E-mail",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("input",{type:"password",value:w,onChange:a=>R(a.target.value),placeholder:"Senha",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("button",{onClick:async()=>{S("");try{const a=await Va(E,w);if(!a){S(ie||"Credenciais inv√°lidas");return}g(a)}catch(a){S(a.message||"Erro ao fazer login")}},className:"px-3 py-1 rounded-sm bg-emerald-400 text-white text-xs",children:"Entrar"})]})}))]})]})}ta.createRoot(document.getElementById("root")).render(e.jsx(oe.StrictMode,{children:e.jsx(Is,{})}));
