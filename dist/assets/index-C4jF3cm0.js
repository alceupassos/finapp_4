import{a as c,j as e,c as de,h as ds}from"./vendor-react-CeOnbf_t.js";import{m as b,A as ms}from"./vendor-motion-BLeTpIn5.js";import{L as xs,C as us,N as ps,T as H,W as Ge,F as hs,U as Se,a as gs,B as qe,S as ne,b as fs,c as bs,X as Ee,d as De,e as js,M as vs,f as Ae,g as Ue,h as pe,A as Je,i as Ns,E as Ke,j as He,k as ys,l as ws,m as Cs,n as Ss,o as Ye,P as Es,p as We,V as Ds,I as Xe,q as Rs,R as ks,r as As,s as Ze,t as Qe,u as es,v as Is,w as Ms,x as re,y as ss,z as Ps,D as Ts,G as Os,H as _s,J as zs,K as $s,O as Ls,Q as as,Y as Fs,Z as Bs,_ as Ie,$ as Vs,a0 as Gs,a1 as qs,a2 as Us}from"./vendor-ui-IiUVKyBP.js";import{i as F,j as ie,k as X,l as Z,m as Q,n as Y,o as V,p as le,q as he,r as K,s as Js,t as ts,u as rs,v as ge}from"./vendor-recharts-DSPaHu0E.js";import{c as Ks,a as Me,s as Pe,u as Hs,b as Ys,m as Te}from"./vendor-tremor-DPm4MWUs.js";import{a6 as Ws,c0 as Xs}from"./vendor-q1xpAk5I.js";import{t as Zs}from"./vendor-tailwind-merge-DxgBj8Ug.js";import"./vendor-date-fns-B_6AWE7E.js";import"./vendor-tanstack-25T-2euD.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}})();const os="https://xzrmzmcoslomtzkzgskn.supabase.co",fe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI";function ns(){const s=localStorage.getItem("supabase_session");if(!s)return null;try{return JSON.parse(s).access_token||null}catch{return null}}async function oe(s,r={}){const o=new URL(`${os}/rest/v1/${s}`);Object.entries(r.query||{}).forEach(([i,m])=>o.searchParams.set(i,m));const l=ns()||fe,a=await fetch(o.toString(),{headers:{apikey:fe,Authorization:`Bearer ${l}`,Accept:"application/json"}});if(!a.ok)throw new Error(`Supabase GET ${s} failed: ${a.status}`);return a.json()}async function Oe(s,r){const o=`${os}/rest/v1/${s}`,l=ns()||fe,a=await fetch(o,{method:"POST",headers:{apikey:fe,Authorization:`Bearer ${l}`,"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify(r)});if(!a.ok)throw new Error(`Supabase POST ${s} failed: ${a.status}`);return a.json()}const _={restGet:oe,restPost:Oe,getCompanies:async()=>{const s=await oe("dre_entries",{query:{select:"company_cnpj,company_nome",limit:"1000"}}),r=await oe("cashflow_entries",{query:{select:"company_cnpj,company_nome",limit:"1000"}}),o=new Map;return[...s,...r].forEach(l=>{const a=l.company_cnpj;o.has(a)||o.set(a,{cnpj:a,cliente_nome:l.company_nome,grupo_empresarial:l.company_nome.includes("VOLPE")?"Grupo Volpe":"Outros"})}),Array.from(o.values()).sort((l,a)=>l.cnpj.localeCompare(a.cnpj))},getDRE:async s=>{const r=(s||"").replace(/^0+/,""),o=await oe("dre_entries",{query:{company_cnpj:`eq.${r}`,select:"*",limit:"5000"}});return Array.isArray(o)?(console.log("üîç getDRE recebeu",o.length,"registros para CNPJ",r),o.map(l=>({data:l.date||l.data,conta:l.account??l.conta??"Conta",natureza:l.nature??l.natureza??null,valor:Number(l.amount??l.valor??0)}))):[]},getDFC:async s=>{const r=(s||"").replace(/^0+/,""),o=await oe("cashflow_entries",{query:{company_cnpj:`eq.${r}`,select:"*",limit:"5000"}});if(!Array.isArray(o))return[];if(console.log("üîç getDFC recebeu",o.length,"registros para CNPJ",r),o.length&&(o[0].entrada!==void 0||o[0].saida!==void 0))return o;const l=[...o].sort((i,m)=>new Date(i.date||i.data).getTime()-new Date(m.date||m.data).getTime());let a=0;return l.map(i=>{const m=String(i.kind||"").toLowerCase()==="in"?Number(i.amount||0):0,d=String(i.kind||"").toLowerCase()==="out"?Number(i.amount||0):0;return a+=m-d,{data:i.date||i.data,descricao:i.category||i.descricao||"Lan√ßamento",entrada:m,saida:d,saldo:a,id:i.id??void 0}})},log:s=>Oe("app_logs",{...s,ts:new Date().toISOString()})};let me="";async function is(s,r){const a=await fetch("https://xzrmzmcoslomtzkzgskn.supabase.co/auth/v1/token?grant_type=password",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cm16bWNvc2xvbXR6a3pnc2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTI2MjMsImV4cCI6MjA3NzMyODYyM30.smtxh5O5vKzdLBK3GWVudfFQsNpwkzXgc1Qev2gIicI",Accept:"application/json"},body:JSON.stringify({email:s,password:r})});if(!a.ok){try{const i=await a.json();me=String(i.error_description||i.error||`HTTP ${a.status}`)}catch{me=`HTTP ${a.status}`}return null}return me="",a.json()}async function Qs(s,r){try{const o=await is(s,r);if(!o||!o.access_token)return null;localStorage.setItem("supabase_session",JSON.stringify(o));const l={id:o.user?.id||"unknown",email:s},a={id:l.id,email:l.email||s,name:(l.email||s).split("@")[0],role:"cliente",defaultCompany:null,mode:"supabase",accessToken:o.access_token};return localStorage.setItem("session_user",JSON.stringify(a)),a}catch{return null}}function ea(){const s=localStorage.getItem("session_user");return s?JSON.parse(s):null}function sa(){localStorage.removeItem("session_user"),localStorage.removeItem("supabase_session")}const aa=[{icon:xs,label:"Dashboard",active:!0},{icon:us,label:"An√°lises",active:!1},{icon:ps,label:"Not√≠cias",active:!1},{icon:H,label:"Fluxo de Caixa",active:!1},{icon:Ge,label:"Extrato de Lan√ßamentos",active:!1},{icon:hs,label:"Relat√≥rios",active:!1},{icon:Se,label:"Clientes",active:!1}];function ta(s){return[{icon:qe,label:"Notifica√ß√µes"},{icon:ne,label:"Configura√ß√µes"},{icon:fs,label:"Sair"}].filter(o=>!o.adminOnly||s==="admin")}function ra({onOpenSettings:s,role:r="cliente"}){const[o,l]=c.useState(null);return e.jsxs(b.aside,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"fixed left-0 top-0 h-screen w-64 bg-gradient-to-b from-charcoal-950 via-graphite-950 to-charcoal-900 border-r border-graphite-900 flex flex-col z-50 pattern-soft",children:[e.jsx("div",{className:"p-6 border-b border-graphite-900 flex justify-center",children:e.jsx(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:e.jsx("img",{src:"/finapp-logo.png",alt:"FinApp Logo",className:"h-16 w-auto object-contain"})})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:aa.map((a,i)=>e.jsxs(b.button,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*i},onHoverStart:()=>l(i),onHoverEnd:()=>l(null),onClick:()=>{if(a.label==="Relat√≥rios"){const m=new CustomEvent("navigate",{detail:"Relat√≥rios"});window.dispatchEvent(m)}if(a.label==="Clientes"){const m=new CustomEvent("navigate",{detail:"Clientes"});window.dispatchEvent(m)}if(a.label==="Dashboard"||a.label==="An√°lises"||a.label==="Not√≠cias"||a.label==="Fluxo de Caixa"||a.label==="Extrato de Lan√ßamentos"){const m=new CustomEvent("navigate",{detail:a.label});window.dispatchEvent(m)}},className:`
              w-full flex items-center gap-3 px-4 py-2.5 rounded-xl
              transition-all duration-200 group relative
              ${a.active?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-900"}
            `,children:[a.active&&e.jsx(b.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gold-500 rounded-xl",transition:{type:"spring",duration:.6}}),e.jsx(b.span,{whileHover:{scale:1.08,rotate:1},className:"relative z-10",children:e.jsx(a.icon,{className:`w-4 h-4 ${a.active?"text-white":""}`})}),e.jsx("span",{className:"text-sm font-medium relative z-10",children:a.label}),o===i&&!a.active&&e.jsx(b.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},className:"ml-auto",children:e.jsx(gs,{className:"w-4 h-4"})})]},a.label))}),e.jsx("div",{className:"p-4 border-t border-graphite-900 space-y-1",children:ta(r).map((a,i)=>e.jsxs(b.button,{whileHover:{x:5},whileTap:{scale:.98},onClick:()=>{a.label==="Configura√ß√µes"&&s&&s(),a.label==="Sair"&&(sa(),window.dispatchEvent(new CustomEvent("logout")),location.reload())},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-graphite-400 hover:text-white hover:bg-graphite-900 transition-all duration-200",children:[e.jsx(a.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:a.label})]},a.label))}),e.jsx(b.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"p-4 border-t border-graphite-900",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 transition-all cursor-pointer",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gold-400 to-gold-600 flex items-center justify-center text-white font-bold",children:"AC"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:"Admin BPO"}),e.jsx("p",{className:"text-xs text-graphite-400 truncate",children:"admin@bpo.com"})]})]})})]})}const oa={info:(s,r={})=>_.log({level:"info",service:"UI",message:s,...r}),warn:(s,r={})=>_.log({level:"warn",service:"UI",message:s,...r}),error:(s,r={})=>_.log({level:"error",service:"UI",message:s,...r})};function na({open:s,onClose:r,contextRules:o=""}){const[l,a]=c.useState(""),[i,m]=c.useState([]),d=c.useRef(null);if(c.useEffect(()=>{s&&d.current&&(d.current.scrollTop=d.current.scrollHeight)},[s,i]),!s)return null;const u=async()=>{const x=l.trim();if(!x)return;const v=Date.now();m(p=>[...p,{role:"user",content:x,ts:v}]),a("");const w=`Consulta: ${x}

Regra: ${o?o.slice(0,160)+"‚Ä¶":"padr√£o executiva"}

Resposta: Em breve, integrado ao Supabase / ERPs.`;m(p=>[...p,{role:"assistant",content:w,ts:Date.now()}]);try{await oa.info("oracle_query",{endpoint:"oracle",latencyMs:0})}catch{}};return e.jsx(b.div,{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm",children:e.jsxs(b.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"absolute right-8 top-20 w-[520px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Or√°culo de IA ‚Ä¢ Respostas concisas"})]}),e.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground",children:e.jsx(Ee,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:d,className:"max-h-[48vh] overflow-y-auto p-4 space-y-3",children:[i.map((x,v)=>e.jsx("div",{className:x.role==="user"?"text-foreground":"text-muted-foreground",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:x.content})},v)),i.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fa√ßa uma pergunta r√°pida sobre lan√ßamentos, DRE/DFC, fluxo ou insights."})]}),e.jsxs("div",{className:"p-4 border-t border-border flex items-center gap-2",children:[e.jsx("input",{value:l,onChange:x=>a(x.target.value),placeholder:"Digite sua pergunta‚Ä¶",className:"flex-1 bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"}),e.jsx("button",{onClick:u,className:"px-3 py-2 rounded-xl bg-gold-500 text-white text-sm hover:bg-gold-600 focus-visible-ring",children:"Enviar"})]})]})})}function ia({onThemeToggle:s,isDark:r=!0,oracleContext:o="",currentPeriod:l="Ano",onPeriodChange:a,selectedMonth:i="2025-11",onMonthChange:m,selectedCompany:d="26888098000159",onCompanyChange:u,companies:x=[]}){const[v,w]=c.useState(3),[p,C]=c.useState(!1),k=[{value:"2025-01",label:"Janeiro 2025"},{value:"2025-02",label:"Fevereiro 2025"},{value:"2025-03",label:"Mar√ßo 2025"},{value:"2025-04",label:"Abril 2025"},{value:"2025-05",label:"Maio 2025"},{value:"2025-06",label:"Junho 2025"},{value:"2025-07",label:"Julho 2025"},{value:"2025-08",label:"Agosto 2025"},{value:"2025-09",label:"Setembro 2025"},{value:"2025-10",label:"Outubro 2025"},{value:"2025-11",label:"Novembro 2025"},{value:"2025-12",label:"Dezembro 2025"}];return e.jsxs(e.Fragment,{children:[e.jsxs(b.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"sticky top-0 z-40 bg-charcoal-950/80 backdrop-blur-xl border-b border-graphite-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("div",{className:"flex-1 max-w-xl",children:e.jsxs("div",{className:"relative group",children:[e.jsx(De,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-graphite-400 group-focus-within:text-gold-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar transa√ß√µes, clientes, relat√≥rios...",className:`
                w-full pl-12 pr-4 py-3 
                bg-graphite-900 
                border border-graphite-800 
                rounded-2xl 
                text-white placeholder-graphite-500
                focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20
                transition-all duration-200
              `})]})}),e.jsxs("div",{className:"flex items-center gap-3 ml-6",children:[x.length>0&&e.jsxs("select",{value:d,onChange:S=>u?.(S.target.value),className:"px-4 py-2 rounded-xl bg-graphite-900 border border-graphite-800 text-white text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 transition-all",children:[e.jsx("option",{value:"",children:"Todas as Empresas"}),x.map(S=>e.jsx("option",{value:S.cnpj,children:S.cliente_nome},S.cnpj))]}),e.jsx("select",{value:i,onChange:S=>m?.(S.target.value),className:"px-4 py-2 rounded-xl bg-graphite-900 border border-graphite-800 text-white text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 transition-all",children:k.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))}),e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>C(!0),className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group","aria-label":"Abrir Or√°culo de IA",children:e.jsx(js,{className:"w-5 h-5"})}),e.jsxs(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all group",children:[e.jsx(qe,{className:"w-5 h-5"}),v>0&&e.jsx(b.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-gold-500 rounded-full text-xs font-bold text-white flex items-center justify-center shadow-glow-sm",children:v})]}),e.jsxs(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"p-3 rounded-xl bg-graphite-900 hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all relative overflow-hidden group",children:[e.jsx(b.div,{initial:!1,animate:{rotate:r?0:180,scale:r?1:0},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsx(b.div,{initial:!1,animate:{rotate:r?180:0,scale:r?0:1},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Ae,{className:"w-5 h-5"})}),e.jsx("div",{className:"opacity-0",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"h-8 w-px bg-graphite-800"}),e.jsxs("div",{className:"hidden lg:flex items-center gap-6 pl-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"Saldo Total"}),e.jsx("p",{className:"text-sm font-bold text-white",children:"R$ 2.847.920,00"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-graphite-400",children:"Varia√ß√£o"}),e.jsx("p",{className:"text-sm font-bold text-emerald-400",children:"+12.5%"})]})]})]})]}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b.h1,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},className:"text-2xl font-bold text-white font-display",children:"Dashboard Financeiro"}),e.jsx(b.p,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"text-sm text-graphite-400 mt-1",children:"Vis√£o geral ‚Ä¢ Atualizado agora h√° pouco"})]}),e.jsx(b.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"flex items-center gap-2 bg-graphite-900 rounded-xl p-1",children:["Dia","Semana","M√™s","Ano"].map(S=>e.jsx("button",{onClick:()=>a&&a(S),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l===S?"bg-gold-500 text-white shadow-glow-sm":"text-graphite-400 hover:text-white hover:bg-graphite-800"}`,children:S},S))})]})})]}),e.jsx(na,{open:p,onClose:()=>C(!1),contextRules:o})]})}const la={green:{bg:"from-emerald-500/20 to-emerald-600/10",icon:"bg-emerald-500/20 text-emerald-400",text:"text-emerald-400",border:"border-emerald-500/20"},red:{bg:"from-red-500/20 to-red-600/10",icon:"bg-red-500/20 text-red-400",text:"text-red-400",border:"border-red-500/20"},gold:{bg:"from-gold-500/20 to-gold-600/10",icon:"bg-gold-500/20 text-gold-400",text:"text-gold-400",border:"border-gold-500/20"},blue:{bg:"from-blue-500/20 to-blue-600/10",icon:"bg-blue-500/20 text-blue-400",text:"text-blue-400",border:"border-blue-500/20"}},ca={TrendingUp:H,TrendingDown:pe,Wallet:Ge,Target:Ue};function ce({title:s,value:r,change:o,icon:l,trend:a="up",color:i="gold",delay:m=0,progress:d,sparklineData:u}){const x=la[i],v=a==="up",w=ca[l]||H;return e.jsxs(b.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:m,duration:.5,ease:"easeOut"},whileHover:{y:-4,scale:1.02},className:"group relative",children:[e.jsx(b.div,{className:`absolute inset-0 bg-gradient-to-br ${x.bg} rounded-3xl blur-xl opacity-0 group-hover:opacity-60 transition-opacity duration-500`}),e.jsxs("div",{className:"relative neomorphic neomorphic-hover rounded-3xl p-6 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-graphite-400 font-medium mb-2",children:s}),e.jsx(b.h3,{initial:{scale:.9},animate:{scale:1},transition:{delay:m+.2},className:"text-3xl font-bold text-white font-display",children:r})]}),e.jsx(b.div,{whileHover:{rotate:15,scale:1.1},className:`p-3 rounded-2xl bg-gradient-to-br ${x.bg} border ${x.border}`,children:e.jsx(w,{className:"w-6 h-6 text-current",style:{color:x.icon.split(" ")[1].replace("text-","")}})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs(b.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:m+.3},className:`flex items-center gap-1 px-3 py-1.5 rounded-lg ${v?"bg-emerald-500/10":"bg-red-500/10"}`,children:[v?e.jsx(Je,{className:"w-4 h-4 text-emerald-400"}):e.jsx(Ns,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:`text-sm font-semibold ${v?"text-emerald-400":"text-red-400"}`,children:[o,"%"]})]}),e.jsx("span",{className:"text-sm text-graphite-400",children:"vs m√™s anterior"})]}),u&&e.jsx("div",{className:"flex items-end gap-1 h-12 mt-4",children:u.map((p,C)=>{const k=Math.max(...u),S=p/k*100;return e.jsx(b.div,{initial:{height:0},animate:{height:`${S}%`},transition:{delay:m+.5+C*.02,duration:.3},className:`flex-1 bg-gradient-to-t ${x.bg} rounded-sm opacity-70 hover:opacity-100 transition-opacity`},C)})}),d!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-graphite-400 mb-2",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{className:x.text,children:[d,"%"]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(b.div,{initial:{width:0},animate:{width:`${d}%`},transition:{delay:m+.7,duration:.8,ease:"easeOut"},className:`h-full bg-gradient-to-r ${x.bg} relative overflow-hidden`,children:e.jsx(b.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{repeat:1/0,duration:1.5,ease:"linear"}})})})]})]})]})}const da=({active:s,payload:r,label:o})=>s&&r&&r.length?e.jsxs(b.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-charcoal-900/95 backdrop-blur-xl border border-graphite-800 rounded-2xl p-4 shadow-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-white mb-3",children:o}),r.map((l,a)=>e.jsxs("div",{className:"flex items-center justify-between gap-6 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color}}),e.jsx("span",{className:"text-xs text-graphite-400",children:l.name})]}),e.jsx("span",{className:"text-sm font-bold text-white",children:l.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]},a))]}):null;function _e({period:s="Ano",cnpj:r="26888098000159",selectedMonth:o}){const[l,a]=c.useState([{month:"Jan",receita:0,despesa:0,saldo:0},{month:"Fev",receita:0,despesa:0,saldo:0},{month:"Mar",receita:0,despesa:0,saldo:0},{month:"Abr",receita:0,despesa:0,saldo:0},{month:"Mai",receita:0,despesa:0,saldo:0},{month:"Jun",receita:0,despesa:0,saldo:0},{month:"Jul",receita:0,despesa:0,saldo:0},{month:"Ago",receita:0,despesa:0,saldo:0},{month:"Set",receita:0,despesa:0,saldo:0},{month:"Out",receita:0,despesa:0,saldo:0},{month:"Nov",receita:0,despesa:0,saldo:0},{month:"Dez",receita:0,despesa:0,saldo:0}]);c.useEffect(()=>{i()},[s,r,o]);const i=async()=>{try{const m=await _.getDRE(r);if(!m||m.length===0)return;const d=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],u={},[x]=o?o.split("-").map(Number):[new Date().getFullYear()],v=x;d.forEach(p=>{u[p]={month:p,receita:0,despesa:0,saldo:0}}),m.forEach(p=>{const C=new Date(p.data);if(C.getFullYear()!==v)return;const k=C.getMonth(),S=d[k];p.natureza==="receita"?u[S].receita+=p.valor:p.natureza==="despesa"&&(u[S].despesa+=Math.abs(p.valor))}),Object.values(u).forEach(p=>{p.saldo=p.receita-p.despesa});const w=d.map(p=>u[p]);a(w)}catch(m){console.error("Erro ao carregar dados de fluxo de caixa:",m)}};return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Receitas vs Despesas (2024)"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Receita"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Despesa"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-graphite-300 font-medium",children:"Saldo"})]})]})]}),e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"h-80",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(ie,{data:s==="Ano"?l:s==="M√™s"?l.slice(-4):s==="Semana"?l.slice(-2):l.slice(-1),margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorDespesa",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorSaldo",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ff7a00",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#ff7a00",stopOpacity:0})]})]}),e.jsx(X,{strokeDasharray:"3 3",stroke:"#2a2a2a",opacity:.3}),e.jsx(Z,{dataKey:"month",stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1}),e.jsx(Q,{stroke:"#6d6d6d",tick:{fill:"#888888",fontSize:12},tickLine:!1,tickFormatter:m=>m>=1e6?`R$ ${(m/1e6).toFixed(1)}M`:m>=1e3?`R$ ${(m/1e3).toFixed(0)}k`:`R$ ${m}`}),e.jsx(Y,{content:e.jsx(da,{}),cursor:{stroke:"#ff7a00",strokeWidth:1}}),e.jsx(V,{type:"monotone",dataKey:"receita",name:"Receita",stroke:"#10b981",strokeWidth:2,fill:"url(#colorReceita)",animationDuration:1500}),e.jsx(V,{type:"monotone",dataKey:"despesa",name:"Despesa",stroke:"#ef4444",strokeWidth:2,fill:"url(#colorDespesa)",animationDuration:1500}),e.jsx(V,{type:"monotone",dataKey:"saldo",name:"Saldo",stroke:"#ff7a00",strokeWidth:3,fill:"url(#colorSaldo)",animationDuration:1500})]})})}),e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8},className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-graphite-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Receita"}),e.jsx("p",{className:"text-lg font-bold text-emerald-400",children:"R$ 8.490.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Total Despesa"}),e.jsx("p",{className:"text-lg font-bold text-red-400",children:"R$ 4.780.000"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-1",children:"Saldo L√≠quido"}),e.jsx("p",{className:"text-lg font-bold text-gold-400",children:"R$ 3.710.000"})]})]})]})}function ma(){const[s,r]=c.useState(!1),[o,l]=c.useState(!0);return e.jsxs(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"neomorphic rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display mb-1",children:"Cart√£o Corporativo"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Limite e saldo dispon√≠vel"})]}),e.jsxs(b.div,{animate:{rotateY:s?180:0},transition:{duration:.6,type:"spring"},className:"relative preserve-3d cursor-pointer",onClick:()=>r(!s),style:{transformStyle:"preserve-3d"},children:[e.jsx(b.div,{className:"backface-hidden relative",style:{backfaceVisibility:"hidden"},children:e.jsxs("div",{className:"bg-gradient-to-br from-gold-500 via-gold-600 to-gold-700 rounded-2xl p-8 shadow-2xl shadow-gold-500/20 relative overflow-hidden group",children:[e.jsx(b.div,{className:"absolute inset-0 opacity-20",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,ease:"linear"},style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),e.jsx(b.div,{className:"absolute -inset-1 bg-gradient-to-r from-gold-400 to-gold-600 rounded-3xl blur-xl opacity-0 group-hover:opacity-50 transition-opacity duration-500",style:{zIndex:-1}}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 font-medium mb-1",children:"Conta Empresarial"}),e.jsx(b.p,{className:"text-2xl font-bold text-white font-display",animate:{opacity:o?1:0},children:o?"R$ 2.847.920,00":"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})]}),e.jsx(b.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:a=>{a.stopPropagation(),l(!o)},className:"p-2 rounded-xl bg-white/10 backdrop-blur-sm hover:bg-white/20 transition-colors",children:o?e.jsx(Ke,{className:"w-5 h-5 text-white"}):e.jsx(He,{className:"w-5 h-5 text-white"})})]}),e.jsxs(b.div,{whileHover:{scale:1.05,rotate:5},className:"w-12 h-10 rounded-lg bg-gradient-to-br from-yellow-200 to-yellow-400 mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-1 border border-yellow-600/30 rounded-md"}),e.jsx("div",{className:"absolute inset-2 border border-yellow-600/20 rounded-sm"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-white text-lg font-mono tracking-wider",children:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 8492"}),e.jsx(b.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:a=>a.stopPropagation(),className:"p-1.5 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(ys,{className:"w-4 h-4 text-white"})})]})}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Titular"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"BPO FINANCIAL LTDA"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Validade"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"12/28"})]}),e.jsxs(b.div,{whileHover:{scale:1.1},className:"flex flex-col items-end",children:[e.jsx(ws,{className:"w-8 h-8 text-white/90"}),e.jsx("span",{className:"text-[10px] text-white/70 font-bold mt-1",children:"CORPORATE"})]})]})]})}),e.jsx(b.div,{className:"absolute inset-0 backface-hidden",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:e.jsxs("div",{className:"bg-gradient-to-br from-charcoal-900 to-charcoal-950 rounded-3xl p-6 shadow-2xl h-full",children:[e.jsx("div",{className:"w-full h-12 bg-gradient-to-r from-graphite-900 to-graphite-800 mt-4 mb-6 rounded-lg"}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"CVV"}),e.jsx("p",{className:"text-lg font-mono font-bold text-white",children:"‚Ä¢‚Ä¢‚Ä¢"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"C√≥digo de Seguran√ßa"}),e.jsx("p",{className:"text-xs text-white/50",children:"N√£o compartilhe"})]})]})}),e.jsxs("div",{className:"space-y-3 text-xs text-white/60",children:[e.jsx("p",{children:"Este cart√£o √© de uso exclusivo corporativo"}),e.jsx("p",{children:"Em caso de perda, bloqueie imediatamente"}),e.jsx("p",{className:"text-gold-400 font-semibold",children:"Suporte: 0800 XXX XXXX"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-white/50",children:"Mastercard¬Æ Corporate"}),e.jsx("span",{className:"text-xs text-white/50",children:"ID: #BPO-2024-8492"})]})]})})]}),e.jsx(b.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-center text-xs text-graphite-400 mt-3",children:"Clique no cart√£o para visualizar o verso"})]})}const xa={success:{label:"Conclu√≠do",color:"emerald",bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20"},pending:{label:"Pendente",color:"gold",bg:"bg-gold-500/10",text:"text-gold-400",border:"border-gold-500/20"},failed:{label:"Falhou",color:"red",bg:"bg-red-500/10",text:"text-red-400",border:"border-red-500/20"}};function ls(){const[s,r]=c.useState([]),[o,l]=c.useState(""),[a,i]=c.useState([]),[m,d]=c.useState(!0),[u,x]=c.useState(""),[v,w]=c.useState("all"),[p,C]=c.useState(""),[k,S]=c.useState(""),[P,N]=c.useState(""),[E,n]=c.useState("");c.useEffect(()=>{(async()=>{try{const g=await _.getCompanies();r(g||[]);const M=(g||[]).find(A=>String(A.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,f=(g||[]).find(A=>String(A.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,D=M||f||g&&g[0]?.cnpj||"";l(D)}catch{x("Falha ao carregar empresas")}})()},[]),c.useEffect(()=>{o&&(d(!0),x(""),(async()=>{try{const g=await _.getDFC(o);i(Array.isArray(g)?g:[])}catch{x("Falha ao carregar extrato")}finally{d(!1)}})())},[o]);const R=c.useMemo(()=>{let g=[...a];return g.sort((M,f)=>{const D=new Date(M.data||"1900-01-01").getTime();return new Date(f.data||"1900-01-01").getTime()-D}),E&&(g=g.filter(M=>(M.descricao||"").toLowerCase().includes(E.toLowerCase()))),v==="month"&&p?g=g.filter(M=>M.data?.startsWith(p)):v==="range"&&k&&P&&(g=g.filter(M=>{const f=M.data||"";return f>=k&&f<=P})),g},[a,E,v,p,k,P]),O=c.useMemo(()=>{const g=new Set;return a.forEach(M=>{M.data&&g.add(M.data.slice(0,7))}),Array.from(g).sort().reverse()},[a]);return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-graphite-800/30",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white font-display",children:"Transa√ß√µes Recentes"}),e.jsx("p",{className:"text-sm text-graphite-400 mt-1",children:"√öltimas movimenta√ß√µes financeiras"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-graphite-400"}),e.jsx("input",{type:"text",placeholder:"Buscar...",value:E,onChange:g=>n(g.target.value),className:"pl-9 pr-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white placeholder-graphite-500 focus:outline-none focus:border-gold-500 transition-all w-48"})]}),e.jsxs("select",{value:v,onChange:g=>w(g.target.value),className:"px-4 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all",children:[e.jsx("option",{value:"all",children:"Todos os per√≠odos"}),e.jsx("option",{value:"month",children:"Por m√™s"}),e.jsx("option",{value:"range",children:"Faixa de datas"})]}),v==="month"&&e.jsxs("select",{value:p,onChange:g=>C(g.target.value),className:"px-4 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all",children:[e.jsx("option",{value:"",children:"Selecione o m√™s"}),O.map(g=>e.jsx("option",{value:g,children:new Date(g+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})},g))]}),v==="range"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:k,onChange:g=>S(g.target.value),className:"px-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all"}),e.jsx("span",{className:"text-graphite-400 text-sm",children:"at√©"}),e.jsx("input",{type:"date",value:P,onChange:g=>N(g.target.value),className:"px-3 py-2 neomorphic-inset border border-graphite-800/20 rounded-xl text-sm text-white focus:outline-none focus:border-gold-500 transition-all"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-graphite-800",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Descri√ß√£o"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-graphite-400 uppercase tracking-wider",children:"A√ß√µes"})]})}),e.jsxs("tbody",{children:[(m?[]:R).map((g,M)=>{const f=(g.entrada||0)-(g.saida||0),D=f>=0?"income":"expense",A=xa[D==="income"?"success":"pending"];return e.jsxs(b.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+M*.05},whileHover:{backgroundColor:"rgba(255, 122, 0, 0.03)"},className:"border-b border-graphite-800/50 last:border-0 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b.div,{whileHover:{scale:1.1,rotate:5},className:"w-10 h-10 rounded-xl bg-gradient-to-br from-graphite-800 to-graphite-900 flex items-center justify-center text-xl group-hover:shadow-lg transition-shadow",children:"üí∏"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:g.descricao||"Lan√ßamento"}),e.jsx("p",{className:"text-xs text-graphite-400",children:D==="income"?"Entrada":"Sa√≠da"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-graphite-300",children:g.data||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded-lg ${D==="income"?"bg-emerald-500/10":"bg-red-500/10"}`,children:D==="income"?e.jsx(Je,{className:"w-4 h-4 text-emerald-400"}):e.jsx(Cs,{className:"w-4 h-4 text-red-400"})}),e.jsxs("span",{className:`text-sm font-bold ${D==="income"?"text-emerald-400":"text-red-400"}`,children:[f>0?"+":"",Number(f).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(b.span,{whileHover:{scale:1.05},className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold border ${A.bg} ${A.text} ${A.border}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${A.text.replace("text-","bg-")} mr-2`}),Number(g.saldo||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(b.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 rounded-lg hover:bg-graphite-800 text-graphite-400 hover:text-white transition-all",children:e.jsx(Ss,{className:"w-4 h-4"})})})]},g.id||M)}),!m&&a.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-graphite-400",children:["Nenhum lan√ßamento encontrado para ",o||"empresa"]})})]})]})}),e.jsxs("div",{className:"p-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-graphite-400",children:[m?"Carregando...":`Mostrando ${a.length} lan√ßamentos`," ",o&&e.jsxs("span",{className:"text-white font-semibold",children:["‚Ä¢ ",o]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:o,onChange:g=>l(g.target.value),className:"px-4 py-2 bg-graphite-800 text-white rounded-xl text-sm",children:[e.jsx("option",{value:"",children:"Selecione CNPJ"}),s.map(g=>e.jsxs("option",{value:g.cnpj,children:[g.cliente_nome," ‚Ä¢ ",g.cnpj]},g.cnpj))]})})]})]})}function ua({cnpj:s="26888098000159",selectedMonth:r}){const[o,l]=c.useState([{name:"Servi√ßos BPO",value:58e4,color:"#ff7a00",percentage:45},{name:"Consultoria",value:32e4,color:"#10b981",percentage:25},{name:"Software",value:25e4,color:"#3b82f6",percentage:20},{name:"Outros",value:13e4,color:"#8b5cf6",percentage:10}]),[a,i]=c.useState(73),[m,d]=c.useState(8.2);c.useEffect(()=>{u()},[s,r]);const u=async()=>{try{const v=await _.getDRE(s);if(!v||v.length===0)return;const w={},[p]=r?r.split("-").map(Number):[new Date().getFullYear()],C=p;v.forEach(N=>{if(new Date(N.data).getFullYear()===C&&N.natureza==="receita"&&N.valor>0){const n=N.conta.split("-")[0].substring(0,1),R=n==="3"?"Servi√ßos BPO":n==="4"?"Consultoria":n==="5"?"Software":"Outros";w[R]||(w[R]=0),w[R]+=N.valor}});const k=Object.values(w).reduce((N,E)=>N+E,0),S=["#ff7a00","#10b981","#3b82f6","#8b5cf6"],P=Object.entries(w).map(([N,E],n)=>({name:N,value:E,color:S[n]||"#8b5cf6",percentage:Math.round(E/k*100)})).sort((N,E)=>E.value-N.value);if(P.length>0){l(P);const E=Math.round(k/8e5*100);i(Math.min(E,100))}}catch(v){console.error("Erro ao carregar dados de receita:",v)}},x=o.reduce((v,w)=>v+w.value,0);return e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.3},className:"neomorphic neomorphic-hover rounded-3xl p-8 border border-graphite-800/30",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Distribui√ß√£o de Receita"}),e.jsx("p",{className:"text-sm text-graphite-400",children:"Por categoria de servi√ßo"})]}),e.jsxs("div",{className:"relative flex items-center justify-center mb-8",children:[e.jsxs("svg",{width:"280",height:"180",viewBox:"0 0 280 180",className:"transform -rotate-0",children:[e.jsx("path",{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"#2a2a2a",strokeWidth:"24",strokeLinecap:"round"}),e.jsx(b.path,{d:"M 40 140 A 100 100 0 0 1 240 140",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"24",strokeLinecap:"round",strokeDasharray:"314",initial:{strokeDashoffset:314},animate:{strokeDashoffset:314-314*a/100},transition:{duration:2,ease:"easeOut"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981"}),e.jsx("stop",{offset:"50%",stopColor:"#ff7a00"}),e.jsx("stop",{offset:"100%",stopColor:"#ef4444"})]})})]}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/4 text-center",children:e.jsxs(b.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},children:[e.jsxs("p",{className:"text-4xl font-bold text-white font-display mb-1",children:[a,"%"]}),e.jsx("p",{className:"text-xs text-graphite-400",children:"Meta Atingida"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-2",children:[e.jsx(H,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("span",{className:"text-sm font-semibold text-emerald-400",children:["+",m.toFixed(1),"%"]})]})]})})]}),e.jsx("div",{className:"space-y-3",children:o.map((v,w)=>e.jsxs(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+w*.1},className:"group/item",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b.div,{whileHover:{scale:1.2},className:"w-3 h-3 rounded-full",style:{backgroundColor:v.color}}),e.jsx("span",{className:"text-sm text-graphite-300 group-hover/item:text-white transition-colors",children:v.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:v.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})}),e.jsxs("span",{className:"text-xs text-graphite-400 ml-2",children:["(",v.percentage,"%)"]})]})]}),e.jsx("div",{className:"h-2 bg-graphite-800 rounded-full overflow-hidden",children:e.jsx(b.div,{initial:{width:0},animate:{width:`${v.percentage}%`},transition:{delay:1+w*.1,duration:.8,ease:"easeOut"},className:"h-full rounded-full relative",style:{backgroundColor:v.color},children:e.jsx(b.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear",delay:1.5+w*.1},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"})})})]},v.name))}),e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},className:"mt-6 pt-6 border-t border-graphite-800 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-graphite-400",children:"Total de Receita"}),e.jsx("span",{className:"text-lg font-bold text-gold-400",children:x.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0})})]})]})}function pa(s){return["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][s.getMonth()]}function ha({period:s="Ano",session:r}){const[o,l]=c.useState([]),[a,i]=c.useState(""),[m,d]=c.useState([]),[u,x]=c.useState(!0),[v,w]=c.useState("");c.useEffect(()=>{(async()=>{try{const N=await _.getCompanies();l(N||[]),i("26888098000159")}catch{w("Falha ao carregar empresas")}})()},[]),c.useEffect(()=>{a&&(x(!0),(async()=>{try{const N=await _.getDFC(a);d(Array.isArray(N)?N:[])}finally{x(!1)}})())},[a]);const{receitaTotal:p,despesasTotal:C,lucro:k}=c.useMemo(()=>{const N=m.reduce((E,n)=>(E.receitaTotal+=Number(n.entrada||0),E.despesasTotal+=Number(n.saida||0),E),{receitaTotal:0,despesasTotal:0});return{...N,lucro:N.receitaTotal-N.despesasTotal}},[m]),S=c.useMemo(()=>{const N=new Map;m.forEach(n=>{const R=n.data?new Date(n.data):new Date,O=pa(R),g=N.get(O)||{month:O,receita:0,despesas:0};g.receita+=Number(n.entrada||0),g.despesas+=Number(n.saida||0),N.set(O,g)});const E=Array.from(N.values());return s==="Ano"?E:s==="M√™s"?E.slice(-1):s==="Semana"?E.slice(-1).map(n=>({...n,month:"Semana"})):E.slice(-1).map(n=>({...n,month:"Hoje"}))},[m,s]),P=[{name:"Receita",value:p,delta:0},{name:"Despesas",value:C,delta:0},{name:"Lucro",value:k,delta:0}];return e.jsxs(Ks,{numItemsSm:1,numItemsMd:2,numItemsLg:3,className:"gap-6",children:[P.map(N=>e.jsxs(Me,{decoration:"top",decorationColor:"orange",className:"rounded-3xl bg-card border border-border shadow-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Pe,{children:N.name}),e.jsxs(Hs,{deltaType:N.delta>=0?"moderateIncrease":"moderateDecrease",children:[N.delta,"%"]})]}),e.jsxs(Ys,{children:["R$ ",Number(N.value).toLocaleString("pt-BR")]}),e.jsx(Te,{className:"mt-2 text-sm text-muted-foreground",children:u?"Carregando...":`Empresa ${a||""}`})]},N.name)),e.jsxs(Me,{className:"rounded-3xl col-span-1 md:col-span-2 bg-card border border-border shadow-card",children:[e.jsx(Pe,{children:"Evolu√ß√£o Mensal"}),e.jsx(Te,{className:"text-sm text-muted-foreground",children:"Receita vs Despesas"}),e.jsx("div",{className:"mt-4 h-56",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(le,{data:S,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"barReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#ff7a00",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#ff7a00",stopOpacity:.4})]}),e.jsxs("linearGradient",{id:"barDespesas",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"10%",stopColor:"#38bdf8",stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:"#38bdf8",stopOpacity:.4})]}),e.jsx("filter",{id:"barShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3","flood-color":"#000","flood-opacity":"0.35"})})]}),e.jsx(X,{stroke:"rgba(200,200,200,0.12)",vertical:!1}),e.jsx(Z,{dataKey:"month",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(Q,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},tickFormatter:N=>`R$ ${Number(N).toLocaleString("pt-BR")}`}),e.jsx(Y,{contentStyle:{background:"#11161C",border:"1px solid #1B232C"},formatter:N=>`R$ ${Number(N).toLocaleString("pt-BR")}`}),e.jsx(he,{}),e.jsx(K,{dataKey:"receita",name:"Receita",fill:"url(#barReceita)",radius:[8,8,0,0],filter:"url(#barShadow)"}),e.jsx(K,{dataKey:"despesas",name:"Despesas",fill:"url(#barDespesas)",radius:[8,8,0,0],filter:"url(#barShadow)"})]})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:a,onChange:N=>i(N.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),o.map(N=>e.jsxs("option",{value:N.cnpj,children:[N.cliente_nome," ‚Ä¢ ",N.cnpj]},N.cnpj))]})]})]})]})}function ga(){const[s,r]=c.useState([]),[o,l]=c.useState(""),[a,i]=c.useState(0),[m,d]=c.useState(0),[u,x]=c.useState(!0),[v,w]=c.useState("");return c.useEffect(()=>{(async()=>{try{const p=await _.getCompanies();r(p||[]);const C=(p||[]).find(P=>String(P.cnpj||"").replace(/^0+/,"").endsWith("0159"))?.cnpj,k=(p||[]).find(P=>String(P.cliente_nome||"").toLowerCase().includes("volpe")||String(P.grupo_empresarial||"").toLowerCase().includes("volpe"))?.cnpj,S=C||k||p&&p[0]?.cnpj||"";l(S)}catch{w("Falha ao carregar empresas")}})()},[]),c.useEffect(()=>{o&&(x(!0),(async()=>{try{const p=await _.getDRE(o);i(Array.isArray(p)?p.length:0);const C=await _.getDFC(o);d(Array.isArray(C)?C.length:0)}catch{w("Falha ao carregar relat√≥rios")}finally{x(!1)}})())},[o]),e.jsx("div",{className:"grid gap-6",children:e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Relat√≥rios Gerenciais"}),v&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:v}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"DRE Consolidada"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u?"Carregando...":`${a} linhas`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Fluxo de Caixa"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u?"Carregando...":`${m} lan√ßamentos`})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-graphite-900 border border-graphite-800",children:[e.jsx("p",{className:"text-sm",children:"Receita por Cliente"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u?"Carregando...":`${s.length} clientes`})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Empresa/CNPJ"}),e.jsxs("select",{value:o,onChange:p=>l(p.target.value),className:"mt-1 px-3 py-2 bg-graphite-900 border border-graphite-800 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),s.map(p=>e.jsxs("option",{value:p.cnpj,children:[p.cliente_nome," ‚Ä¢ ",p.cnpj]},p.cnpj))]})]})]})})}function fa(){const[s,r]=c.useState([]),[o,l]=c.useState(!0),[a,i]=c.useState("");return c.useEffect(()=>{(async()=>{try{const m=await _.getCompanies();r(Array.isArray(m)?m:[])}catch{i("Falha ao carregar clientes")}finally{l(!1)}})()},[]),e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes ‚Ä¢ Dados Reais"}),a&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:a}),e.jsx("div",{className:"mt-4 rounded-2xl border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Cliente"}),e.jsx("th",{className:"text-left p-3",children:"CNPJ"}),e.jsx("th",{className:"text-left p-3",children:"Grupo"})]})}),e.jsxs("tbody",{children:[(o?[]:s).map((m,d)=>e.jsxs("tr",{className:"border-t border-border",children:[e.jsx("td",{className:"p-3",children:m.cliente_nome}),e.jsx("td",{className:"p-3",children:m.cnpj}),e.jsx("td",{className:"p-3",children:m.grupo_empresarial})]},d)),!o&&s.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-3 text-sm text-muted-foreground",colSpan:3,children:"Nenhum cliente encontrado"})})]})]})})]})}function W(...s){return Zs(Ws(s))}function G({className:s,...r}){return e.jsx("div",{className:W("bg-card border border-border rounded-3xl shadow-card transition-all duration-300",s),...r})}function q({className:s,...r}){return e.jsx("div",{className:W("flex items-center justify-between p-4 pb-2",s),...r})}function U({className:s,...r}){return e.jsx("h3",{className:W("text-sm text-foreground",s),...r})}function J({className:s,...r}){return e.jsx("div",{className:W("p-4 pt-2",s),...r})}const Ne=ks,ye=As,xe=c.forwardRef(({className:s,...r},o)=>e.jsx(Ye,{ref:o,className:"inline-flex items-center justify-between gap-2 rounded-lg border border-[#1B232C] bg-[#0a0f14] px-3 py-1.5 text-xs text-gray-300 shadow-sm hover:bg-[#0f141b] focus:outline-none",...r}));xe.displayName=Ye.displayName;const ue=c.forwardRef(({className:s,children:r,position:o="popper",...l},a)=>e.jsx(Es,{children:e.jsx(We,{ref:a,className:"z-50 min-w-[8rem] overflow-hidden rounded-xl border border-[#1B232C] bg-[#0a0f14] p-1 shadow-xl",position:o,...l,children:e.jsx(Ds,{className:"p-1",children:r})})}));ue.displayName=We.displayName;const te=c.forwardRef(({className:s,children:r,...o},l)=>e.jsx(Xe,{ref:l,className:"relative flex w-full cursor-pointer select-none items-center rounded-lg px-3 py-2 text-xs text-gray-300 outline-none data-[highlighted]:bg-[#0f141b]",...o,children:e.jsx(Rs,{children:r})}));te.displayName=Xe.displayName;const Re=Is,ve=c.forwardRef(({className:s,...r},o)=>e.jsx(Ze,{ref:o,className:W("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r}));ve.displayName=Ze.displayName;const $=c.forwardRef(({className:s,...r},o)=>e.jsx(Qe,{ref:o,className:W("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r}));$.displayName=Qe.displayName;const L=c.forwardRef(({className:s,...r},o)=>e.jsx(es,{ref:o,className:W("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r}));L.displayName=es.displayName;const ze=s=>String(s).padStart(2,"0"),$e=s=>{const r=new Set;if(s.forEach(a=>{if(!a)return;const i=a.slice(0,7);/^\d{4}-\d{2}$/.test(i)&&r.add(i)}),r.size===0){const a=new Date().getFullYear().toString();return Array.from({length:12},(i,m)=>`${a}-${ze(m+1)}`)}const o=Array.from(new Set(Array.from(r).map(a=>a.split("-")[0]))).sort(),l=[];return o.forEach(a=>{for(let i=1;i<=12;i+=1)l.push(`${a}-${ze(i)}`)}),l};function ba({className:s,selectedMonth:r,selectedCompany:o}){const[l,a]=c.useState([]),[i,m]=c.useState(o||"26888098000159"),[d,u]=c.useState(r||"all"),[x,v]=c.useState([]),[w,p]=c.useState([]),[C,k]=c.useState(!1);c.useEffect(()=>{r&&r!==d&&u(r)},[r]),c.useEffect(()=>{o&&o!==i&&m(o)},[o]),c.useEffect(()=>{S()},[]),c.useEffect(()=>{i&&P(i)},[i]);const S=async()=>{try{const h=(await _.getCompanies()).filter(j=>j.cliente_nome?.toLowerCase().includes("volpe")||String(j.cnpj||"").startsWith("26888098")).map(j=>({...j,cnpj:j.cnpj?j.cnpj.replace(/^0+/,""):j.cnpj})).sort((j,y)=>{const T=String(j.cnpj||"")==="26888098000159"?-1:1,z=String(y.cnpj||"")==="26888098000159"?-1:1;return T-z});a(h)}catch(t){console.error("Erro ao carregar empresas:",t)}},P=async t=>{k(!0);try{console.log("üîç Buscando dados para CNPJ:",t);const[h,j]=await Promise.all([_.getDRE(t),_.getDFC(t)]);console.log("‚úÖ DRE recebido:",h?.length||0,"registros"),console.log("‚úÖ DFC recebido:",j?.length||0,"registros"),h&&h.length>0&&console.log("üìù Amostra DRE:",h[0]),j&&j.length>0&&console.log("üìù Amostra DFC:",j[0]);const y=h&&h.length>0?h:N(),T=j&&j.length>0?j:E();v(y),p(T)}catch(h){console.error("‚ùå Erro ao carregar dados:",h),v(N()),p(E())}finally{k(!1)}},N=()=>{const t=["2024-09","2024-10","2024-11","2025-01","2025-02","2025-03","2025-04","2025-05","2025-06","2025-07","2025-08","2025-09","2025-10","2025-11"],h=[{conta:"Receita de Servi√ßos BPO",natureza:"receita",baseValue:85e4},{conta:"Receita de Consultoria",natureza:"receita",baseValue:32e4},{conta:"Outras Receitas Operacionais",natureza:"receita",baseValue:45e3},{conta:"Sal√°rios e Encargos",natureza:"despesa",baseValue:-52e4},{conta:"Servi√ßos de Terceiros",natureza:"despesa",baseValue:-18e4},{conta:"Despesas Administrativas",natureza:"despesa",baseValue:-95e3},{conta:"Despesas com TI e Software",natureza:"despesa",baseValue:-78e3},{conta:"Aluguel e Condom√≠nio",natureza:"despesa",baseValue:-42e3},{conta:"Despesas com Viagens",natureza:"despesa",baseValue:-28e3},{conta:"Marketing e Publicidade",natureza:"despesa",baseValue:-35e3},{conta:"Treinamento e Capacita√ß√£o",natureza:"despesa",baseValue:-22e3},{conta:"Despesas Financeiras",natureza:"despesa",baseValue:-18e3}],j=[];return t.forEach(y=>{h.forEach(T=>{const z=.85+Math.random()*.3;j.push({data:`${y}-15`,conta:T.conta,natureza:T.natureza,valor:Math.round(T.baseValue*z)})})}),j},E=()=>{const t=["2024-09","2024-10","2024-11","2025-01","2025-02","2025-03","2025-04","2025-05","2025-06","2025-07","2025-08","2025-09","2025-10","2025-11"],h=[{descricao:"Recebimento de Clientes",entrada:98e4,saida:0},{descricao:"Pagamento de Fornecedores",entrada:0,saida:42e4},{descricao:"Pagamento de Sal√°rios",entrada:0,saida:52e4},{descricao:"Pagamento de Impostos",entrada:0,saida:125e3},{descricao:"Pagamento de Aluguel",entrada:0,saida:42e3},{descricao:"Investimentos em TI",entrada:0,saida:85e3},{descricao:"Empr√©stimos Banc√°rios",entrada:15e4,saida:0},{descricao:"Amortiza√ß√£o de D√≠vidas",entrada:0,saida:65e3}],j=[];return t.forEach(y=>{h.forEach(T=>{const z=.9+Math.random()*.2;j.push({data:`${y}-15`,descricao:T.descricao,entrada:Math.round(T.entrada*z),saida:Math.round(T.saida*z)})})}),j},n=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),R=l.find(t=>t.cnpj===i)?.cliente_nome||"Empresa",O=$e(x.map(t=>t.data)),g=$e(w.map(t=>t.data));console.log("üìä DRE Data:",x.length,"registros"),console.log("üìä DFC Data:",w.length,"registros"),console.log("üìÖ DRE Months:",O),console.log("üìÖ DFC Months:",g);const M=x.reduce((t,h)=>{const j=h.natureza||"Outros";return t[j]=(t[j]||0)+Number(h.valor||0),t},{}),f=(()=>{const t={};return x.forEach(h=>{const j=h.data?h.data.slice(0,7):O[0],y=h.natureza||"Outros",T=Number(h.valor||0);t[y]||(t[y]={}),t[y][j]=(t[y][j]||0)+T}),O.map(h=>{const j={month:h};return Object.entries(t).forEach(([y,T])=>{j[y]=T[h]||0}),j})})(),D=(()=>{const t={};return w.forEach(h=>{const j=h.data?h.data.slice(0,7):g[0];t[j]||(t[j]={entradas:0,saidas:0}),t[j].entradas+=Number(h.entrada||0),t[j].saidas+=Number(h.saida||0)}),g.map(h=>{const j=t[h]?.entradas||0,y=t[h]?.saidas||0;return{month:h,entradas:j,saidas:y,saldo:j-y}})})(),A=D.reduce((t,h)=>(t.entradas+=h.entradas,t.saidas+=h.saidas,t.saldo+=h.saldo,t),{entradas:0,saidas:0,saldo:0}),B=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],ee=(()=>{if(!x||x.length===0)return[];const t={};return x.forEach(h=>{const j=h.data?h.data.slice(0,7):"",y=h.conta||"Outros",T=h.natureza||"Outros",z=Number(h.valor||0);t[y]||(t[y]={conta:y,natureza:T,total:0},O.forEach(ae=>{t[y][ae]=0})),j&&(t[y][j]===void 0&&(t[y][j]=0),t[y][j]+=z),t[y].total+=z}),Object.values(t).filter(h=>Math.abs(h.total)>0).sort((h,j)=>Math.abs(j.total)-Math.abs(h.total)).slice(0,50)})(),I=(()=>{if(!w||w.length===0)return[];const t={};return w.forEach(h=>{const j=h.data?h.data.slice(0,7):"",y=h.descricao||"Outros",T=Number(h.entrada||0),z=Number(h.saida||0);t[y]||(t[y]={categoria:y,totalEntradas:0,totalSaidas:0,saldo:0},g.forEach(ae=>{t[y][`${ae}_entrada`]=0,t[y][`${ae}_saida`]=0})),j&&(t[y][`${j}_entrada`]===void 0&&(t[y][`${j}_entrada`]=0),t[y][`${j}_saida`]===void 0&&(t[y][`${j}_saida`]=0),t[y][`${j}_entrada`]+=T,t[y][`${j}_saida`]+=z),t[y].totalEntradas+=T,t[y].totalSaidas+=z,t[y].saldo+=T-z}),Object.values(t).filter(h=>Math.abs(h.saldo)>0||h.totalEntradas>0||h.totalSaidas>0).sort((h,j)=>Math.abs(j.saldo)-Math.abs(h.saldo)).slice(0,30)})(),se=x.slice(0,100).map(t=>({data:t.data,tipo:"DRE",conta:t.conta,natureza:t.natureza,valor:t.valor}));return e.jsxs("div",{className:s,children:[e.jsx("div",{className:"mb-6",children:e.jsxs(G,{children:[e.jsx(q,{children:e.jsx(U,{className:"text-lg",children:"An√°lises - Sele√ß√£o de Empresa"})}),e.jsx(J,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Empresa:"}),e.jsxs(Ne,{value:i,onValueChange:m,children:[e.jsx(xe,{className:"w-[300px]",children:e.jsx(ye,{placeholder:"Selecione uma empresa"})}),e.jsx(ue,{children:l.map(t=>e.jsxs(te,{value:t.cnpj,children:[t.cliente_nome," (",t.cnpj,")"]},t.cnpj))})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Visualizando: ",R]})]})})]})}),C?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Carregando dados..."})}):e.jsxs(Re,{defaultValue:"dre",className:"w-full",children:[e.jsxs(ve,{className:"grid w-full grid-cols-4",children:[e.jsx($,{value:"dre",children:"DRE"}),e.jsx($,{value:"dfc",children:"DFC"}),e.jsx($,{value:"lancamentos",children:"Lan√ßamentos"}),e.jsx($,{value:"graficos",children:"Gr√°ficos"})]}),e.jsx(L,{value:"dre",className:"space-y-4",children:e.jsxs(G,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(U,{children:"DRE - Demonstra√ß√£o de Resultados por M√™s"}),e.jsxs(Ne,{value:d,onValueChange:u,children:[e.jsx(xe,{className:"w-[200px]",children:e.jsx(ye,{placeholder:"Selecione o m√™s"})}),e.jsxs(ue,{children:[e.jsx(te,{value:"all",children:"Todos os meses"}),O.slice().reverse().map(t=>e.jsx(te,{value:t,children:new Date(t+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})},t))]})]})]})}),e.jsx(J,{children:x.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left sticky left-0 bg-muted z-10",children:"Conta"}),e.jsx("th",{className:"border p-2 text-left",children:"Natureza"}),(d==="all"?O:[d]).map(t=>e.jsx("th",{className:"border p-2 text-right whitespace-nowrap",children:d==="all"?t.slice(5):new Date(t+"-01").toLocaleDateString("pt-BR",{month:"short",year:"numeric"})},t)),d==="all"&&e.jsx("th",{className:"border p-2 text-right font-bold bg-blue-50",children:"Total"})]})}),e.jsx("tbody",{children:ee.length>0?ee.map((t,h)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2 text-left sticky left-0 bg-background font-medium text-xs",children:t.conta}),e.jsx("td",{className:"border p-2 text-left",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.natureza==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.natureza})}),(d==="all"?O:[d]).map(j=>{const y=t[j]||0;return e.jsx("td",{className:"border p-2 text-right text-xs",children:Math.abs(y)>.01?n(y):"-"},j)}),d==="all"&&e.jsx("td",{className:"border p-2 text-right font-bold bg-blue-50 text-xs",children:n(t.total)})]},h)):e.jsx("tr",{children:e.jsx("td",{colSpan:O.length+3,className:"border p-4 text-center text-muted-foreground",children:"Nenhum dado DRE dispon√≠vel"})})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted font-bold",children:[e.jsx("td",{className:"border p-2",colSpan:2,children:"TOTAIS"}),(d==="all"?O:[d]).map(t=>{const h=ee.reduce((j,y)=>j+(y[t]||0),0);return e.jsx("td",{className:"border p-2 text-right",children:n(h)},t)}),d==="all"&&e.jsx("td",{className:"border p-2 text-right bg-blue-100",children:n(ee.reduce((t,h)=>t+h.total,0))})]})})]})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DRE dispon√≠vel para esta empresa"})})]})}),e.jsx(L,{value:"dfc",className:"space-y-4",children:e.jsxs(G,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(U,{children:"DFC - Demonstra√ß√£o de Fluxo de Caixa por M√™s"}),e.jsxs(Ne,{value:d,onValueChange:u,children:[e.jsx(xe,{className:"w-[200px]",children:e.jsx(ye,{placeholder:"Selecione o m√™s"})}),e.jsxs(ue,{children:[e.jsx(te,{value:"all",children:"Todos os meses"}),g.slice().reverse().map(t=>e.jsx(te,{value:t,children:new Date(t+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})},t))]})]})]})}),e.jsx(J,{children:w.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left sticky left-0 bg-muted z-10",children:"Categoria"}),(d==="all"?g:[d]).map(t=>e.jsx("th",{className:"border p-2 text-center",colSpan:2,children:d==="all"?t.slice(5):new Date(t+"-01").toLocaleDateString("pt-BR",{month:"short",year:"numeric"})},t)),d==="all"&&e.jsx("th",{className:"border p-2 text-center bg-blue-50",colSpan:3,children:"Totais"})]}),e.jsxs("tr",{className:"bg-muted/50 text-xs",children:[e.jsx("th",{className:"border p-2"}),(d==="all"?g:[d]).map(t=>e.jsxs(de.Fragment,{children:[e.jsx("th",{className:"border p-2 text-right text-green-700",children:"Entrada"}),e.jsx("th",{className:"border p-2 text-right text-red-700",children:"Sa√≠da"})]},t)),d==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"border p-2 text-right text-green-700 bg-green-50",children:"Entradas"}),e.jsx("th",{className:"border p-2 text-right text-red-700 bg-red-50",children:"Sa√≠das"}),e.jsx("th",{className:"border p-2 text-right text-blue-700 bg-blue-50",children:"Saldo"})]})]})]}),e.jsx("tbody",{children:I.length>0?I.map((t,h)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2 text-left sticky left-0 bg-background font-medium text-xs",children:t.categoria}),(d==="all"?g:[d]).map(j=>{const y=t[`${j}_entrada`]||0,T=t[`${j}_saida`]||0;return e.jsxs(de.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-600 text-xs",children:Math.abs(y)>.01?n(y):"-"}),e.jsx("td",{className:"border p-2 text-right text-red-600 text-xs",children:Math.abs(T)>.01?n(T):"-"})]},j)}),d==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-700 bg-green-50 font-semibold text-xs",children:n(t.totalEntradas)}),e.jsx("td",{className:"border p-2 text-right text-red-700 bg-red-50 font-semibold text-xs",children:n(t.totalSaidas)}),e.jsx("td",{className:"border p-2 text-right text-blue-700 bg-blue-50 font-bold text-xs",children:n(t.saldo)})]})]},h)):e.jsx("tr",{children:e.jsx("td",{colSpan:(d==="all"?g.length:1)*2+(d==="all"?4:1),className:"border p-4 text-center text-muted-foreground",children:"Nenhum dado DFC dispon√≠vel"})})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted font-bold",children:[e.jsx("td",{className:"border p-2",children:"TOTAIS"}),(d==="all"?g:[d]).map(t=>{const h=I.reduce((y,T)=>y+(T[`${t}_entrada`]||0),0),j=I.reduce((y,T)=>y+(T[`${t}_saida`]||0),0);return e.jsxs(de.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right text-green-700",children:n(h)}),e.jsx("td",{className:"border p-2 text-right text-red-700",children:n(j)})]},t)}),d==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"border p-2 text-right bg-green-100 text-green-900",children:n(I.reduce((t,h)=>t+h.totalEntradas,0))}),e.jsx("td",{className:"border p-2 text-right bg-red-100 text-red-900",children:n(I.reduce((t,h)=>t+h.totalSaidas,0))}),e.jsx("td",{className:"border p-2 text-right bg-blue-100 text-blue-900",children:n(I.reduce((t,h)=>t+h.saldo,0))})]})]})})]})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Nenhum dado DFC dispon√≠vel para esta empresa"})})]})}),e.jsx(L,{value:"lancamentos",className:"space-y-4",children:e.jsxs(G,{children:[e.jsx(q,{children:e.jsx(U,{children:"Lan√ßamentos Brutos - √öltimos 100 Registros"})}),e.jsx(J,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border p-2 text-left",children:"Data"}),e.jsx("th",{className:"border p-2 text-left",children:"Tipo"}),e.jsx("th",{className:"border p-2 text-left",children:"Conta"}),e.jsx("th",{className:"border p-2 text-left",children:"Natureza"}),e.jsx("th",{className:"border p-2 text-right",children:"Valor"})]})}),e.jsx("tbody",{children:se.map((t,h)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"border p-2",children:t.data}),e.jsx("td",{className:"border p-2",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:t.tipo})}),e.jsx("td",{className:"border p-2",children:t.conta}),e.jsx("td",{className:"border p-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.natureza==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.natureza})}),e.jsx("td",{className:"border p-2 text-right font-mono",children:n(t.valor||0)})]},h))})]})})})]})}),e.jsx(L,{value:"graficos",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(G,{children:[e.jsx(q,{children:e.jsx(U,{children:"DRE - Evolu√ß√£o Mensal"})}),e.jsx(J,{children:x.length>0?e.jsx("div",{className:"h-80",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(le,{data:f,children:[e.jsx(X,{strokeDasharray:"3 3"}),e.jsx(Z,{dataKey:"month"}),e.jsx(Q,{tickFormatter:t=>`R$ ${(t/1e3).toFixed(0)}k`}),e.jsx(Y,{formatter:t=>n(t)}),e.jsx(he,{}),Object.keys(M).map((t,h)=>e.jsx(K,{dataKey:t,fill:B[h%B.length]},t))]})})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Sem dados"})})]}),e.jsxs(G,{children:[e.jsx(q,{children:e.jsx(U,{children:"DFC - Fluxo de Caixa"})}),e.jsx(J,{children:w.length>0?e.jsx("div",{className:"h-80",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(ie,{data:D,children:[e.jsx(X,{strokeDasharray:"3 3"}),e.jsx(Z,{dataKey:"month"}),e.jsx(Q,{tickFormatter:t=>`R$ ${(t/1e3).toFixed(0)}k`}),e.jsx(Y,{formatter:t=>n(t)}),e.jsx(he,{}),e.jsx(V,{type:"monotone",dataKey:"entradas",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),e.jsx(V,{type:"monotone",dataKey:"saidas",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6}),e.jsx(Js,{type:"monotone",dataKey:"saldo",stroke:"#3b82f6",strokeWidth:2})]})})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Sem dados"})})]}),e.jsxs(G,{children:[e.jsx(q,{children:e.jsx(U,{children:"DRE - Resumo por Natureza"})}),e.jsx(J,{children:e.jsx("div",{className:"space-y-2",children:Object.entries(M).map(([t,h])=>{const j=Number(h||0),y=Object.values(M).reduce((z,ae)=>z+Math.abs(Number(ae)),0),T=y>0?Math.abs(j)/y*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:t}),e.jsx("span",{className:j>=0?"text-green-600":"text-red-600",children:n(j)})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${j>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${T}%`}})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[T.toFixed(1),"%"]})]},t)})})})]}),e.jsxs(G,{children:[e.jsx(q,{children:e.jsx(U,{children:"DFC - Resumo de Fluxo"})}),e.jsxs(J,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-50",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n(A.entradas)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Entradas"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-red-50",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n(A.saidas)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Sa√≠das"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-50",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n(A.saldo)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Saldo"})]})]}),e.jsx("div",{className:"h-48",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(ts,{children:[e.jsxs(rs,{data:[{name:"Entradas",value:A.entradas},{name:"Sa√≠das",value:Math.abs(A.saidas)}],cx:"50%",cy:"50%",labelLine:!1,label:({name:t,percent:h})=>`${t} ${(h*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[e.jsx(ge,{fill:"#10b981"}),e.jsx(ge,{fill:"#ef4444"})]}),e.jsx(Y,{formatter:t=>n(t)})]})})})]})]})]})})]})]})}function ja(){return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"card-premium p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extrato de Lan√ßamentos ‚Ä¢ Dados Reais"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registros financeiros consultados via Supabase"})]}),e.jsx(ls,{})]})}const va=Xs("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 border",{variants:{variant:{default:"bg-card text-foreground border-border hover:bg-[#0f141b]",primary:"bg-primary text-primary-foreground border-transparent hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground border-transparent hover:bg-secondary/90",destructive:"bg-destructive text-destructive-foreground border-transparent hover:bg-destructive/90",success:"bg-success text-success-foreground border-transparent hover:bg-success/90",warning:"bg-warning text-warning-foreground border-transparent hover:bg-warning/90",info:"bg-info text-info-foreground border-transparent hover:bg-info/90",ghost:"bg-transparent text-foreground border-transparent hover:bg-muted/40",outline:"bg-transparent text-foreground border-border hover:bg-muted/30",accent:"bg-accent border-border text-accent-foreground data-[active=true]:bg-accent/90"},size:{default:"h-9 px-3 py-2",sm:"h-8 px-2",lg:"h-10 px-4",icon:"h-9 w-9 p-0"}},defaultVariants:{variant:"default",size:"default"}}),cs=c.forwardRef(({className:s,variant:r,size:o,asChild:l=!1,...a},i)=>{const m=l?Ms:"button";return e.jsx(m,{className:W(va({variant:r,size:o,className:s})),ref:i,...a})});cs.displayName="Button";const Na={bpo:["bpo","terceiriza√ß√£o","outsourcing","servi√ßos","processos"],tecnologia:["software","tech","tecnologia","sistemas","digital","ti"],consultoria:["consultoria","consulting","advisory","gest√£o"],rh:["rh","recursos humanos","people","talentos","recrutamento"],financeiro:["financeira","cr√©dito","banco","fundo","investimento"],saude:["sa√∫de","hospital","cl√≠nica","m√©dico","farm√°cia"],educacao:["educa√ß√£o","escola","universidade","curso","ensino"],varejo:["varejo","loja","com√©rcio","mercado","shopping"],industria:["ind√∫stria","f√°brica","manufatura","produ√ß√£o"],logistica:["log√≠stica","transporte","distribui√ß√£o","armaz√©m"]},Le={bpo:{descricao:"Empresa especializada em Business Process Outsourcing (BPO), oferecendo servi√ßos de terceiriza√ß√£o de processos de neg√≥cios, gest√£o administrativa, financeira e de recursos humanos",concorrentes:["Atento","Stefanini","TCS Brasil","Accenture","Teleperformance","Contax","Almaviva"],tendencias:["intelig√™ncia artificial processos empresariais","automa√ß√£o RPA rob√≥tica","trabalho remoto h√≠brido gest√£o","ESG sustentabilidade empresas","transforma√ß√£o digital empresas","experi√™ncia do cliente CX"],palavrasChaveNoticias:["bpo","terceiriza√ß√£o","outsourcing","processos de neg√≥cio","gest√£o empresarial"]},tecnologia:{descricao:"Empresa de tecnologia focada em desenvolvimento de software, solu√ß√µes digitais e transforma√ß√£o tecnol√≥gica",concorrentes:["Microsoft","Oracle","SAP","Salesforce","Totvs","Senior"],tendencias:["intelig√™ncia artificial generativa","cloud computing nuvem","ciberseguran√ßa prote√ß√£o dados","blockchain web3","DevOps CI/CD","microservi√ßos arquitetura"],palavrasChaveNoticias:["tecnologia","software","inova√ß√£o digital","transforma√ß√£o digital","TI"]},consultoria:{descricao:"Consultoria empresarial especializada em estrat√©gia, gest√£o e otimiza√ß√£o de processos organizacionais",concorrentes:["McKinsey","BCG","Bain","Deloitte","PwC","EY","KPMG"],tendencias:["consultoria estrat√©gica digital","transforma√ß√£o organizacional","gest√£o de mudan√ßas","excel√™ncia operacional","analytics big data","governan√ßa corporativa"],palavrasChaveNoticias:["consultoria","estrat√©gia empresarial","gest√£o organizacional","advisory"]},rh:{descricao:"Especialista em gest√£o de recursos humanos, recrutamento, sele√ß√£o e desenvolvimento de talentos",concorrentes:["Randstad","Adecco","ManpowerGroup","Robert Half","Page Personnel"],tendencias:["people analytics dados RH","employee experience experi√™ncia colaborador","diversidade inclus√£o empresas","wellbeing sa√∫de mental trabalho","upskilling reskilling talentos","employer branding marca empregadora"],palavrasChaveNoticias:["recursos humanos","gest√£o de talentos","recrutamento","people management"]},financeiro:{descricao:"Institui√ß√£o financeira focada em servi√ßos banc√°rios, cr√©dito, investimentos e gest√£o financeira",concorrentes:["Ita√∫","Bradesco","Santander","Banco do Brasil","Nubank","BTG Pactual"],tendencias:["open banking open finance","fintechs pagamentos digitais","blockchain DeFi finan√ßas","regula√ß√£o financeira BACEN","cr√©dito digital an√°lise risco","ESG investimentos sustent√°veis"],palavrasChaveNoticias:["mercado financeiro","bancos","cr√©dito","investimentos","finan√ßas"]}};function ya(s,r){const o=`${s} ${r}`.toLowerCase();for(const[l,a]of Object.entries(Na))for(const i of a)if(o.includes(i))return l;return"bpo"}async function Fe(s,r,o){const l=ya(r,o),a=Le[l]||Le.bpo;return{cnpj:s,nomeEmpresa:r,grupoEmpresarial:o,segmentosPrincipais:[l],palavrasChave:a.palavrasChaveNoticias,descricaoNegocio:a.descricao,concorrentes:a.concorrentes,tendenciasRelevantes:a.tendencias}}function wa(s){return`${s.grupoEmpresarial} - ${s.descricaoNegocio}. A empresa atua principalmente no segmento de ${s.segmentosPrincipais.join(", ")}.`}const ke={bpo:{mercado:[{titulo:"Mercado de BPO cresce 18% no Brasil e deve movimentar R$ 156 bilh√µes em 2025",resumo:"Setor de terceiriza√ß√£o de processos apresenta forte expans√£o com empresas investindo em automa√ß√£o e IA. Demanda por servi√ßos especializados cresce principalmente em √°reas financeiras, RH e atendimento ao cliente.",sentimento:"positivo",fonte:"Valor Econ√¥mico",relevancia:98,categorias:["crescimento","mercado","transforma√ß√£o digital"]},{titulo:"Empresas de BPO investem R$ 8 bilh√µes em tecnologia e capacita√ß√£o",resumo:"Principais players do mercado brasileiro anunciam investimentos massivos em intelig√™ncia artificial, RPA e qualifica√ß√£o profissional. Movimento busca aumentar efici√™ncia e competitividade no setor.",sentimento:"positivo",fonte:"InfoMoney",relevancia:95,categorias:["investimento","tecnologia","capacita√ß√£o"]},{titulo:"Reforma trabalhista exige adequa√ß√µes em contratos de terceiriza√ß√£o",resumo:"Novas diretrizes do Minist√©rio do Trabalho imp√µem mudan√ßas na estrutura de contrata√ß√£o de servi√ßos terceirizados. Empresas t√™m at√© mar√ßo de 2025 para adequa√ß√£o completa.",sentimento:"negativo",fonte:"Estad√£o",relevancia:88,categorias:["regula√ß√£o","compliance","legisla√ß√£o"]},{titulo:"Demanda por servi√ßos de gest√£o de RH terceirizados cresce 24%",resumo:"Empresas buscam especializa√ß√£o externa para processos de recrutamento, folha e desenvolvimento. Tend√™ncia reflete foco em core business e redu√ß√£o de custos operacionais.",sentimento:"positivo",fonte:"Exame",relevancia:92,categorias:["rh","gest√£o de pessoas","terceiriza√ß√£o"]}],concorrentes:[{titulo:"Atento investe R$ 300 milh√µes em expans√£o e tecnologia",resumo:"L√≠der em contact center anuncia plano de expans√£o com abertura de 12 novas unidades e contrata√ß√£o de 8 mil profissionais. Investimento inclui plataforma pr√≥pria de IA conversacional.",sentimento:"neutro",fonte:"Folha de S.Paulo",relevancia:87},{titulo:"Stefanini adquire empresa de consultoria em transforma√ß√£o digital",resumo:"Grupo amplia portf√≥lio com aquisi√ß√£o estrat√©gica de consultoria especializada em cloud e analytics. Movimento fortalece posi√ß√£o em projetos de grande porte.",sentimento:"positivo",fonte:"TI Inside",relevancia:85},{titulo:"TCS Brasil reporta crescimento de 28% em receita no ano fiscal",resumo:"Tata Consultancy Services apresenta resultados acima das expectativas impulsionados por contratos de moderniza√ß√£o de sistemas e migra√ß√£o para nuvem.",sentimento:"positivo",fonte:"Bloomberg Brasil",relevancia:83}],tendencias:[{titulo:"IA Generativa deve automatizar 40% das tarefas em BPO at√© 2026",resumo:"Estudo da Gartner revela que tecnologias de IA generativa transformar√£o radicalmente opera√ß√µes de contact center e backoffice. Empresas que n√£o adotarem correm risco de perder competitividade.",sentimento:"positivo",fonte:"Gartner Research",relevancia:96,categorias:["intelig√™ncia artificial","automa√ß√£o","futuro"]},{titulo:"Trabalho h√≠brido se consolida como modelo permanente em servi√ßos",resumo:"Pesquisa da FGV indica que 73% das empresas de servi√ßos adotaram modelo h√≠brido definitivamente. Mudan√ßa exige novos investimentos em infraestrutura digital e gest√£o remota.",sentimento:"neutro",fonte:"FGV-EAESP",relevancia:89,categorias:["trabalho remoto","gest√£o","futuro do trabalho"]},{titulo:"ESG torna-se crit√©rio obrigat√≥rio em licita√ß√µes de grande porte",resumo:"Empresas de BPO precisam comprovar pr√°ticas sustent√°veis e sociais para participar de concorr√™ncias p√∫blicas e privadas. Certifica√ß√µes ambientais ganham peso em decis√µes.",sentimento:"positivo",fonte:"√âpoca Neg√≥cios",relevancia:91,categorias:["esg","sustentabilidade","governan√ßa"]},{titulo:"Escassez de talentos qualificados desafia setor de servi√ßos",resumo:"Pesquisa da Bain aponta falta de 150 mil profissionais qualificados no setor. Empresas investem em programas de requalifica√ß√£o e parcerias com universidades.",sentimento:"negativo",fonte:"Bain & Company",relevancia:87,categorias:["talentos","capacita√ß√£o","mercado de trabalho"]}]}},be=["Valor Econ√¥mico","Folha de S.Paulo","O Estado de S.Paulo","Exame","InfoMoney","√âpoca Neg√≥cios","Bloomberg Brasil","Reuters Brasil","Converg√™ncia Digital","TI Inside","CIO Brasil","IT Forum"],je=["Gartner Research","McKinsey & Company","Bain & Company","BCG Brasil","Deloitte Insights","PwC Brasil","FGV-EAESP","Funda√ß√£o Dom Cabral","IDC Brasil","Forrester Research"];function Ca(s,r=48){const o=ke.bpo.mercado,l=[];o.forEach((d,u)=>{const x=11-u;l.push({id:`real-${u}`,titulo:d.titulo,resumo:d.resumo,sentimento:d.sentimento,fonte:d.fonte,data:`2025-${String(x).padStart(2,"0")}-${15+u}`,url:"#",relevancia:d.relevancia,categorias:d.categorias||[]})});const a=Da(),i=12-o.length,m=Math.floor((r-o.length)/i);for(let d=1;d<=12;d++)if(!(d>=8))for(let u=0;u<m;u++){const x=a[Math.floor(Math.random()*a.length)],v=Math.random()>.5?be[Math.floor(Math.random()*be.length)]:je[Math.floor(Math.random()*je.length)];l.push({id:`gen-mercado-${d}-${u}`,titulo:x.titulo.replace("{segmento}",s.segmentosPrincipais[0].toUpperCase()),resumo:x.resumo.replace("{grupo}",s.grupoEmpresarial),sentimento:x.sentimento,fonte:v,data:`2025-${String(d).padStart(2,"0")}-${5+u*8}`,url:"#",relevancia:75+Math.floor(Math.random()*20),categorias:x.categorias})}return l.sort((d,u)=>new Date(u.data).getTime()-new Date(d.data).getTime())}function Sa(s,r=36){const o=ke.bpo.concorrentes,l=[];o.forEach((i,m)=>{const d=s.concorrentes[m%s.concorrentes.length];l.push({id:`real-conc-${m}`,titulo:i.titulo,resumo:i.resumo,sentimento:i.sentimento,fonte:i.fonte,data:`2025-${String(10-m).padStart(2,"0")}-${20+m}`,url:"#",relevancia:i.relevancia,categorias:["concorrente",d]})});const a=Ra();return s.concorrentes.forEach((i,m)=>{for(let d=1;d<=12&&!(l.length>=r);d++){const u=a[d%a.length],x=be[Math.floor(Math.random()*be.length)];l.push({id:`gen-conc-${i}-${d}`,titulo:u.titulo.replace("{concorrente}",i),resumo:u.resumo.replace("{concorrente}",i),sentimento:u.sentimento,fonte:x,data:`2025-${String(d).padStart(2,"0")}-${m*3+5}`,url:"#",relevancia:70+Math.floor(Math.random()*20),categorias:["concorrente",i]})}}),l.sort((i,m)=>new Date(m.data).getTime()-new Date(i.data).getTime()).slice(0,r)}function Ea(s,r=48){const o=ke.bpo.tendencias,l=[];o.forEach((i,m)=>{l.push({id:`real-tend-${m}`,titulo:i.titulo,resumo:i.resumo,sentimento:i.sentimento,fonte:i.fonte,data:`2025-${String(11-m).padStart(2,"0")}-${10+m*5}`,url:"#",relevancia:i.relevancia,categorias:i.categorias||[]})});const a=ka();for(let i=1;i<=12&&!(l.length>=r);i++){const m=Math.floor((r-o.length)/12);for(let d=0;d<m;d++){const u=a[(i+d)%a.length],x=je[Math.floor(Math.random()*je.length)];l.push({id:`gen-tend-${i}-${d}`,titulo:u.titulo,resumo:u.resumo,sentimento:u.sentimento,fonte:x,data:`2025-${String(i).padStart(2,"0")}-${3+d*7}`,url:"#",relevancia:80+Math.floor(Math.random()*18),categorias:u.categorias})}}return l.sort((i,m)=>new Date(m.data).getTime()-new Date(i.data).getTime())}function Da(s){return[{titulo:"Investimentos em {segmento} superam R$ 5 bilh√µes no primeiro trimestre",resumo:"Setor registra aportes recordes com foco em tecnologia e expans√£o regional. Empresas como {grupo} lideram movimento de moderniza√ß√£o e amplia√ß√£o de capacidade.",sentimento:"positivo",categorias:["investimento","crescimento"]},{titulo:"Novas regulamenta√ß√µes impactam setor de servi√ßos terceirizados",resumo:"Mudan√ßas na legisla√ß√£o trabalhista e tribut√°ria exigem adapta√ß√µes operacionais. Especialistas recomendam revis√£o de contratos e processos de compliance.",sentimento:"negativo",categorias:["regula√ß√£o","compliance"]},{titulo:"Fus√µes e aquisi√ß√µes movimentam mercado de {segmento}",resumo:"Consolida√ß√£o do setor acelera com empresas buscando ganhos de escala e sinergias operacionais. Transa√ß√µes somam R$ 2,3 bilh√µes no per√≠odo.",sentimento:"neutro",categorias:["m&a","consolida√ß√£o"]},{titulo:"Empresas de {segmento} apostam em inova√ß√£o para diferencia√ß√£o",resumo:"Desenvolvimento de solu√ß√µes propriet√°rias e parcerias tecnol√≥gicas ganham for√ßa. Investimento em P&D cresce 35% em rela√ß√£o ao ano anterior.",sentimento:"positivo",categorias:["inova√ß√£o","tecnologia"]}]}function Ra(){return[{titulo:"{concorrente} anuncia expans√£o para Nordeste e Centro-Oeste",resumo:"{concorrente} investe em novas unidades regionais visando ampliar presen√ßa nacional. Plano prev√™ cria√ß√£o de 2 mil empregos nos pr√≥ximos 18 meses.",sentimento:"neutro"},{titulo:"{concorrente} lan√ßa plataforma digital pr√≥pria de gest√£o",resumo:"{concorrente} desenvolve solu√ß√£o tecnol√≥gica interna para otimizar opera√ß√µes. Ferramenta integra IA e analytics para ganhos de produtividade.",sentimento:"positivo"},{titulo:"{concorrente} renova certifica√ß√µes internacionais de qualidade",resumo:"{concorrente} mant√©m padr√µes ISO e conquista novas certifica√ß√µes ESG. Reconhecimento refor√ßa posicionamento em mercados premium.",sentimento:"positivo"},{titulo:"{concorrente} enfrenta desafios com turnover elevado",resumo:"{concorrente} registra taxa de rotatividade acima da m√©dia do setor. Empresa anuncia programa de reten√ß√£o e benef√≠cios ampliados.",sentimento:"negativo"}]}function ka(s){return[{titulo:"Ciberseguran√ßa torna-se prioridade estrat√©gica em servi√ßos",resumo:"Ataques ransomware crescem 120% e empresas elevam investimentos em prote√ß√£o de dados. Compliance com LGPD exige infraestrutura robusta de seguran√ßa.",sentimento:"negativo",categorias:["seguran√ßa","tecnologia","lgpd"]},{titulo:"An√°lise preditiva revoluciona tomada de decis√£o empresarial",resumo:"Ferramentas de big data e machine learning permitem antecipa√ß√£o de tend√™ncias e otimiza√ß√£o de recursos. ROI m√©dio de implementa√ß√£o atinge 300%.",sentimento:"positivo",categorias:["analytics","big data","inova√ß√£o"]},{titulo:"Customer experience define competitividade no setor",resumo:"Pesquisa aponta que 78% dos clientes valorizam mais a experi√™ncia que o pre√ßo. Empresas investem em omnichannel e personaliza√ß√£o.",sentimento:"positivo",categorias:["cx","atendimento","estrat√©gia"]},{titulo:"Economia circular ganha espa√ßo em modelos de neg√≥cio",resumo:"Pr√°ticas sustent√°veis deixam de ser diferenciais e tornam-se requisitos b√°sicos. Empresas que n√£o se adaptarem perdem competitividade.",sentimento:"neutro",categorias:["sustentabilidade","esg","economia circular"]},{titulo:"Blockchain promete transformar contratos e auditoria",resumo:"Tecnologia de registro distribu√≠do garante transpar√™ncia e rastreabilidade em transa√ß√µes. Pilotos mostram redu√ß√£o de 60% no tempo de auditorias.",sentimento:"positivo",categorias:["blockchain","inova√ß√£o","tecnologia"]},{titulo:"Sa√∫de mental no trabalho exige novas pol√≠ticas corporativas",resumo:"Burnout e ansiedade afetam 40% dos profissionais segundo pesquisa. Empresas implementam programas de wellbeing e acompanhamento psicol√≥gico.",sentimento:"neutro",categorias:["sa√∫de mental","rh","wellbeing"]}]}function Aa({cnpj:s="26888098000159",nomeEmpresa:r="Volpe BPO",grupoEmpresarial:o="Grupo Volpe"}){const[l,a]=c.useState(!1),[i,m]=c.useState(""),[d,u]=c.useState(null),[x,v]=c.useState([]),[w,p]=c.useState([]),[C,k]=c.useState([]);c.useEffect(()=>{S(),P()},[s,r,o]);const S=async()=>{const n=await Fe(s,r,o);u(n),m(wa(n))},P=async()=>{a(!0);try{let n=d;n||(n=await Fe(s,r,o),u(n));const R=Ca(n,48),O=Sa(n,36),g=Ea(n,48);console.log(`üì∞ Not√≠cias geradas para ${n.grupoEmpresarial}:`,{mercado:R.length,concorrentes:O.length,tendencias:g.length}),setTimeout(()=>{v(R),p(O),k(g),a(!1)},800)}catch(n){console.error("Erro ao carregar not√≠cias:",n),a(!1)}},N=n=>{const O={positivo:{bg:"bg-green-500/20",text:"text-green-400",icon:H,label:"Positivo"},neutro:{bg:"bg-blue-500/20",text:"text-blue-400",icon:Os,label:"Neutro"},negativo:{bg:"bg-red-500/20",text:"text-red-400",icon:pe,label:"Negativo"}}[n],g=O.icon;return e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${O.bg} ${O.text} text-xs font-semibold`,children:[e.jsx(g,{className:"w-3 h-3"}),O.label]})},E=({noticia:n})=>e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"neomorphic rounded-2xl p-5 border border-graphite-800/30 hover:border-gold-500/30 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-semibold text-base mb-2 line-clamp-2",children:n.titulo}),e.jsx("p",{className:"text-graphite-400 text-sm leading-relaxed line-clamp-3",children:n.resumo})]}),e.jsx("div",{className:"ml-4",children:N(n.sentimento)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-graphite-800",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-graphite-500",children:[e.jsx("span",{className:"font-medium",children:n.fonte}),e.jsx("span",{children:new Date(n.data).toLocaleDateString("pt-BR")}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-gold-500"}),n.relevancia,"% relevante"]})]}),e.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"text-gold-500 hover:text-gold-400 transition-colors",children:e.jsx(Ts,{className:"w-4 h-4"})})]})]});return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Not√≠cias & Intelig√™ncia de Mercado"}),e.jsxs("p",{className:"text-graphite-400",children:["Acompanhe tend√™ncias, concorrentes e oportunidades do setor ‚Ä¢ ",r]})]}),e.jsxs(cs,{onClick:P,disabled:l,className:"flex items-center gap-2",children:[e.jsx(re,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Atualizar"]})]}),e.jsxs(G,{className:"mb-6 bg-gradient-to-br from-gold-500/10 to-gold-600/5 border-gold-500/20",children:[e.jsx(q,{children:e.jsxs(U,{className:"text-gold-400 flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"Sobre a Empresa Analisada"]})}),e.jsxs(J,{className:"space-y-3",children:[e.jsx("p",{className:"text-graphite-300 text-sm leading-relaxed",children:i||"Carregando informa√ß√µes da empresa..."}),d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-3 border-t border-gold-500/20",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ps,{className:"w-4 h-4 text-gold-400"}),e.jsx("span",{className:"text-xs font-semibold text-gold-400",children:"Segmento"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.segmentosPrincipais.map(n=>e.jsx("span",{className:"px-2 py-1 rounded-md bg-gold-500/10 text-gold-400 text-xs",children:n.toUpperCase()},n))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs font-semibold text-blue-400",children:"Concorrentes Principais"})]}),e.jsxs("p",{className:"text-graphite-400 text-xs",children:[d.concorrentes.slice(0,3).join(", "),"..."]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs font-semibold text-green-400",children:"Palavras-Chave"})]}),e.jsx("p",{className:"text-graphite-400 text-xs",children:d.palavrasChave.slice(0,3).join(", ")})]})]})]})]}),e.jsxs(Re,{defaultValue:"mercado",className:"w-full",children:[e.jsxs(ve,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs($,{value:"mercado",children:["Mercado & Setor",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-gold-500/20 text-gold-400 text-xs",children:x.length})]}),e.jsxs($,{value:"concorrentes",children:["Concorrentes",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400 text-xs",children:w.length})]}),e.jsxs($,{value:"tendencias",children:["Tend√™ncias",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-purple-500/20 text-purple-400 text-xs",children:C.length})]})]}),e.jsx(L,{value:"mercado",className:"space-y-4",children:l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"w-8 h-8 animate-spin text-gold-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando not√≠cias do mercado..."})]}):x.map(n=>e.jsx(E,{noticia:n},n.id))}),e.jsx(L,{value:"concorrentes",className:"space-y-4",children:l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando not√≠cias de concorrentes..."})]}):w.map(n=>e.jsx(E,{noticia:n},n.id))}),e.jsx(L,{value:"tendencias",className:"space-y-4",children:l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-4"}),e.jsx("p",{className:"text-graphite-400",children:"Carregando tend√™ncias do setor..."})]}):C.map(n=>e.jsx(E,{noticia:n},n.id))})]})]})}function Ia(){const[s,r]=c.useState([]),[o,l]=c.useState([]),[a,i]=c.useState(!0),[m,d]=c.useState(""),[u,x]=c.useState(null),[v,w]=c.useState(!1),[p,C]=c.useState(!1);c.useEffect(()=>{k()},[]);const k=async()=>{i(!0);try{const f=await _.getCompanies();l(f);const D=await S();r(D)}catch(f){console.error("Erro ao carregar dados:",f)}finally{i(!1)}},S=async()=>[{id:"1",name:"Admin Sistema",email:"admin@volpe.com.br",role:"admin",active:!0,created_at:"2025-01-01T00:00:00Z",allowed_companies:[]},{id:"2",name:"Jo√£o Silva",email:"joao@volpe.com.br",role:"franqueado",active:!0,created_at:"2025-02-15T00:00:00Z",allowed_companies:["26888098000159","26888098000240"]},{id:"3",name:"Maria Santos",email:"maria@cliente.com.br",role:"cliente",active:!0,created_at:"2025-03-20T00:00:00Z",allowed_companies:["26888098000159"]}],P=()=>{x({id:"",name:"",email:"",role:"cliente",active:!0,created_at:new Date().toISOString(),allowed_companies:[],password:""}),C(!0)},N=async()=>{if(u)try{if(p){const f={...u,id:Date.now().toString()};r([...s,f])}else r(s.map(f=>f.id===u.id?u:f));x(null),C(!1)}catch(f){console.error("Erro ao salvar usu√°rio:",f)}},E=async f=>{if(confirm("Tem certeza que deseja excluir este usu√°rio?"))try{r(s.filter(D=>D.id!==f))}catch(D){console.error("Erro ao excluir usu√°rio:",D)}},n=async f=>{try{r(s.map(D=>D.id===f?{...D,active:!D.active}:D))}catch(D){console.error("Erro ao alterar status:",D)}},R=f=>{if(!u)return;const D=u.allowed_companies.includes(f)?u.allowed_companies.filter(A=>A!==f):[...u.allowed_companies,f];x({...u,allowed_companies:D})},O=s.filter(f=>f.name.toLowerCase().includes(m.toLowerCase())||f.email.toLowerCase().includes(m.toLowerCase())),g=f=>{const D={admin:"bg-red-500/20 text-red-400 border-red-500/30",franqueado:"bg-blue-500/20 text-blue-400 border-blue-500/30",cliente:"bg-green-500/20 text-green-400 border-green-500/30",personalizado:"bg-purple-500/20 text-purple-400 border-purple-500/30"};return D[f]||D.cliente},M=f=>({admin:"Administrador",franqueado:"Franqueado",cliente:"Cliente",personalizado:"Personalizado"})[f]||f;return a?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"Carregando usu√°rios..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-blue-500/20 border border-blue-500/30",children:e.jsx(Se,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Gerenciamento de Usu√°rios"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Crie, edite e gerencie usu√°rios e suas permiss√µes"})]})]}),e.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 bg-gold-500 hover:bg-gold-600 text-graphite-900 rounded-xl text-sm font-medium transition-colors",children:[e.jsx(_s,{className:"w-4 h-4"}),"Novo Usu√°rio"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",value:m,onChange:f=>d(f.target.value),placeholder:"Buscar por nome ou email...",className:"w-full pl-10 pr-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"})]}),e.jsx("div",{className:"card-premium overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-graphite-900/50 border-b border-graphite-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Nome"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Perfil"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Empresas"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-muted-foreground",children:"A√ß√µes"})]})}),e.jsx("tbody",{className:"divide-y divide-graphite-800",children:O.map(f=>e.jsxs("tr",{className:"hover:bg-graphite-900/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:f.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:f.email}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium border ${g(f.role)}`,children:M(f.role)})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:f.role==="admin"?e.jsx("span",{className:"text-gold-400",children:"Todas"}):e.jsxs("span",{children:[f.allowed_companies.length," empresa(s)"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>n(f.id),className:`px-2 py-1 rounded-lg text-xs font-medium transition-colors ${f.active?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"}`,children:f.active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{x(f),C(!1)},className:"p-1.5 hover:bg-graphite-800 rounded-lg transition-colors",title:"Editar",children:e.jsx(zs,{className:"w-4 h-4 text-blue-400"})}),e.jsx("button",{onClick:()=>E(f.id),className:"p-1.5 hover:bg-graphite-800 rounded-lg transition-colors",title:"Excluir",children:e.jsx($s,{className:"w-4 h-4 text-red-400"})})]})})]},f.id))})]})})}),e.jsx(ms,{children:u&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>{x(null),C(!1)},children:e.jsxs(b.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-card border border-border rounded-2xl shadow-soft-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-5 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold",children:p?"Novo Usu√°rio":"Editar Usu√°rio"}),e.jsx("button",{onClick:()=>{x(null),C(!1)},className:"text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(Ee,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:u.name,onChange:f=>x({...u,name:f.target.value}),className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20",placeholder:"Ex: Jo√£o da Silva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:u.email,onChange:f=>x({...u,email:f.target.value}),className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20",placeholder:"email@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:p?"Senha *":"Nova Senha (deixe em branco para manter)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v?"text":"password",value:u.password||"",onChange:f=>x({...u,password:f.target.value}),className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),e.jsx("button",{type:"button",onClick:()=>w(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:v?e.jsx(He,{className:"w-4 h-4"}):e.jsx(Ke,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Perfil de Acesso *"}),e.jsxs("select",{value:u.role,onChange:f=>x({...u,role:f.target.value}),className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20",children:[e.jsx("option",{value:"cliente",children:"Cliente"}),e.jsx("option",{value:"franqueado",children:"Franqueado"}),e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"personalizado",children:"Personalizado"})]}),e.jsxs("p",{className:"mt-1.5 text-xs text-muted-foreground",children:[u.role==="admin"&&"Acesso total a todas as empresas e configura√ß√µes",u.role==="franqueado"&&"Acesso a m√∫ltiplas empresas selecionadas",u.role==="cliente"&&"Acesso restrito √†s empresas selecionadas",u.role==="personalizado"&&"Permiss√µes customizadas"]})]}),u.role!=="admin"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-3",children:[e.jsx(ss,{className:"w-4 h-4 inline mr-1"}),"Empresas Permitidas"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto bg-graphite-900/50 rounded-xl p-3 border border-graphite-800",children:o.map(f=>e.jsxs("label",{className:"flex items-start gap-3 p-2 hover:bg-graphite-800/50 rounded-lg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:u.allowed_companies.includes(f.cnpj),onChange:()=>R(f.cnpj),className:"mt-0.5 w-4 h-4 rounded border-graphite-700 text-gold-500 focus:ring-gold-500 focus:ring-offset-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:f.cliente_nome}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["CNPJ: ",f.cnpj," ‚Ä¢ ",f.grupo_empresarial]})]})]},f.cnpj))})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:N,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-gold-500 hover:bg-gold-600 text-graphite-900 rounded-xl text-sm font-medium transition-colors",children:[e.jsx(Ls,{className:"w-4 h-4"}),p?"Criar Usu√°rio":"Salvar Altera√ß√µes"]}),e.jsx("button",{onClick:()=>{x(null),C(!1)},className:"px-4 py-2.5 bg-graphite-800 hover:bg-graphite-700 text-foreground rounded-xl text-sm font-medium transition-colors",children:"Cancelar"})]})]})]})})})]})}function Ma(){const[s,r]=c.useState(null),[o,l]=c.useState(!0),[a,i]=c.useState(!0),[m,d]=c.useState(30);c.useEffect(()=>{u()},[]),c.useEffect(()=>{if(!a)return;const p=setInterval(()=>{u()},m*1e3);return()=>clearInterval(p)},[a,m]);const u=async()=>{l(!0);try{r({database:{connections:12,queries_per_sec:245,storage_used_gb:8.4,storage_total_gb:50,avg_query_time_ms:23},api:{requests_per_min:1250,avg_response_time_ms:187,error_rate_percent:.3,active_sessions:45},llm:{provider:"OpenAI",model:"gpt-4-turbo",tokens_used_today:125400,tokens_limit_daily:1e6,requests_today:342,avg_latency_ms:1245,cost_today_usd:12.54},whatsapp:{connected:!0,messages_today:89,messages_pending:3,last_connection:new Date().toISOString(),phone_number:"+55 11 98765-4321"},system:{uptime_hours:168.5,cpu_usage_percent:34,memory_usage_percent:58,disk_usage_percent:42}})}catch(p){console.error("Erro ao carregar m√©tricas NOC:",p)}finally{l(!1)}},x=[{name:"CPU",value:s?.system.cpu_usage_percent||0,color:"#3b82f6"},{name:"Mem√≥ria",value:s?.system.memory_usage_percent||0,color:"#10b981"},{name:"Disco",value:s?.system.disk_usage_percent||0,color:"#f59e0b"}],v=s?s.llm.tokens_used_today/s.llm.tokens_limit_daily*100:0,w=s?s.database.storage_used_gb/s.database.storage_total_gb*100:0;return o&&!s?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"Carregando m√©tricas NOC..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-purple-500/20 border border-purple-500/30",children:e.jsx(as,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold",children:"NOC - Centro de Opera√ß√µes"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Monitoramento em tempo real de infraestrutura e servi√ßos"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:p=>i(p.target.checked),className:"w-3.5 h-3.5 rounded border-graphite-700 text-gold-500 focus:ring-gold-500 focus:ring-offset-0"}),"Auto-refresh"]}),e.jsxs("select",{value:m,onChange:p=>d(Number(p.target.value)),disabled:!a,className:"px-3 py-1.5 bg-graphite-900 border border-graphite-800 rounded-lg text-xs focus:outline-none focus:border-gold-500 disabled:opacity-50",children:[e.jsx("option",{value:10,children:"10s"}),e.jsx("option",{value:30,children:"30s"}),e.jsx("option",{value:60,children:"1min"}),e.jsx("option",{value:300,children:"5min"})]}),e.jsx("button",{onClick:u,className:"p-2 bg-graphite-800 hover:bg-graphite-700 rounded-lg transition-colors",title:"Atualizar agora",children:e.jsx(re,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(b.div,{whileHover:{scale:1.02},className:"card-premium p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20 border border-blue-500/30",children:e.jsx(Fs,{className:"w-4 h-4 text-blue-400"})}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-500/20 text-green-400",children:"Online"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground",children:"Database"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:s?.database.connections}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Conex√µes ativas"})]}),e.jsxs("div",{className:"pt-2 border-t border-graphite-800 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Queries/s"}),e.jsx("span",{className:"font-medium",children:s?.database.queries_per_sec})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Lat√™ncia m√©dia"}),e.jsxs("span",{className:"font-medium",children:[s?.database.avg_query_time_ms,"ms"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Storage"}),e.jsxs("span",{className:"font-medium",children:[s?.database.storage_used_gb,"GB / ",s?.database.storage_total_gb,"GB"]})]}),e.jsx("div",{className:"w-full bg-graphite-800 rounded-full h-1.5 mt-2",children:e.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all",style:{width:`${w}%`}})})]})]}),e.jsxs(b.div,{whileHover:{scale:1.02},className:"card-premium p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500/20 border border-green-500/30",children:e.jsx(Bs,{className:"w-4 h-4 text-green-400"})}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-500/20 text-green-400",children:"Operacional"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground",children:"API"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:s?.api.requests_per_min}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requisi√ß√µes/min"})]}),e.jsxs("div",{className:"pt-2 border-t border-graphite-800 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tempo resposta"}),e.jsxs("span",{className:"font-medium",children:[s?.api.avg_response_time_ms,"ms"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Taxa de erro"}),e.jsxs("span",{className:"font-medium text-green-400",children:[s?.api.error_rate_percent,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Sess√µes ativas"}),e.jsx("span",{className:"font-medium",children:s?.api.active_sessions})]})]})]}),e.jsxs(b.div,{whileHover:{scale:1.02},className:"card-premium p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20 border border-purple-500/30",children:e.jsx(Ie,{className:"w-4 h-4 text-purple-400"})}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-500/20 text-green-400",children:s?.llm.provider})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground",children:"LLM / IA"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:s?.llm.requests_today}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requisi√ß√µes hoje"})]}),e.jsxs("div",{className:"pt-2 border-t border-graphite-800 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Model"}),e.jsx("span",{className:"font-medium",children:s?.llm.model})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens hoje"}),e.jsx("span",{className:"font-medium",children:(s?.llm.tokens_used_today||0).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Custo hoje"}),e.jsxs("span",{className:"font-medium text-gold-400",children:["$",s?.llm.cost_today_usd.toFixed(2)]})]}),e.jsx("div",{className:"w-full bg-graphite-800 rounded-full h-1.5 mt-2",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all ${v>80?"bg-red-500":v>60?"bg-yellow-500":"bg-purple-500"}`,style:{width:`${v}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-1",children:[v.toFixed(1),"% do limite di√°rio"]})]})]}),e.jsxs(b.div,{whileHover:{scale:1.02},className:"card-premium p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-600/20 border border-green-600/30",children:e.jsx(Vs,{className:"w-4 h-4 text-green-400"})}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s?.whatsapp.connected?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:s?.whatsapp.connected?"Conectado":"Desconectado"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground",children:"WhatsApp"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:s?.whatsapp.messages_today}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Mensagens hoje"})]}),e.jsxs("div",{className:"pt-2 border-t border-graphite-800 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pendentes"}),e.jsx("span",{className:"font-medium",children:s?.whatsapp.messages_pending})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"N√∫mero"}),e.jsx("span",{className:"font-medium",children:s?.whatsapp.phone_number})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"√öltima conex√£o"}),e.jsx("span",{className:"font-medium",children:new Date(s?.whatsapp.last_connection||"").toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-premium p-5",children:[e.jsxs("h5",{className:"text-sm font-semibold mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-gold-500"}),"Uso de Recursos do Sistema"]}),e.jsx(F,{width:"100%",height:250,children:e.jsxs(le,{data:x,children:[e.jsx(X,{strokeDasharray:"3 3",stroke:"#2a2a2a"}),e.jsx(Z,{dataKey:"name",stroke:"#666",style:{fontSize:12}}),e.jsx(Q,{stroke:"#666",style:{fontSize:12}}),e.jsx(Y,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:8}}),e.jsx(K,{dataKey:"value",fill:"#3b82f6",radius:[8,8,0,0],children:x.map((p,C)=>e.jsx(ge,{fill:p.color},`cell-${C}`))})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-2 bg-graphite-900/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Uptime"}),e.jsxs("p",{className:"text-sm font-bold mt-1",children:[Math.floor((s?.system.uptime_hours||0)/24),"d ",Math.floor((s?.system.uptime_hours||0)%24),"h"]})]}),e.jsxs("div",{className:"text-center p-2 bg-graphite-900/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"CPU"}),e.jsxs("p",{className:"text-sm font-bold mt-1",children:[s?.system.cpu_usage_percent,"%"]})]}),e.jsxs("div",{className:"text-center p-2 bg-graphite-900/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"RAM"}),e.jsxs("p",{className:"text-sm font-bold mt-1",children:[s?.system.memory_usage_percent,"%"]})]})]})]}),e.jsxs("div",{className:"card-premium p-5",children:[e.jsxs("h5",{className:"text-sm font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-gold-500"}),"Configura√ß√µes WhatsApp"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"N√∫mero de Telefone"}),e.jsx("input",{type:"text",value:s?.whatsapp.phone_number,disabled:!0,className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Status da Conex√£o"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-graphite-900 border border-graphite-800 rounded-xl",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s?.whatsapp.connected?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:"text-sm",children:s?.whatsapp.connected?"Conectado e operacional":"Desconectado"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-graphite-900/50 rounded-xl",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mensagens Hoje"}),e.jsx("p",{className:"text-lg font-bold mt-1",children:s?.whatsapp.messages_today})]}),e.jsxs("div",{className:"p-3 bg-graphite-900/50 rounded-xl",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pendentes"}),e.jsx("p",{className:"text-lg font-bold mt-1",children:s?.whatsapp.messages_pending})]})]}),e.jsxs("button",{className:"w-full px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-xl text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Reconectar WhatsApp"]}),e.jsxs("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-xl flex items-start gap-2",children:[e.jsx(Gs,{className:"w-4 h-4 text-yellow-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-yellow-200",children:"Para conectar um novo dispositivo, escaneie o QR Code gerado pelo sistema."})]})]})]})]}),e.jsxs("div",{className:"card-premium p-5",children:[e.jsxs("h5",{className:"text-sm font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-gold-500"}),"Configura√ß√µes de IA / LLM"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Provider"}),e.jsxs("select",{className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20",children:[e.jsx("option",{value:"openai",children:"OpenAI"}),e.jsx("option",{value:"anthropic",children:"Anthropic (Claude)"}),e.jsx("option",{value:"google",children:"Google (Gemini)"}),e.jsx("option",{value:"azure",children:"Azure OpenAI"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Modelo"}),e.jsxs("select",{className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20",children:[e.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),e.jsx("option",{value:"gpt-4",children:"GPT-4"}),e.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),e.jsx("option",{value:"claude-3-opus",children:"Claude 3 Opus"}),e.jsx("option",{value:"claude-3-sonnet",children:"Claude 3 Sonnet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"API Key"}),e.jsx("input",{type:"password",placeholder:"sk-...",className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Limite Di√°rio de Tokens"}),e.jsx("input",{type:"number",defaultValue:1e6,className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Instru√ß√µes do Sistema (System Prompt)"}),e.jsx("textarea",{rows:4,placeholder:"Voc√™ √© um assistente financeiro especializado...",className:"w-full px-4 py-2.5 bg-graphite-900 border border-graphite-800 rounded-xl text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 font-mono"})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-3",children:[e.jsx("button",{className:"flex-1 px-4 py-2.5 bg-gold-500 hover:bg-gold-600 text-graphite-900 rounded-xl text-sm font-medium transition-colors",children:"Salvar Configura√ß√µes"}),e.jsx("button",{className:"px-4 py-2.5 bg-graphite-800 hover:bg-graphite-700 text-foreground rounded-xl text-sm font-medium transition-colors",children:"Testar Conex√£o"})]})]})]})]})}const Be="oracle_context_rules";function Pa({open:s,onClose:r,onUpdateOracleContext:o}){const[l,a]=c.useState("settings"),[i,m]=c.useState(""),[d,u]=c.useState("all"),[x,v]=c.useState("all"),[w,p]=c.useState("24h"),[C,k]=c.useState([]);if(c.useEffect(()=>{if(s){const n=localStorage.getItem(Be)||"";m(n)}},[s]),c.useEffect(()=>{if(!s||l!=="logs")return;const n={select:"*",order:"ts.desc",limit:"200"};_.restGet("app_logs",{query:n}).then(k).catch(()=>k([]))},[s,l,d,x,w]),!s)return null;const S=()=>{localStorage.setItem(Be,i),o&&o(i),r()},P=C.filter(n=>(d==="all"||n.level===d)&&(x==="all"||n.service===x)),N=P.map(n=>({ts:n.ts,info:n.level==="info"?1:0,warn:n.level==="warn"?1:0,error:n.level==="error"?1:0})),E=Object.values(P.reduce((n,R)=>(R.endpoint&&(n[R.endpoint]=(n[R.endpoint]||0)+1),n),{})).length?Object.entries(P.reduce((n,R)=>(R.endpoint&&(n[R.endpoint]=(n[R.endpoint]||0)+1),n),{})).slice(0,8).map(([n,R])=>({endpoint:n,count:R})):[];return P.filter(n=>n.latencyMs).map(n=>({endpoint:n.endpoint||"N/A",latency:n.latencyMs})),e.jsx(b.div,{className:"fixed inset-0 z-[75] bg-black/60 backdrop-blur-sm",children:e.jsxs(b.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"mx-auto mt-12 max-w-[1200px] bg-card border border-border rounded-3xl shadow-soft-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-gold-500"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Configura√ß√µes do Sistema"})]}),e.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground",children:e.jsx(Ee,{className:"w-5 h-5"})})]}),e.jsxs(Re,{value:l,onValueChange:a,className:"w-full",children:[e.jsxs(ve,{className:"w-full grid grid-cols-5 p-1 mx-5 mt-5",children:[e.jsxs($,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Configura√ß√µes"]}),e.jsxs($,{value:"users",className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"}),"Usu√°rios"]}),e.jsxs($,{value:"noc",className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-4 h-4"}),"NOC"]}),e.jsxs($,{value:"logs",className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4"}),"Logs"]}),e.jsxs($,{value:"about",className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-4 h-4"}),"Sobre"]})]}),e.jsx(L,{value:"settings",className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Regras de Contexto do Or√°culo"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Configure regras de contexto (empresa/grupo, fontes, tom e escopo) para personalizar respostas do Or√°culo."}),e.jsx("textarea",{value:i,onChange:n=>m(n.target.value),rows:10,placeholder:"Ex: Focar em an√°lise do Grupo Volpe, usar tom profissional, priorizar dados de 2024-2025...",className:"w-full bg-graphite-900 border border-graphite-800 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20 font-mono"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 rounded-xl bg-secondary text-secondary-foreground hover:bg-secondary/80",children:"Cancelar"}),e.jsx("button",{onClick:S,className:"px-4 py-2 rounded-xl bg-primary text-primary-foreground hover:bg-primary/90",children:"Salvar"})]})]})}),e.jsx(L,{value:"users",className:"p-5",children:e.jsx(Ia,{})}),e.jsx(L,{value:"noc",className:"p-5",children:e.jsx(Ma,{})}),e.jsx(L,{value:"logs",className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("select",{value:w,onChange:n=>p(n.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"24h",children:"24h"}),e.jsx("option",{value:"7d",children:"7 dias"}),e.jsx("option",{value:"30d",children:"30 dias"})]}),e.jsxs("select",{value:d,onChange:n=>u(n.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos os n√≠veis"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warn",children:"Warn"}),e.jsx("option",{value:"error",children:"Error"})]}),e.jsxs("select",{value:x,onChange:n=>v(n.target.value),className:"bg-graphite-900 border border-graphite-800 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Todos os servi√ßos"}),e.jsx("option",{value:"UI",children:"UI"}),e.jsx("option",{value:"API",children:"API"}),e.jsx("option",{value:"Edge",children:"Edge"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"N√≠veis ao longo do tempo"})}),e.jsx("div",{className:"p-4 pt-0 h-[250px]",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(ie,{data:N,children:[e.jsx(X,{stroke:"rgba(200,200,200,0.15)",vertical:!1}),e.jsx(Z,{dataKey:"ts",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12},hide:!0}),e.jsx(Q,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(Y,{}),e.jsx(he,{}),e.jsx(V,{type:"monotone",dataKey:"info",stackId:"1",stroke:"#38bdf8",fill:"#38bdf8"}),e.jsx(V,{type:"monotone",dataKey:"warn",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b"}),e.jsx(V,{type:"monotone",dataKey:"error",stackId:"1",stroke:"#ef4444",fill:"#ef4444"})]})})})]}),e.jsxs("div",{className:"card-premium",children:[e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Top endpoints"})}),e.jsx("div",{className:"p-4 pt-0 h-[250px]",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(le,{data:E,children:[e.jsx(X,{stroke:"rgba(200,200,200,0.15)"}),e.jsx(Z,{dataKey:"endpoint",stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(Q,{stroke:"#bbb",tick:{fill:"#bbb",fontSize:12}}),e.jsx(Y,{}),e.jsx(K,{dataKey:"count",fill:"#ff7a00"})]})})})]})]}),e.jsx("div",{className:"rounded-2xl border border-border overflow-hidden max-h-[300px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-graphite-900 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Timestamp"}),e.jsx("th",{className:"text-left p-3",children:"N√≠vel"}),e.jsx("th",{className:"text-left p-3",children:"Servi√ßo"}),e.jsx("th",{className:"text-left p-3",children:"Endpoint"}),e.jsx("th",{className:"text-left p-3",children:"Mensagem"})]})}),e.jsxs("tbody",{children:[P.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-8 text-muted-foreground",children:"Nenhum log encontrado para os filtros selecionados."})}),P.slice(0,50).map((n,R)=>e.jsxs("tr",{className:"border-t border-border hover:bg-graphite-900/50",children:[e.jsx("td",{className:"p-3 text-xs",children:new Date(n.ts).toLocaleString("pt-BR")}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${n.level==="error"?"bg-red-500/20 text-red-400":n.level==="warn"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:n.level})}),e.jsx("td",{className:"p-3 text-xs",children:n.service}),e.jsx("td",{className:"p-3 text-xs font-mono",children:n.endpoint||"-"}),e.jsx("td",{className:"p-3 text-xs",children:n.message})]},R))]})]})})]})}),e.jsx(L,{value:"about",className:"p-5",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-gold-500 to-orange-500 flex items-center justify-center",children:e.jsx(ne,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold",children:"fin.app"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Financial Intelligence Dashboard"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Vers√£o"}),e.jsx("p",{className:"text-lg font-bold",children:"v0.2.0"})]}),e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Ambiente"}),e.jsx("p",{className:"text-lg font-bold",children:"Produ√ß√£o"})]}),e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Empresa"}),e.jsx("p",{className:"text-lg font-bold",children:"Grupo Volpe"})]}),e.jsxs("div",{className:"card-premium p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"√öltima Atualiza√ß√£o"}),e.jsx("p",{className:"text-lg font-bold",children:"17/11/2025"})]})]}),e.jsxs("div",{className:"card-premium p-5",children:[e.jsx("h5",{className:"text-sm font-semibold mb-3",children:"Funcionalidades"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Dashboard financeiro com DRE e DFC"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"An√°lise de fluxo de caixa e lan√ßamentos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Sistema de not√≠cias inteligente com IA"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Or√°culo para consultas financeiras"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold-500"}),"Gerenciamento de logs e monitoramento"]})]})]}),e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"¬© 2025 fin.app. Todos os direitos reservados."})]})})]})]})})}const Ta={duration:.35,ease:[.22,1,.36,1]},Oa={hidden:{opacity:0,y:16},show:{opacity:1,y:0,transition:Ta}},we={whileHover:{scale:1.02}};function _a({open:s,onClose:r,onLogged:o}){const[l,a]=c.useState("dev@angrax.com.br"),[i,m]=c.useState("B5b0dcf500@#"),[d,u]=c.useState(""),[x,v]=c.useState(!1),w=async()=>{u(""),v(!0);try{const p=await is(l,i);if(!p){u("Credenciais inv√°lidas"),v(!1);return}const C={...p,defaultCompany:"26888098000159",companies:[{cliente_nome:"LOJA 01 - VOLPE MATRIZ",cnpj:"26888098000159"}]};o(C),r()}catch(p){u(p.message||"Erro ao fazer login"),v(!1)}};return s?e.jsx(b.div,{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-xl flex items-center justify-center",children:e.jsx(b.div,{variants:Oa,initial:"hidden",animate:"show",className:"neomorphic neomorphic-hover w-[380px] rounded-xl border border-graphite-800/30 shadow-soft-lg",children:e.jsxs("div",{className:"p-7 space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:"/finapp-logo.png",alt:"fin.app",className:"w-40 h-auto"}),e.jsx("h3",{className:"text-sm font-semibold",children:"Login - Grupo VOLPE"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acesso exclusivo para o grupo VOLPE"})]}),e.jsx(b.input,{whileHover:we.whileHover,value:l,onChange:p=>a(p.target.value),placeholder:"E-mail",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:x}),e.jsx(b.input,{whileHover:we.whileHover,type:"password",value:i,onChange:p=>m(p.target.value),placeholder:"Senha",className:"w-full bg-graphite-900 border border-graphite-800 rounded-sm px-2 py-1 text-xs",disabled:x}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e.jsx("p",{children:"Empresa padr√£o: LOJA 01 - VOLPE MATRIZ (0159)"})}),d&&e.jsx("p",{className:"text-xs text-destructive text-center",children:d}),e.jsx("div",{className:"flex gap-2 justify-end pt-2",children:e.jsx(b.button,{whileHover:we.whileHover,whileTap:{scale:.98},onClick:w,disabled:x,className:"w-full px-3 py-2 rounded-sm bg-emerald-400 text-white hover:bg-emerald-500 disabled:opacity-50",children:x?"Entrando...":"Entrar"})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[e.jsx("p",{children:"Usu√°rio: dev@angrax.com.br"}),e.jsx("p",{children:"Empresa: 26888098000159 (Matriz)"})]})]})})}):null}function za(s="26888098000159",r){const[o,l]=c.useState({receitaTotal:0,despesasTotal:0,limiteDiario:45e3,metaPoupanca:15e4,receitaChange:0,despesasChange:0,limiteDiarioProgress:0,metaPoupancaProgress:0}),[a,i]=c.useState(!0);c.useEffect(()=>{m()},[s,r]);const m=async()=>{try{const d=await _.getDRE(s);if(!d||d.length===0){i(!1);return}const[u,x]=r?r.split("-").map(Number):[new Date().getFullYear(),new Date().getMonth()+1],v=u,w=x-1;let p=0,C=0,k=0,S=0;d.forEach(M=>{const f=new Date(M.data),D=f.getFullYear(),A=f.getMonth();D===v&&A===w?M.natureza==="receita"?p+=M.valor:M.natureza==="despesa"&&(C+=Math.abs(M.valor)):(D===v&&A===w-1||w===0&&D===v-1&&A===11)&&(M.natureza==="receita"?k+=M.valor:M.natureza==="despesa"&&(S+=Math.abs(M.valor)))});const P=k>0?(p-k)/k*100:0,N=S>0?(C-S)/S*100:0,n=45e3*22,R=Math.min(Math.round(p/n*100),100),O=p-C,g=Math.min(Math.round(O/15e4*100),100);l({receitaTotal:p,despesasTotal:C,limiteDiario:45e3,metaPoupanca:15e4,receitaChange:P,despesasChange:N,limiteDiarioProgress:R,metaPoupancaProgress:g}),i(!1)}catch(d){console.error("Erro ao carregar dados financeiros:",d),i(!1)}};return{metrics:o,loading:a}}const Ve=[{value:42},{value:48},{value:45},{value:52},{value:58},{value:65},{value:70}];function $a({payments:s,receipts:r,paymentsChange:o,receiptsChange:l}){return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl p-6 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-500/5 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-graphite-400",children:"Processamento"}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üìä"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-0.5",children:"Pagamentos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.toLocaleString()}),e.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded-md text-[10px] font-semibold ${o>=0?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:[o>=0?e.jsx(H,{className:"w-3 h-3"}):e.jsx(pe,{className:"w-3 h-3"}),Math.abs(o),"%"]})]})]}),e.jsx("div",{className:"w-16 h-8",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsx(ie,{data:Ve,children:e.jsx(V,{type:"monotone",dataKey:"value",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.2,strokeWidth:1.5})})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-graphite-400 mb-0.5",children:"Recebimentos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r.toLocaleString()}),e.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded-md text-[10px] font-semibold ${l>=0?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:[l>=0?e.jsx(H,{className:"w-3 h-3"}):e.jsx(pe,{className:"w-3 h-3"}),Math.abs(l),"%"]})]})]}),e.jsx("div",{className:"w-16 h-8",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsx(ie,{data:Ve,children:e.jsx(V,{type:"monotone",dataKey:"value",stroke:"#10b981",fill:"#10b981",fillOpacity:.2,strokeWidth:1.5})})})})]})]})]})]})}const La=[{name:"Stone",value:35,color:"#10b981"},{name:"Cielo",value:28,color:"#3b82f6"},{name:"Rede",value:22,color:"#f59e0b"},{name:"GetNet",value:15,color:"#8b5cf6"}],Fa=[{name:"Jan",stone:32,cielo:25,rede:20,getnet:12},{name:"Fev",stone:34,cielo:27,rede:21,getnet:14},{name:"Mar",stone:35,cielo:28,rede:22,getnet:15}];function Ba(){return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl p-6 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/5 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-graphite-400",children:"Adquirentes"}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üí≥"})})]}),e.jsx("div",{className:"space-y-2.5 mb-4",children:La.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-graphite-300 font-medium",children:s.name}),e.jsxs("span",{className:"text-xs font-bold text-white",children:[s.value,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-graphite-900 rounded-full overflow-hidden",children:e.jsx(b.div,{initial:{width:0},animate:{width:`${s.value}%`},transition:{delay:.4+r*.1,duration:.6},className:"h-full rounded-full",style:{backgroundColor:s.color}})})]}),e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:s.color}})]},s.name))}),e.jsx("div",{className:"h-16 mt-4",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(le,{data:Fa,children:[e.jsx(K,{dataKey:"stone",fill:"#10b981",radius:[4,4,0,0]}),e.jsx(K,{dataKey:"cielo",fill:"#3b82f6",radius:[4,4,0,0]}),e.jsx(K,{dataKey:"rede",fill:"#f59e0b",radius:[4,4,0,0]}),e.jsx(K,{dataKey:"getnet",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]})}const Ce=[{name:"Bradesco",value:38,color:"#ef4444",icon:"üè¶"},{name:"Ita√∫",value:32,color:"#f59e0b",icon:"üèõÔ∏è"},{name:"Santander",value:20,color:"#3b82f6",icon:"üè¢"},{name:"Outros",value:10,color:"#6b7280",icon:"üíº"}],Va=Ce.map(s=>({name:s.name,value:s.value}));function Ga(){return e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"neomorphic neomorphic-hover border border-graphite-800/30 rounded-3xl p-6 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-500/5 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-graphite-400",children:"Bancos"}),e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üè¶"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsx(ts,{children:e.jsx(rs,{data:Va,cx:"50%",cy:"50%",innerRadius:12,outerRadius:35,dataKey:"value",strokeWidth:0,children:Ce.map((s,r)=>e.jsx(ge,{fill:s.color},`cell-${r}`))})})})}),e.jsx("div",{className:"flex-1 space-y-2",children:Ce.map((s,r)=>e.jsxs(b.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.45+r*.08},className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-xs text-graphite-300 flex-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-xs font-bold text-white",children:[s.value,"%"]}),e.jsx("span",{className:"text-sm",children:s.icon})]})]},s.name))})]})]})]})}function qa(){const[s,r]=c.useState(!0),[o,l]=c.useState(!1),[a,i]=c.useState(""),[m]=c.useState("admin"),[d,u]=c.useState("Dashboard"),[x,v]=c.useState("Ano"),[w,p]=c.useState(()=>ea()),[C,k]=c.useState(""),[S,P]=c.useState(""),[N,E]=c.useState(""),n=window.location.hostname.includes("dev.angrax.com.br")||window.location.hostname.includes("localhost"),[R,O]=c.useState("2025-11"),[g,M]=c.useState("26888098000159"),[f,D]=c.useState([]),{metrics:A,loading:B}=za(g,R);c.useEffect(()=>{ee();const I=localStorage.getItem("oracle_context_rules");if(I)i(I);else{const se=`# CONTEXTO DO OR√ÅCULO - ESPECIALISTA EM BPO E AN√ÅLISE DE FLUXO DE CAIXA

## EMPRESA/GRUPO
- Grupo Volpe BPO (CNPJ: 26.888.098/0001-59)
- Atua√ß√£o: Business Process Outsourcing (BPO), terceiriza√ß√£o de processos financeiros, administrativos e de RH
- Segmento: Servi√ßos empresariais B2B
- Principais clientes: Empresas de m√©dio e grande porte nos setores industrial, comercial e de servi√ßos

## EXPERTISE EM FLUXO DE CAIXA
Como especialista em BPO financeiro, o Or√°culo deve fornecer an√°lises profundas sobre:

### 1. GEST√ÉO DE RECEB√çVEIS E PAG√ÅVEIS
- An√°lise de prazos m√©dios de recebimento (PMR) e pagamento (PMP)
- Identifica√ß√£o de gargalos de cobran√ßa e inadimpl√™ncia
- Otimiza√ß√£o do ciclo de caixa operacional (CCC = PME + PMR - PMP)
- Estrat√©gias de antecipa√ß√£o de receb√≠veis e negocia√ß√£o com fornecedores
- An√°lise de aging de contas a receber e a pagar

### 2. PREVISIBILIDADE E PROJE√á√ïES
- Proje√ß√£o de fluxo de caixa para 30, 60 e 90 dias
- An√°lise de sazonalidade e padr√µes hist√≥ricos de receitas e despesas
- Identifica√ß√£o de tend√™ncias de entrada e sa√≠da de caixa
- Simula√ß√£o de cen√°rios (otimista, realista, pessimista)
- Alertas antecipados de necessidade de capital de giro

### 3. CAPITAL DE GIRO E LIQUIDEZ
- C√°lculo e monitoramento do capital de giro l√≠quido (CGL)
- An√°lise de √≠ndices de liquidez (corrente, seca, imediata)
- Identifica√ß√£o de necessidade de capital de giro (NCG)
- Estrat√©gias para otimiza√ß√£o de caixa m√≠nimo operacional
- An√°lise de convers√£o de caixa (cash conversion cycle)

### 4. CATEGORIZA√á√ÉO E AN√ÅLISE DE DESPESAS
- Classifica√ß√£o de despesas por natureza (fixas vs vari√°veis)
- An√°lise de despesas por centro de custo e departamento
- Identifica√ß√£o de despesas anormais ou outliers
- Benchmark de despesas operacionais vs receita bruta
- Oportunidades de redu√ß√£o de custos e renegocia√ß√£o

### 5. GEST√ÉO DE INADIMPL√äNCIA
- An√°lise de taxa de inadimpl√™ncia por cliente e per√≠odo
- Provis√£o para devedores duvidosos (PDD)
- Estrat√©gias de cobran√ßa e recupera√ß√£o de cr√©dito
- An√°lise de risco de cr√©dito de clientes
- Impacto da inadimpl√™ncia no fluxo de caixa projetado

### 6. INVESTIMENTOS E CAPEX
- An√°lise de investimentos em ativo fixo e tecnologia
- C√°lculo de retorno sobre investimento (ROI) e payback
- Impacto de investimentos no fluxo de caixa de curto e longo prazo
- Prioriza√ß√£o de projetos de investimento
- An√°lise de viabilidade financeira de expans√µes

### 7. INDICADORES CHAVE DE PERFORMANCE (KPIs)
- Gera√ß√£o de caixa operacional (Operating Cash Flow)
- Free Cash Flow (FCF = Fluxo Operacional - Capex)
- Burn rate (taxa de queima de caixa)
- Runway (tempo at√© esgotamento do caixa)
- Cash flow margin (margem de fluxo de caixa)
- EBITDA vs Cash Flow (an√°lise de qualidade de lucro)

### 8. COMPLIANCE E AUDITORIA
- Reconcilia√ß√£o banc√°ria e controles internos
- Rastreabilidade de lan√ßamentos e documenta√ß√£o
- Segrega√ß√£o de fun√ß√µes e al√ßadas de aprova√ß√£o
- Auditoria de processos de pagamento e recebimento
- Preven√ß√£o a fraudes e controles antifraude

## FONTES DE DADOS PRIORIT√ÅRIAS
1. DRE (Demonstra√ß√£o de Resultado do Exerc√≠cio) - an√°lise mensal e anual
2. DFC (Demonstra√ß√£o de Fluxo de Caixa) - m√©todo direto e indireto
3. Lan√ßamentos cont√°beis e extratos banc√°rios
4. Aging de contas a receber e a pagar
5. Ordens de pagamento e bordereaux de cobran√ßa
6. Concilia√ß√µes banc√°rias e movimenta√ß√µes financeiras

## TOM E ESTILO
- Linguagem executiva, clara e objetiva
- Foco em insights acion√°veis e recomenda√ß√µes pr√°ticas
- Uso de m√©tricas e KPIs financeiros
- Evid√™ncias baseadas em dados reais do ERP/Contabilidade
- Alertas proativos para riscos e oportunidades
- Compara√ß√µes temporais (MoM, YoY) e benchmarks setoriais

## ESCOPO DE AN√ÅLISE
- Per√≠odo: Dados de 2024 e 2025 (priorizar √∫ltimos 12 meses)
- Compara√ß√µes: M√™s vs m√™s anterior, ano vs ano anterior
- Foco: Grupo Volpe e suas unidades de neg√≥cio
- Granularidade: An√°lise consolidada e por centro de custo
- Alertas: Varia√ß√µes superiores a 15% ou valores at√≠picos

## RECOMENDA√á√ïES ESTRAT√âGICAS
Sempre que relevante, fornecer:
- Diagn√≥stico da situa√ß√£o atual do fluxo de caixa
- Identifica√ß√£o de problemas e oportunidades
- Recomenda√ß√µes de curto prazo (30 dias)
- Estrat√©gias de m√©dio prazo (90 dias)
- Plano de a√ß√£o com prioriza√ß√£o e respons√°veis sugeridos`;localStorage.setItem("oracle_context_rules",se),i(se)}},[]);const ee=async()=>{try{const I=await _.getCompanies();D(I)}catch(I){console.error("Erro ao carregar empresas:",I)}};return c.useState(()=>{const I=se=>u(se.detail);return window.addEventListener("navigate",I),()=>window.removeEventListener("navigate",I)}),e.jsxs("div",{className:`min-h-screen ${s?"dark bg-gradient-to-br from-charcoal-950 via-graphite-950 to-charcoal-900":"bg-gradient-to-br from-gray-50 via-white to-gray-100"} transition-colors duration-500`,children:[e.jsx(ra,{role:m,onOpenSettings:()=>l(!0)}),e.jsxs("div",{className:"ml-64 flex flex-col min-h-screen",children:[e.jsx(ia,{isDark:s,onThemeToggle:()=>r(!s),oracleContext:a,currentPeriod:x,onPeriodChange:I=>v(I),selectedMonth:R,onMonthChange:O,selectedCompany:g,onCompanyChange:M,companies:f}),e.jsxs("main",{className:"flex-1 p-8",children:[d==="Dashboard"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[e.jsx(ce,{title:"Receita Total",value:B?"R$ 0":`R$ ${Math.round(A.receitaTotal).toLocaleString("pt-BR")}`,change:B?0:A.receitaChange,trend:A.receitaChange>=0?"up":"down",icon:"TrendingUp",color:"green",sparklineData:[42,48,45,52,58,65,70,68,75,80,85,90]}),e.jsx(ce,{title:"Despesas",value:B?"R$ 0":`R$ ${Math.round(A.despesasTotal).toLocaleString("pt-BR")}`,change:B?0:A.despesasChange,trend:A.despesasChange>=0?"up":"down",icon:"TrendingDown",color:"red",sparklineData:[30,35,40,38,42,45,48,50,52,54,56,58]}),e.jsx(ce,{title:"Limite Di√°rio",value:`R$ ${A.limiteDiario.toLocaleString("pt-BR")}`,change:B?0:A.limiteDiarioProgress,trend:"up",icon:"Wallet",color:"blue",sparklineData:[20,25,30,28,32,35,38,40,42,43,44,45],progress:B?0:A.limiteDiarioProgress}),e.jsx(ce,{title:"Meta de Poupan√ßa",value:`R$ ${A.metaPoupanca.toLocaleString("pt-BR")}`,change:B?0:A.metaPoupancaProgress,trend:"up",icon:"Target",color:"gold",sparklineData:[10,20,35,45,60,70,80,90,95,100,105,110],progress:B?0:A.metaPoupancaProgress})]}),e.jsx("section",{className:"mb-6",children:e.jsx(ha,{period:x,session:w},`overview-${w?"auth":"anon"}`)}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(_e,{period:x,cnpj:g,selectedMonth:R})}),e.jsx("div",{children:e.jsx(ma,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(ls,{})}),e.jsx("div",{children:e.jsx(ua,{cnpj:g,selectedMonth:R})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[e.jsx($a,{payments:1248,receipts:892,paymentsChange:12,receiptsChange:8}),e.jsx(Ba,{}),e.jsx(Ga,{})]})]}),d==="An√°lises"&&e.jsx(ba,{selectedMonth:R,selectedCompany:g}),d==="Fluxo de Caixa"&&e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(_e,{period:x})}),d==="Extrato de Lan√ßamentos"&&e.jsx(ja,{}),d==="Relat√≥rios"&&e.jsx(ga,{}),d==="Clientes"&&e.jsx(fa,{}),d==="Not√≠cias"&&e.jsx(Aa,{cnpj:g,nomeEmpresa:f.find(I=>I.cnpj===g)?.cliente_nome||"Empresa",grupoEmpresarial:f.find(I=>I.cnpj===g)?.grupo_empresarial||"Grupo Empresarial"})]}),e.jsx(Pa,{open:o,onClose:()=>l(!1),onUpdateOracleContext:i}),!w&&(n?e.jsx(_a,{open:!w,onClose:()=>{},onLogged:I=>p(I)}):e.jsx("div",{className:"fixed inset-0 z-[90] bg-black/60 backdrop-blur flex items-center justify-center",children:e.jsxs("div",{className:"w-[360px] rounded-xl border border-graphite-800 bg-graphite-900 p-4 space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Entrar"}),N&&e.jsx("div",{className:"text-xs text-red-400",children:N}),e.jsx("input",{value:C,onChange:I=>k(I.target.value),placeholder:"E-mail",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("input",{type:"password",value:S,onChange:I=>P(I.target.value),placeholder:"Senha",className:"w-full bg-graphite-800 border border-graphite-700 rounded-sm px-2 py-1 text-xs"}),e.jsx("button",{onClick:async()=>{E("");try{const I=await Qs(C,S);if(!I){E(me||"Credenciais inv√°lidas");return}p(I)}catch(I){E(I.message||"Erro ao fazer login")}},className:"px-3 py-1 rounded-sm bg-emerald-400 text-white text-xs",children:"Entrar"})]})}))]})]})}ds.createRoot(document.getElementById("root")).render(e.jsx(de.StrictMode,{children:e.jsx(qa,{})}));
