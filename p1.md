# üéØ PROMPT CURSOR: INTEGRAR COMPONENTES DRE/DFC ESTILO DATA4COMPANY

Cole este prompt no Cursor:

---

## TAREFA: Substituir componentes atuais pelos novos componentes profissionais

Os valores num√©ricos est√£o CORRETOS. O objetivo √© ajustar apenas o LAYOUT e FORMATA√á√ÉO para ficar igual ao Data4Company, com:
- Tabela DRE com 12 meses compactos + Total
- Agrupamento hier√°rquico expans√≠vel (‚ñº/‚ñ∂)
- Gr√°fico de barras verde/vermelho
- 5 KPI cards no topo

---

## COMPONENTES A CRIAR/SUBSTITUIR

### 1. `src/components/DREConsolidadaTable.tsx` (NOVO)

Tabela hier√°rquica expans√≠vel com:
- 12 meses em colunas + coluna Total
- Valores formatados como K/M (R$ 8.597K, R$ 81M)
- Grupos expans√≠veis: RECEITA OPERACIONAL BRUTA, DEDU√á√ïES, DESPESAS, etc.
- Cores: verde para positivo, vermelho para negativo
- Sticky first column para nomes das contas

```tsx
// Estrutura da tabela:
// ‚ñº RECEITA OPERACIONAL BRUTA     | Jan    | Fev    | ... | Dez    | Total
//   Receita Bruta de Vendas       | 8.597K | 11.088K| ... | ...    | 81.545M
//   Receita de Servi√ßos           | ...    | ...    | ... | ...    | ...
// ‚ñº (-) DEDU√á√ïES DA RECEITA       | -7.382K| -9.595K| ... | ...    | -46K
//   Impostos sobre Vendas         | ...    | ...    | ... | ...    | ...
// = RECEITA OPERACIONAL L√çQUIDA   | 1.215K | 1.493K | ... | ...    | ...
// = LUCRO BRUTO                   | 1.215K | 1.493K | ... | ...    | 81.498M
// ‚ñº (-) DESPESAS                  | -504K  | -476K  | ... | ...    | ...
// = EBITDA                        | 711K   | 1.016K | ... | ...    | 1.524M
// = LUCRO L√çQUIDO                 | ...    | ...    | ... | ...    | 795K
```

**C√≥digo base:**

```tsx
import React, { useState, useMemo } from 'react';
import { ChevronDown, ChevronRight } from 'lucide-react';

const MONTHS = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];

const formatCompact = (value: number): string => {
  if (value === 0) return '-';
  const abs = Math.abs(value);
  const sign = value < 0 ? '-' : '';
  if (abs >= 1_000_000) return `${sign}R$ ${(abs / 1_000_000).toFixed(1).replace('.', ',')}M`;
  if (abs >= 1_000) return `${sign}R$ ${(abs / 1_000).toFixed(0)}K`;
  return `${sign}R$ ${abs.toFixed(0)}`;
};

export const DREConsolidadaTable = ({ data, year = '2025' }) => {
  const [expanded, setExpanded] = useState(new Set(['receita_bruta', 'deducoes', 'despesas']));
  
  // Implementar l√≥gica de agrupamento e expans√£o
  // Ver arquivo completo em /home/claude/components/DREConsolidadaTable.tsx
  
  return (
    <div className="bg-[#1a1a2e] rounded-lg overflow-hidden">
      <div className="px-4 py-3 border-b border-gray-700/50">
        <h3 className="text-white font-semibold text-sm">DRE Consolidada</h3>
      </div>
      <div className="overflow-x-auto">
        <table className="w-full border-collapse text-xs">
          <thead>
            <tr className="bg-[#252542]">
              <th className="text-left px-3 py-2 text-gray-300 sticky left-0 bg-[#252542] min-w-[200px] z-10">
                Grupo/Conta
              </th>
              {MONTHS.map(m => (
                <th key={m} className="text-right px-2 py-2 text-gray-400 min-w-[65px]">{m}</th>
              ))}
              <th className="text-right px-3 py-2 text-amber-400 bg-[#2a2a4a] min-w-[80px]">Total</th>
            </tr>
          </thead>
          <tbody>
            {/* Linhas da tabela */}
          </tbody>
        </table>
      </div>
    </div>
  );
};
```

---

### 2. `src/components/DFCTable.tsx` (NOVO)

Similar √† DREConsolidadaTable, mas com estrutura de Fluxo de Caixa:
- Colunas: Categoria | Jan (Entrada/Sa√≠da/Saldo) | Fev ... | Total
- Grupos: Lan√ßamentos DRE, Atividades Operacionais, etc.

---

### 3. `src/components/LucroBrutoChart.tsx` (MELHORAR)

Gr√°fico de barras com:
- 12 barras (uma por m√™s)
- Verde para lucro positivo
- Vermelho para preju√≠zo
- Linha pontilhada amarela para m√©dia
- Legenda: Aumentar (verde), Diminuir (vermelho), Total (linha)

```tsx
import { ComposedChart, Bar, Cell, XAxis, YAxis, ReferenceLine, Tooltip, ResponsiveContainer } from 'recharts';

// Cores
const COLORS = {
  positive: '#10b981',  // emerald-500
  negative: '#ef4444',  // red-500
  average: '#f59e0b'    // amber-500
};

// Cada barra com cor baseada no valor
<Bar dataKey="lucro" radius={[4, 4, 0, 0]}>
  {chartData.map((entry, index) => (
    <Cell key={index} fill={entry.lucro >= 0 ? COLORS.positive : COLORS.negative} />
  ))}
</Bar>

// Linha de m√©dia
<ReferenceLine y={average} stroke={COLORS.average} strokeDasharray="5 5" strokeWidth={2} />
```

---

### 4. `src/components/FinancialKPICards.tsx` (MELHORAR)

5 cards em linha horizontal:
- Receita Bruta (verde)
- Impostos (vermelho)
- Lucro Bruto (auto: verde se positivo, vermelho se negativo)
- EBITDA (azul)
- Lucro L√≠quido (auto)

Cada card mostra:
- T√≠tulo
- Valor formatado (R$ 81.545M)
- Varia√ß√£o vs m√™s anterior (‚Üë 12%)
- √çcone

---

## INTEGRA√á√ÉO NA P√ÅGINA

Em `src/pages/ReportsPage.tsx` ou `src/components/ReportsPage.tsx`:

```tsx
import { DREConsolidadaTable } from './DREConsolidadaTable';
import { DFCTable } from './DFCTable';
import { LucroBrutoChart } from './LucroBrutoChart';
import { FinancialKPICards } from './FinancialKPICards';

export const ReportsPage = () => {
  const [activeTab, setActiveTab] = useState<'DRE' | 'DFC'>('DRE');
  
  return (
    <div className="min-h-screen bg-[#0f0f1a] p-6">
      {/* KPI Cards */}
      <FinancialKPICards data={kpis} className="mb-6" />
      
      {/* Layout Grid */}
      <div className="grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-6">
        {/* Filtros Laterais */}
        <FilterSidebar ... />
        
        {/* Conte√∫do Principal */}
        <div className="space-y-6">
          {/* Tabs DRE/DFC */}
          <Tabs activeTab={activeTab} setActiveTab={setActiveTab} />
          
          {activeTab === 'DRE' ? (
            <>
              <DREConsolidadaTable data={dreData} year="2025" />
              <LucroBrutoChart data={dreData} year="2025" />
            </>
          ) : (
            <DFCTable data={dfcData} year="2025" />
          )}
        </div>
      </div>
    </div>
  );
};
```

---

## ESTILOS CR√çTICOS

1. **Cores de fundo:**
   - P√°gina: `bg-[#0f0f1a]`
   - Cards/Tabelas: `bg-[#1a1a2e]`
   - Headers: `bg-[#252542]`
   - Totais: `bg-[#2a2a4a]`

2. **Cores de texto:**
   - Positivo: `text-emerald-400`
   - Negativo: `text-red-400`
   - Total/Destaque: `text-amber-400`
   - EBITDA: `text-blue-400`
   - Normal: `text-gray-300`

3. **Fonte monospace para valores:**
   - `font-mono` para alinhamento num√©rico

4. **Formata√ß√£o compacta:**
   - Valores >= 1M: `R$ 81,5M`
   - Valores >= 1K: `R$ 8.597K`
   - Valores < 1K: `R$ 999`

---

## CHECKLIST

- [ ] DREConsolidadaTable mostra 12 meses + Total
- [ ] Grupos s√£o expans√≠veis/colaps√°veis
- [ ] Valores formatados como K/M
- [ ] Cores corretas (verde/vermelho/amber)
- [ ] Sticky column funciona no scroll horizontal
- [ ] DFCTable com Entrada/Sa√≠da/Saldo por m√™s
- [ ] Gr√°fico com barras verde/vermelho e linha m√©dia
- [ ] 5 KPI cards no topo funcionando
- [ ] Tabs DRE/DFC alternando corretamente
- [ ] Filtros laterais funcionando

---

## ARQUIVOS COMPLETOS

Os componentes completos est√£o em:
- `/home/claude/components/DREConsolidadaTable.tsx`
- `/home/claude/components/DFCTable.tsx`
- `/home/claude/components/LucroBrutoChart.tsx`
- `/home/claude/components/FinancialKPICards.tsx`
- `/home/claude/components/FinancialReportsPage.tsx`

Use como refer√™ncia ou copie diretamente para o projeto.
